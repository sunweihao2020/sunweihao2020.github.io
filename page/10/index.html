<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/10/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-网址记录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/%E7%BD%91%E5%9D%80%E8%AE%B0%E5%BD%95/" class="article-date">
  <time datetime="2022-04-05T02:22:35.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/%E7%BD%91%E5%9D%80%E8%AE%B0%E5%BD%95/">网址记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h1><h2 id="Isca-github主页"><a href="#Isca-github主页" class="headerlink" title="Isca github主页"></a>Isca github主页</h2><p><a target="_blank" rel="noopener" href="https://github.com/ExeClim/Isca">https://github.com/ExeClim/Isca</a></p>
<h2 id="Isca论坛"><a href="#Isca论坛" class="headerlink" title="Isca论坛"></a>Isca论坛</h2><p><a target="_blank" rel="noopener" href="https://github.com/ExeClim/Isca/issues">https://github.com/ExeClim/Isca/issues</a></p>
<h2 id="一个交流地球科学的网站"><a href="#一个交流地球科学的网站" class="headerlink" title="一个交流地球科学的网站"></a>一个交流地球科学的网站</h2><p><a target="_blank" rel="noopener" href="https://earthscience.stackexchange.com/questions/13673/how-to-run-earth-system-land-surface-and-climate-models/13704#13704">https://earthscience.stackexchange.com/questions/13673/how-to-run-earth-system-land-surface-and-climate-models/13704#13704</a></p>
<h2 id="搜索磁力的中介页面"><a href="#搜索磁力的中介页面" class="headerlink" title="搜索磁力的中介页面"></a>搜索磁力的中介页面</h2><p><a target="_blank" rel="noopener" href="https://pornbt.net/">https://pornbt.net/</a></p>
<h2 id="libgen的主页"><a href="#libgen的主页" class="headerlink" title="libgen的主页"></a>libgen的主页</h2><p><a target="_blank" rel="noopener" href="https://libgen.onl/">https://libgen.onl/</a></p>
<h2 id="wrf官方帮助安装文档"><a href="#wrf官方帮助安装文档" class="headerlink" title="wrf官方帮助安装文档"></a>wrf官方帮助安装文档</h2><p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/compilation_tutorial.php?spm=a2c6h.12873639.0.0.3a096c09JaF6G9">Compiling WRF (ucar.edu)</a></p>
<p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/users/supports/best_practices_lectures_workshop.html">https://www2.mmm.ucar.edu/wrf/users/supports/best_practices_lectures_workshop.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/Basics/index.php">ARW Model Basics (ucar.edu)</a> WRF官方案例教程</p>
<h2 id="python学习网站"><a href="#python学习网站" class="headerlink" title="python学习网站"></a>python学习网站</h2><p><a target="_blank" rel="noopener" href="https://finthon.com/">https://finthon.com/</a></p>
<h2 id="matplotlib教程合集"><a href="#matplotlib教程合集" class="headerlink" title="matplotlib教程合集"></a>matplotlib教程合集</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/">Tutorials — Matplotlib 3.5.0 documentation</a></p>
<h2 id="中世纪图书pdf"><a href="#中世纪图书pdf" class="headerlink" title="中世纪图书pdf"></a>中世纪图书pdf</h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/504191428">能不能推荐几部详细描写中世纪末期欧洲平民百姓人文的著作? - 知乎 (zhihu.com)</a></p>
<h2 id="盗版书网站"><a href="#盗版书网站" class="headerlink" title="盗版书网站"></a>盗版书网站</h2><p><a target="_blank" rel="noopener" href="https://za1lib.org/">https://za1lib.org/</a></p>
<h2 id="可视化工具3D"><a href="#可视化工具3D" class="headerlink" title="可视化工具3D"></a>可视化工具3D</h2><p><a target="_blank" rel="noopener" href="https://confluence.ecmwf.int/display/METV/3D+visualisation+with+VAPOR">https://confluence.ecmwf.int/display/METV/3D+visualisation+with+VAPOR</a></p>
<h2 id="专业配色网站"><a href="#专业配色网站" class="headerlink" title="专业配色网站"></a>专业配色网站</h2><p><a target="_blank" rel="noopener" href="https://mycolor.space/?hex=%23C6A3FF&sub=1">https://mycolor.space/?hex=%23C6A3FF&amp;sub=1</a></p>
<h2 id="md文件中的front-matter"><a href="#md文件中的front-matter" class="headerlink" title="md文件中的front-matter"></a>md文件中的front-matter</h2><p><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/front-matter">Front-matter | Hexo</a></p>
<h1 id="数据网站"><a href="#数据网站" class="headerlink" title="数据网站"></a>数据网站</h1><p><a target="_blank" rel="noopener" href="https://esgf-node.llnl.gov/projects/cmip6/">cmip6 - Home | ESGF-CoG (llnl.gov)</a></p>
<p>下载CMIP6的网站</p>
<p><a target="_blank" rel="noopener" href="https://cera-www.dkrz.de/WDCC/ui/cerasearch/cmip6?input=CMIP6.CMIP.NCAR.CESM2.historical">CMIP6 Citation ‘NCAR CESM2 model output prepared for CMIP6 CMIP historical’ (dkrz.de)</a></p>
<p>其中CESM2的数据</p>
<h1 id="美国气候的科普网站，无意中发现的"><a href="#美国气候的科普网站，无意中发现的" class="headerlink" title="美国气候的科普网站，无意中发现的"></a>美国气候的科普网站，无意中发现的</h1><p><a target="_blank" rel="noopener" href="https://www.climate.gov/news-features/blogs">Blogs | NOAA Climate.gov</a></p>
<h1 id="美国中尺度网站"><a href="#美国中尺度网站" class="headerlink" title="美国中尺度网站"></a>美国中尺度网站</h1><p><a target="_blank" rel="noopener" href="https://www.mmm.ucar.edu/">MMM: Mesoscale &amp; Microscale Meteorology Laboratory (ucar.edu)</a></p>
<h1 id="MPAS教程"><a href="#MPAS教程" class="headerlink" title="MPAS教程"></a>MPAS教程</h1><p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/projects/mpas/tutorial/Boulder2019/index.html">MPAS Tutorial — Practice Session Guide (ucar.edu)</a></p>
<h1 id="JC的投稿人入口"><a href="#JC的投稿人入口" class="headerlink" title="JC的投稿人入口"></a>JC的投稿人入口</h1><p><a target="_blank" rel="noopener" href="https://www.editorialmanager.com/jcli/default1.aspx">https://www.editorialmanager.com/jcli/default1.aspx</a></p>
<h1 id="关于插值的-scipy"><a href="#关于插值的-scipy" class="headerlink" title="关于插值的 scipy"></a>关于插值的 scipy</h1><p><a target="_blank" rel="noopener" href="https://scipy.github.io/devdocs/tutorial/interpolate.html">https://scipy.github.io/devdocs/tutorial/interpolate.html</a></p>
<h1 id="关于typora打公式的"><a href="#关于typora打公式的" class="headerlink" title="关于typora打公式的"></a>关于typora打公式的</h1><p><a target="_blank" rel="noopener" href="https://support.typora.io/Math/">https://support.typora.io/Math/</a></p>
<p><a target="_blank" rel="noopener" href="https://laravel.wiki/typora-math-formula-quick-check.html">https://laravel.wiki/typora-math-formula-quick-check.html</a>  各种数学公式的示例</p>
<h1 id="搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下"><a href="#搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下" class="headerlink" title="搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下"></a>搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下</h1><p><a target="_blank" rel="noopener" href="https://wrfems.info/index.php">https://wrfems.info/index.php</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/%E7%BD%91%E5%9D%80%E8%AE%B0%E5%BD%95/" data-id="cli09rpul005e5ov3955q0y3k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/website/" rel="tag">website</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-论文写作积累" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%A7%AF%E7%B4%AF/" class="article-date">
  <time datetime="2022-04-05T02:18:30.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%A7%AF%E7%B4%AF/">论文写作积累</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="写作积累"><a href="#写作积累" class="headerlink" title="写作积累"></a>写作积累</h1><h2 id="表示”显著“的："><a href="#表示”显著“的：" class="headerlink" title="表示”显著“的："></a>表示”显著“的：</h2><p>noticeable distinct significant</p>
<h2 id="过度句式"><a href="#过度句式" class="headerlink" title="过度句式"></a>过度句式</h2><p> Subject to the thermal wind balance…</p>
<h2 id="承接句"><a href="#承接句" class="headerlink" title="承接句"></a>承接句</h2><p>On the other side</p>
<h3 id="表示“开始”的"><a href="#表示“开始”的" class="headerlink" title="表示“开始”的"></a>表示“开始”的</h3><p>commence</p>
<h1 id="文献摘抄"><a href="#文献摘抄" class="headerlink" title="文献摘抄"></a>文献摘抄</h1><blockquote>
<p> From June to July, the <strong>middle and lower reaches</strong> of the Yangtze River experienced consecutive heavy rainfall</p>
</blockquote>
<p>“中下游经历降水”</p>
<blockquote>
<p>horse-shoe shaped positive anomalies</p>
</blockquote>
<p>形容pattern的</p>
<h1 id="撰写论文过程记录"><a href="#撰写论文过程记录" class="headerlink" title="撰写论文过程记录"></a>撰写论文过程记录</h1><h2 id="多少度到多少度，只需要在后面加上°，且中间有空格"><a href="#多少度到多少度，只需要在后面加上°，且中间有空格" class="headerlink" title="多少度到多少度，只需要在后面加上°，且中间有空格"></a>多少度到多少度，只需要在后面加上°，且中间有空格</h2><p>eg 10–15° N</p>
<h2 id="Hovmoller"><a href="#Hovmoller" class="headerlink" title="Hovmöller"></a>Hovmöller</h2><p>Hovmöller</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%A7%AF%E7%B4%AF/" data-id="cli09rpum005j5ov3g48jc7qm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/writing/" rel="tag">writing</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CESM试验记录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/CESM%E8%AF%95%E9%AA%8C%E8%AE%B0%E5%BD%95/" class="article-date">
  <time datetime="2022-04-05T00:52:08.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/model/">model</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/CESM%E8%AF%95%E9%AA%8C%E8%AE%B0%E5%BD%95/">CESM2试验记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="CESM2试验记录"><a href="#CESM2试验记录" class="headerlink" title="CESM2试验记录"></a>CESM2试验记录</h1><h3 id="2021-x2F-9-x2F-1"><a href="#2021-x2F-9-x2F-1" class="headerlink" title="2021&#x2F;9&#x2F;1"></a>2021&#x2F;9&#x2F;1</h3><p>将中南半岛地形设置为1m</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case topo_indo_1m_intel --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd topo_indo_1m_intel</span><br><span class="line">./xmlchange NTASKS=-24 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../control/user_nl_cam .</span><br><span class="line">cp ../control/sbatch1.sh .</span><br></pre></td></tr></table></figure>



<h1 id="控制实验"><a href="#控制实验" class="headerlink" title="控制实验"></a>控制实验</h1><p><strong>wgx</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case control_220416 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd control_220416</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br></pre></td></tr></table></figure>



<h2 id="去除高原大地形"><a href="#去除高原大地形" class="headerlink" title="去除高原大地形"></a>去除高原大地形</h2><h3 id="2021-x2F-9-x2F-6"><a href="#2021-x2F-9-x2F-6" class="headerlink" title="2021&#x2F;9&#x2F;6"></a>2021&#x2F;9&#x2F;6</h3><ol>
<li>在第一次实验中，将青藏高原和伊朗高原都去除，地形设置为200m</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9VET"><img src="https://z4a.net/images/2022/04/05/image-20210906105857784.png" alt="image-20210906105857784.png"></a></p>
<h4 id="试验记录"><a href="#试验记录" class="headerlink" title="试验记录"></a>试验记录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case topo_indo_no_plateau --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd topo_indo_no_plateau</span><br><span class="line">./xmlchange NTASKS=-24 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../topo_all_1m_intel2/user_nl_cam .</span><br><span class="line">cp ../topo_all_1m_intel2/sbatch1.sh .</span><br></pre></td></tr></table></figure>





<h1 id="更改海陆分布实验（一）印度大陆"><a href="#更改海陆分布实验（一）印度大陆" class="headerlink" title="更改海陆分布实验（一）印度大陆"></a>更改海陆分布实验（一）印度大陆</h1><h2 id="试验记录-1"><a href="#试验记录-1" class="headerlink" title="试验记录"></a>试验记录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case india_to_ocean2 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=1</span><br><span class="line">./xmlchange RESUBMIT=3</span><br><span class="line">./case.setup</span><br><span class="line">cp ../topo_all_1m_intel2/user_nl_cam .</span><br><span class="line">cp ../topo_all_1m_intel2/sbatch1.sh .</span><br><span class="line">!除此之外docn，cice均作了相应修改</span><br></pre></td></tr></table></figure>

<p>结果：无法正常运行，调查原因显示陆地与海洋的fraction不匹配</p>
<p><span style='color:red;background:white;font-size:50;font-family:楷体;'>这里寻找其他的办法</span></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/paleo/faq/#intro">reource for cesm1.2 paleosimulations</a></p>
<h2 id="制作mapping文件"><a href="#制作mapping文件" class="headerlink" title="制作mapping文件"></a>制作mapping文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/file_for_cesm_change_domain/gx1v6_090205_swh.nc -nocn gx1PT --nogridcheck</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh  --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/file_for_cesm_change_domain/gx1v6_090205_swh.nc -nocn gx1PT --nogridcheck</span><br></pre></td></tr></table></figure>

<p>报错</p>
<p>这里试试使用官方的格点文件排查一下可能的错误</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9jiv"><img src="https://z4a.net/images/2022/04/05/image-20220327200136190.png" alt="image-20220327200136190.png"></a></p>
<p>还是不行</p>
<p>调查&#x2F;public1&#x2F;home&#x2F;wgx&#x2F;swh&#x2F;cesm2.1.3&#x2F;cime&#x2F;tools&#x2F;mapping&#x2F;gen_mapping_files下的PET0.RegridWeightGen.Log文件</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9yzn"><img src="https://z4a.net/images/2022/04/05/image-20220328094233889.png" alt="image-20220328094233889.png"></a></p>
<p><font color='red'>显示似乎是NETCDF模块的问题</font></p>
<p>尝试重新安装ESMF，这里参考知乎上的教程</p>
<p>第二次安装时候的设置</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qLGp7R"><img src="https://s1.ax1x.com/2022/04/05/qLGp7R.png" alt="qLGp7R.png"></a></p>
<p>以上设置在make地阶段就坏了，这里只是把编译器换成intel的试了试</p>
<p><font color='red'>使用intel的编译器安装倒是成功了，但还是显示上述问题，看来依然需要在编译的时候出了问题</font></p>
<p>那就，重装吧</p>
<p>第一次尝试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export ESMF_NETCDF=&quot;split&quot;</span><br><span class="line">export ESMF_NETCDF_INCLUDE=/public1/home/wgx/swh/app/oneapi/netcdf4/include</span><br><span class="line">export ESMF_NETCDF_LIBPATH=/public1/home/wgx/swh/app/oneapi/netcdf4/lib</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> ESMF_NETCDF_LIBS=<span class="string">&quot;-lnetcdf -lnetcdff&quot;</span></span></span><br></pre></td></tr></table></figure>



<p><font color='red'>domain文件制作成功，接下来放进模式中试试</font></p>
<p><strong>制作domain文件流程记录</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/file_for_cesm_change_domain/gx1v7_151008_swh.nc -nocn gx1PT --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1PT_TO_fv09_125_aave.220329.nc -o gx1PT -l fv09_125</span><br></pre></td></tr></table></figure>



<p><strong>第一次尝试</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_1 --res f09_g16 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_1</span><br><span class="line">./xmlchange NTASKS=-20 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test1/user_nl_cam .</span><br><span class="line">cp ../f2000_test1/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_2 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_2</span><br><span class="line">./xmlchange NTASKS=-20 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test1/user_nl_cam .</span><br><span class="line">cp ../f2000_test1/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_3 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_3</span><br><span class="line">./xmlchange NTASKS=-20 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<p><strong>这里我对clm的namelist进行了修改，但是随后在编译的过程中出现了报错</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">err=ERROR : CLM build-namelist::CLMBuildNamelist::setup_logic_lnd_frac() : Can NOT set both -lnd_frac option (set via LND_DOMAIN_PATH/LND_DOMAIN_FILE env variables) AND fatmlndfrac on namelist</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里使用xmlchange对lnd吃进去的domain文件进行了修改，但是cpl的mapping文件却无法修改成功，只在user_nl_cpl里修改会报错</p>
<p>这里编译成功了，但是运行的过程中报错了，明天试试修改ATM_DOMAIN_FILE</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_4 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_4</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_5 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_5</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_blin.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_patc.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br></pre></td></tr></table></figure>

<p><font color='red'>结果是报错：</font></p>
<p> ERROR: surfdata&#x2F;fatmgrid lon&#x2F;lat mismatch error  5.684341886080801E-014</p>
<p>这里我换个组件试试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_6 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_6</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_blin.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_patc.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>这里我尝试修改源代码，增大lat&#x2F;lon的判定范围试试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_7 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_7</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_blin.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_patc.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>还是他妈的报错，这里准备重新自己制作一个不修改海陆分布的试试，看看问题出在哪</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125_1 -focn ~/swh/file_for_cesm_change_domain/gx1v7_151008.nc -nocn gx1PT_1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_8 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_8</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_blin.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_patc.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br></pre></td></tr></table></figure>

<p>尝试控制实验</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_8 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_8</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_blin.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_patc.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br></pre></td></tr></table></figure>

<p><font color='red'>结果成功了</font></p>
<h3 id="2022-4-1再次尝试"><a href="#2022-4-1再次尝试" class="headerlink" title="2022-4-1再次尝试"></a>2022-4-1再次尝试</h3><p><strong>制作domain文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/gx1v7_151008.nc -nocn gx1pt --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_TO_fv09_125_aave.220401.nc -o gx1pt -l fv09_125 -p 2</span><br><span class="line">cp domain.lnd.fv09_125_gx1pt.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cp domain.ocn.gx1pt.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>尝试</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_10 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_10</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>去除印度大陆</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/gx1v7_151008_swh.nc -nocn gx1pt_swh --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_swh_TO_fv09_125_aave.220401.nc -o gx1pt_swh -l fv09_125 -p 2</span><br><span class="line">cp domain.lnd.fv09_125_gx1pt_swh.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cp domain.ocn.gx1pt_swh.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp map_gx1pt_swh_TO_fv09_125_* ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp map_fv09_125_TO_gx1pt_swh_* ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_11 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_11</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>正式实验</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india4 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india4</span><br><span class="line">./xmlchange NTASKS=-16 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=10</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>正式实验2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india5 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india5</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=1</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=1</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>这种反复提交的会报错，我也不知道为什么，只能设置一个一次跑完的了</p>
<p><strong>正式实验3</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india8 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india8</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题"><a href="#测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题" class="headerlink" title="测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题"></a>测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india7 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india7</span><br><span class="line">./xmlchange NTASKS=-4 </span><br><span class="line">./xmlchange STOP_OPTION=ndays</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=10</span><br><span class="line">./xmlchange REST_OPTION=ndays</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>这里我怀疑是mpi的问题，</p>
<h4 id="测试mpi-这里是openmpi服务器自带的"><a href="#测试mpi-这里是openmpi服务器自带的" class="headerlink" title="测试mpi 这里是openmpi服务器自带的"></a>测试mpi 这里是openmpi服务器自带的</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_resubmit1 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd test_resubmit1</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=ndays</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=10</span><br><span class="line">./xmlchange REST_OPTION=ndays</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>会不会是reset文件没跟上呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_resubmit2 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd test_resubmit2</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=ndays</span><br><span class="line">./xmlchange STOP_N=10</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=ndays</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>



<h4 id="测试新装的oneapi"><a href="#测试新装的oneapi" class="headerlink" title="测试新装的oneapi"></a>测试新装的oneapi</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_oneapi1 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd test_oneapi1</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="更改海陆分布实验（二）中南半岛"><a href="#更改海陆分布实验（二）中南半岛" class="headerlink" title="更改海陆分布实验（二）中南半岛"></a>更改海陆分布实验（二）中南半岛</h1><h2 id="制作domain文件"><a href="#制作domain文件" class="headerlink" title="制作domain文件"></a>制作domain文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/gx1v7_151008_noinch.nc -nocn gx1pt_noinch --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc -o gx1pt_noinch -l fv09_125 -p 2</span><br><span class="line">cp *.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_inch --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd replace_inch</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_blin.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_patc.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="更改海陆分布实验（三）-海洋性大陆"><a href="#更改海陆分布实验（三）-海洋性大陆" class="headerlink" title="更改海陆分布实验（三） 海洋性大陆"></a>更改海陆分布实验（三） 海洋性大陆</h1><p><strong>制作domain文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_220410_nomarinland.nc -nocn gx1pt_nomarinland --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc -o gx1v7_nomarinland -l fv09_125 -p 2</span><br><span class="line">cp *.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_marinland --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd replace_marinland</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_nomarinland_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_nomarinland_blin.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_nomarinland_patc.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="更改海陆分布实验（四）-索马里地区"><a href="#更改海陆分布实验（四）-索马里地区" class="headerlink" title="更改海陆分布实验（四） 索马里地区"></a>更改海陆分布实验（四） 索马里地区</h1><p><strong>制作domain文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_220410_somali.nc -nocn gx1v7_somali --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc -o gx1v7_nomarinland -l fv09_125 -p 2</span><br></pre></td></tr></table></figure>

<p>该实验在lym上跑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_somali --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_somali</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv_09125_gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv_09125_gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_somali_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_somali_blin.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_somali_patc.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_somali_TO_fv09_125_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_somali_TO_fv09_125_aave.220410.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="更改海陆分布实验-（五）-去除印度大陆及中南半岛"><a href="#更改海陆分布实验-（五）-去除印度大陆及中南半岛" class="headerlink" title="更改海陆分布实验 （五） 去除印度大陆及中南半岛"></a>更改海陆分布实验 （五） 去除印度大陆及中南半岛</h1><p><strong>制作domain文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_151008_noinch_noindian.nc -nocn gx1v7_noinch_noindian --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc -o gx1v7_noinch_noindian -l fv09_125 -p 2</span><br><span class="line">cp *.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>

<p>该实验在lym上跑</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_inch_indian --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd replace_inch_indian</span><br><span class="line">./xmlchange NTASKS=-20</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_blin.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_patc.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="更改海陆分布实验-（六）-去除印度大陆及海洋性大陆"><a href="#更改海陆分布实验-（六）-去除印度大陆及海洋性大陆" class="headerlink" title="更改海陆分布实验 （六） 去除印度大陆及海洋性大陆"></a>更改海陆分布实验 （六） 去除印度大陆及海洋性大陆</h1><p><strong>生成domain文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_151008_nosealand_noindian.nc -nocn gx1v7_nosealand_noindian --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc -o gx1v7_noinch_noindian -l fv09_125 -p 2</span><br></pre></td></tr></table></figure>

<p>该实验在lym上跑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_sealand_indian --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_sealand_indian</span><br><span class="line">./xmlchange NTASKS=-20</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_somali/user_nl_cam .</span><br><span class="line">cp ../replace_somali/user_nl_docn .</span><br><span class="line">cp ../replace_somali/user_nl_cice .</span><br><span class="line">cp ../replace_somali/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_nosealand_noindian_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_nosealand_noindian_blin.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_nosealand_noindian_patc.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_nosealand_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_nosealand_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="海温实验"><a href="#海温实验" class="headerlink" title="海温实验"></a>海温实验</h1><h3 id="f2000-test1"><a href="#f2000-test1" class="headerlink" title="f2000_test1"></a>f2000_test1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case topo_indo_no_plateau --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd topo_indo_no_plateau</span><br><span class="line">./xmlchange NTASKS=-24 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=24</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br></pre></td></tr></table></figure>



<h3 id="测试能不能跑起来"><a href="#测试能不能跑起来" class="headerlink" title="测试能不能跑起来"></a>测试能不能跑起来</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test6 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test6</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test1/user_nl_cam .</span><br><span class="line">cp ../f2000_test1/sbatch1.sh .</span><br></pre></td></tr></table></figure>



<h3 id="测试能不能跑起来-更换更新的openmpi测试"><a href="#测试能不能跑起来-更换更新的openmpi测试" class="headerlink" title="测试能不能跑起来(更换更新的openmpi测试)"></a>测试能不能跑起来(更换更新的openmpi测试)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test8 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test8</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="测试mpi3"><a href="#测试mpi3" class="headerlink" title="测试mpi3"></a>测试mpi3</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test9 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test9</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br><span class="line"></span><br><span class="line">不可行</span><br></pre></td></tr></table></figure>

<h3 id="测试服务器自带的module"><a href="#测试服务器自带的module" class="headerlink" title="测试服务器自带的module"></a>测试服务器自带的module</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test10 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test10</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<h3 id="程序报错-试试fhist能不能跑"><a href="#程序报错-试试fhist能不能跑" class="headerlink" title="程序报错 试试fhist能不能跑"></a>程序报错 试试fhist能不能跑</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case fhist_test1 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd fhist_test1</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<p>FHIST是可以跑的，看来问题还是出在f2000的实验设置上，下一步检查inputdata是否有问题</p>
<h1 id="F2000-一-控制实验"><a href="#F2000-一-控制实验" class="headerlink" title="F2000 (一) 控制实验"></a>F2000 (一) 控制实验</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_control_220513 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_control_220513</span><br><span class="line">./xmlchange NTASKS=-12 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup</span><br><span class="line">cp ../replace_somali/user_nl_cam .</span><br><span class="line">cp ../replace_somali/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<h1 id="F2000（二）无印度大陆实验-lym服务器"><a href="#F2000（二）无印度大陆实验-lym服务器" class="headerlink" title="F2000（二）无印度大陆实验 lym服务器"></a>F2000（二）无印度大陆实验 lym服务器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_indian_220515 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_indian_220515</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_sealand_indian/user_nl_cam .</span><br><span class="line">cp ../replace_sealand_indian/user_nl_docn .</span><br><span class="line">cp ../replace_sealand_indian/user_nl_cice .</span><br><span class="line">cp ../replace_sealand_indian/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="F2000-三-无中南半岛实验-wgx服务器"><a href="#F2000-三-无中南半岛实验-wgx服务器" class="headerlink" title="F2000 (三) 无中南半岛实验 wgx服务器"></a>F2000 (三) 无中南半岛实验 wgx服务器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_replace_inch_220519 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_replace_inch_220519</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_blin.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_patc.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="F2000-四-无中南半岛及印度大陆实验-lym服务器"><a href="#F2000-四-无中南半岛及印度大陆实验-lym服务器" class="headerlink" title="F2000(四)无中南半岛及印度大陆实验 lym服务器"></a>F2000(四)无中南半岛及印度大陆实验 lym服务器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_replace_inch_indian2 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_replace_inch_indian2</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_replace_inch_indian/user_nl_cam .</span><br><span class="line">cp ../f2000_replace_inch_indian/user_nl_docn .</span><br><span class="line">cp ../f2000_replace_inch_indian/user_nl_cice .</span><br><span class="line">cp ../f2000_replace_inch_indian/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_blin.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_patc.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br></pre></td></tr></table></figure>





<h1 id="F2000-test-on-lym"><a href="#F2000-test-on-lym" class="headerlink" title="F2000 (test on lym)"></a>F2000 (test on lym)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test_220514 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test_220514</span><br><span class="line">./xmlchange NTASKS=-12 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup</span><br></pre></td></tr></table></figure>





<h1 id="高分辨率实验"><a href="#高分辨率实验" class="headerlink" title="高分辨率实验"></a>高分辨率实验</h1><p><strong>lym</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case fhist_highres4 --res f05_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd fhist_highres4</span><br><span class="line">./xmlchange NTASKS=-20</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h1 id="耦合实验"><a href="#耦合实验" class="headerlink" title="耦合实验"></a>耦合实验</h1><h2 id="test-B1850"><a href="#test-B1850" class="headerlink" title="test B1850"></a>test B1850</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_b1850 --res f09_g17 --compset B1850 --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd test_b1850</span><br><span class="line">./xmlchange NTASKS=-12 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br></pre></td></tr></table></figure>







<h1 id="CESM使用过程中的bug"><a href="#CESM使用过程中的bug" class="headerlink" title="CESM使用过程中的bug"></a>CESM使用过程中的bug</h1><p><strong>在continue run的过程中，无法成功提交，我猜想是mpi的问题</strong></p>
<p>后续在中南半岛实验中试一下，使用相同的mpi再continue run</p>
<h1 id="服务器使用过程中的记录"><a href="#服务器使用过程中的记录" class="headerlink" title="服务器使用过程中的记录"></a>服务器使用过程中的记录</h1><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><ol>
<li><p>注意！！如果使用oneapi环境的话，首先是sun(alias，配置第一步环境)，然后oneapi(alias, 设置编译器)</p>
<p>然后要source swh文件夹下的oneapi.sh 配置第二步环境才可以</p>
</li>
</ol>
<h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h2><p>module服务器自带的mpi才好用，自己编译的mpi就算使用中模式编译成功了，也跑不起来</p>
<h1 id="关于F2000运行中的输入问题"><a href="#关于F2000运行中的输入问题" class="headerlink" title="关于F2000运行中的输入问题"></a>关于F2000运行中的输入问题</h1><p>在我运行f2000的过程中报错，提示是输入文件的问题，文件名为</p>
<p>tracer_cnst_file &#x3D; &#x2F;public1&#x2F;home&#x2F;lym&#x2F;swh&#x2F;cesm2.1.3&#x2F;inputdata&#x2F;atm&#x2F;cam&#x2F;ozone&#x2F;tracer_cnst_CAM6chem_2000climo_3D_monthly_c171004.nc</p>
<p>诡异的是ncdump还能出来结果，但是文件大小只有51m，后来在另一个服务器wgx上面比对发现那里面的是三百多兆，把文件拿过来用就能正常运行了</p>
<h2 id="配置刘老师服务器"><a href="#配置刘老师服务器" class="headerlink" title="配置刘老师服务器"></a>配置刘老师服务器</h2><p>跑模式测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case lym_test3 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd lym_test3</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<p>这里总结一下登录刘老师服务器后的设置</p>
<p>登陆之后 ‘sun’,然后读取source文件就可以了</p>
<h1 id="CESM2实验日志"><a href="#CESM2实验日志" class="headerlink" title="CESM2实验日志"></a>CESM2实验日志</h1><h2 id="F2000系列实验"><a href="#F2000系列实验" class="headerlink" title="F2000系列实验"></a>F2000系列实验</h2><p><font color='red'>之前跑的FHIST实验我认为可能引入了无关变量，这里跑一组F2000的实验</font></p>
<h3 id="控制实验-1"><a href="#控制实验-1" class="headerlink" title="控制实验"></a>控制实验</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">平台 wgx </span><br><span class="line">时间 2022-5-13 </span><br><span class="line">案例名 f2000_control_220513</span><br><span class="line">已同步至本地</span><br><span class="line"></span><br><span class="line">问题记录：由于内存空间不够发现已断开，已提交重新跑(20)</span><br></pre></td></tr></table></figure>

<h3 id="无印度大陆实验"><a href="#无印度大陆实验" class="headerlink" title="无印度大陆实验"></a>无印度大陆实验</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">平台 lym</span><br><span class="line">时间 2022-5-15 </span><br><span class="line">案例名 change_indian_220515</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="无中南半岛实验"><a href="#无中南半岛实验" class="headerlink" title="无中南半岛实验"></a>无中南半岛实验</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">平台 wgx</span><br><span class="line">时间 2022-5-19</span><br><span class="line">案例名 f2000_replace_inch</span><br></pre></td></tr></table></figure>

<h2 id="无中南半岛及印度大陆实验"><a href="#无中南半岛及印度大陆实验" class="headerlink" title="无中南半岛及印度大陆实验"></a>无中南半岛及印度大陆实验</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">平台 lym</span><br><span class="line">时间 2022-5-20</span><br><span class="line">案例名 f2000_replace_inch_indian2</span><br></pre></td></tr></table></figure>





<h1 id="网上资源"><a href="#网上资源" class="headerlink" title="网上资源"></a>网上资源</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38607066/article/details/109445839?spm=1001.2014.3001.5502">(58条消息) CESM2 实验笔记_一株草的世界的博客-CSDN博客</a></p>
<h2 id="Controlling-starting-stopping-and-restarting-a-run"><a href="#Controlling-starting-stopping-and-restarting-a-run" class="headerlink" title="Controlling starting, stopping and restarting a run"></a>Controlling starting, stopping and restarting a run</h2><p>The case initialization type is set in <code>env_run.xml</code>. A CESM run can be initialized in one of three ways; startup, branch, or hybrid.</p>
<ul>
<li><p>startup</p>
<p>In a startup run (the default), all components are initialized using baseline states. These baseline states are set independently by each component and can include the use of restart files, initial files, external observed data files, or internal initialization (i.e., a “cold start”). In a startup run, the coupler sends the start date to the components at initialization. In addition, the coupler does not need an input data file. In a startup initialization, the ocean model does not start until the second ocean coupling (normally the second day).</p>
</li>
<li><p>branch</p>
<p>In a branch run, all components are initialized using a consistent set of restart files from a previous run (determined by the $<code>RUN_REFCASE</code> and $<code>RUN_REFDATE</code> variables in <code>env_run.xml</code>). The case name is generally changed for a branch run, although it does onot have to be. In a branch run, setting $<code>RUN_STARTDATE</code> is ignored because the model components obtain the start date from their restart datasets. Therefore, the start date cannot be changed for a branch run. This is the same mechanism that is used for performing a restart run (where $<code>CONTINUE_RUN</code> is set to TRUE in the <code>env_run.xml</code> file).Branch runs are typically used when sensitivity or parameter studies are required, or when settings for history file output streams need to be modified while still maintaining bit-for-bit reproducibility. Under this scenario, the new case is able to produce an exact bit-for-bit restart in the same manner as a continuation run <em>if</em> no source code or component namelist inputs are modified. All models use restart files to perform this type of run. $<code>RUN_REFCASE</code> and $<code>RUN_REFDATE</code> are required for branch runs.To set up a branch run, locate the restart tar file or restart directory for $<code>RUN_REFCASE</code> and $<code>RUN_REFDATE</code> from a previous run, then place those files in the $<code>RUNDIR</code> directory. See <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x2012.html">setting up a branch run</a> for an example.</p>
</li>
<li><p>hybrid</p>
<p>A hybrid run indicates that CESM is initialized more like a startup, but uses initialization datasets <em>from a previous case</em>. This is somewhat analogous to a branch run with relaxed restart constraints. A hybrid run allows users to bring together combinations of initial&#x2F;restart files from a previous case (specified by $<code>RUN_REFCASE</code>) at a given model output date (specified by $<code>RUN_REFDATE</code>). Unlike a branch run, the starting date of a hybrid run (specified by $<code>RUN_STARTDATE</code>) can be modified relative to the reference case. In a hybrid run, the model does not continue in a bit-for-bit fashion with respect to the reference case. The resulting climate, however, should be continuous provided that no model source code or namelists are changed in the hybrid run. In a hybrid initialization, the ocean model does not start until the second ocean coupling (normally the second day), and the coupler does a “cold start” without a restart file.</p>
</li>
</ul>
<p>The variable <code>$RUN_TYPE</code> determines the initialization type. This setting is only important for the initial run of a production run when the <code>$CONTINUE_RUN</code> variable is set to FALSE. After the initial run, the <code>$CONTINUE_RUN</code> variable is set to TRUE, and the model restarts exactly using input files in a case, date, and bit-for-bit continuous fashion. The variable <code>$RUN_TYPE</code> is the start date (in yyyy-mm-dd format) either a startup or hybrid run. If the run is targeted to be a hybrid or branch run, you must also specify values for <code>$RUN_REFCASE</code> and <code>$RUN_REFDATE</code>. All run startup variables are discussed in <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/env_run.html#run_start">run start control variables</a>.</p>
<p>Before a job is submitted to the batch system, you need to first check that the batch submission lines in <code>$CASE.run</code> are appropriate. These lines should be checked and modified accordingly for appropriate account numbers, time limits, and stdout&#x2F;stderr file names. You should then modify <code>env_run.xml</code> to determine the key run-time settings. See <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/env_run.html#run_stop">controlling run termination</a>, <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/env_run.html#run_rest">controlling run restarts</a>, and <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x1594.html#running_ccsm_restarts">performing model restarts </a>for more details. A brief note on restarting runs. When you first begin a branch, hybrid or startup run, CONTINUE_RUN must be set to FALSE. When you successfully run and get a restart file, you will need to change CONTINUE_RUN to TRUE for the remainder of your run. See <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x1594.html#running_ccsm_restarts">performing model restarts </a>for more details.</p>
<p>By default,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STOP_OPTION = ndays STOP_N = 5 STOP_DATE = -999 </span><br></pre></td></tr></table></figure>



<p>The default setting is only appropriate for initial testing. Before a longer run is started, update the stop times based on the case throughput and batch queue limits. For example, if the model runs 5 model years&#x2F;day, set <code>RESUBMIT</code>&#x3D;30, <code>STOP_OPTION</code>&#x3D; nyears, and <code>STOP_N</code>&#x3D; 5. The model will then run in five year increments, and stop after 30 submissions.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/CESM%E8%AF%95%E9%AA%8C%E8%AE%B0%E5%BD%95/" data-id="cli09rpt4000z5ov3ggg40ke9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CESM/" rel="tag">CESM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/04/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="article-date">
  <time datetime="2022-04-04T13:11:45.000Z" itemprop="datePublished">2022-04-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/04/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">常用命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#x27;color:red;background:white;font-size:20;font-family:楷体;&#x27;</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="挂载nas"><a href="#挂载nas" class="headerlink" title="挂载nas"></a>挂载nas</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o username=admin,password=19970130SWh //192.168.50.117/data1 data1/</span><br><span class="line">sudo mount -o username=admin,password=19970130SWh //192.168.50.117/cesm_output cesm_output/</span><br><span class="line">sudo mount -o username=admin,password=19970130SWh //192.168.50.117/qomo-data /home/sun/qomo-data/</span><br><span class="line">sudo mount -o username=admin,password=19970130SWh //192.168.50.117/mydown /home/sun/mydown/</span><br><span class="line">sudo mount -o username=admin,password=19970130SWh //192.168.50.117/model_output model_output/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看某一ip下可挂载目录</span></span><br><span class="line">showmount -e 192.168.3.106</span><br></pre></td></tr></table></figure>



<h1 id="挂了代理的ssh"><a href="#挂了代理的ssh" class="headerlink" title="挂了代理的ssh"></a>挂了代理的ssh</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -o ProxyCommand=&#x27;nc -x 127.0.0.1:1080 %h %p&#x27; lym@192.168.30.236</span><br></pre></td></tr></table></figure>



<h2 id="同步"><a href="#同步" class="headerlink" title="同步"></a>同步</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">rsync -v -p -a -t -r -z ./ 2019swh@172.16.0.72:/data5/2019swh/model_data/</span><br><span class="line">rsync -v -p -a -t -r -z 2019swh@172.16.0.72:/data5/2019swh/data/ /home/sun/qomo-data/</span><br><span class="line">rsync -v -p -a -t -r -z /home/sun/qomo-data/ 2019swh@172.16.0.72:/data5/2019swh/data/</span><br><span class="line">rsync -v -p -a -t -r -z /home/sun/mycode/ 2019swh@172.16.0.72:/data5/2019swh/mycode/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">同步山西服务器上的输出</span></span><br><span class="line">rsync -v -p -a -t -r -z wgx@192.168.30.236:/public1/home/wgx/swh/cesm2.1.3/archive/ /mnt/g/cesm_output/</span><br><span class="line"></span><br><span class="line">rsync -v -p -a -t -r -z wgx@192.168.30.236:/public1/home/wgx/swh/output/ spinup/</span><br><span class="line">rsync -v -p -a -t -r -z lym@192.168.30.236:/public1/home/lym/swh/output/ spinup/</span><br><span class="line">rsync -v -p -a -t -r -z lym@192.168.30.236:/public1/home/lym/swh/exp_output/ /root/model_output/b1850_exp/exp_output/</span><br><span class="line">rsync -v -p -a -t -r -z wgx@192.168.30.236:/public1/home/wgx/swh/exp_output/ /root/model_output/b1850_exp/exp_output/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加了代理的同步</span></span><br><span class="line">sudo rsync -v -p -a -t -r -z -e &#x27;ssh -p 22 -o &quot;ProxyCommand=nc -x 127.0.0.1:1080 %h %p&quot;&#x27;  lym@192.168.30.236:/public1/home/lym/swh/exp_output/ /home/sun/model_output/b1850_exp/exp_output/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mac 上的同步</span></span><br><span class="line">rsync -v -p -a -t -r -z wgx@192.168.30.236:/public1/home/wgx/swh/exp_output/ /Volumes/model_output/b1850_exp/exp_output/</span><br></pre></td></tr></table></figure>



<h2 id="wget下载所有文件"><a href="#wget下载所有文件" class="headerlink" title="wget下载所有文件"></a>wget下载所有文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c -r -np -k -L -p --no-check-certificate</span><br></pre></td></tr></table></figure>



<h2 id="去掉所有文件的可执行权限"><a href="#去掉所有文件的可执行权限" class="headerlink" title="去掉所有文件的可执行权限"></a>去掉所有文件的可执行权限</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -exec chmod -x &#123;&#125; \;</span><br></pre></td></tr></table></figure>



<h2 id="ipynb转python"><a href="#ipynb转python" class="headerlink" title="ipynb转python"></a>ipynb转python</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter nbconvert --to python my_file.ipynb</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/04/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-id="cli09rpu500485ov3f9k8ammh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux-command/" rel="tag">linux command</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/9/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/computer/">computer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/model/">model</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%85%E9%9A%9C/">故障</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CESM/" rel="tag">CESM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CESM2/" rel="tag">CESM2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Julia/" rel="tag">Julia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ML/" rel="tag">ML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PS/" rel="tag">PS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/" rel="tag">Reading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computer/" rel="tag">computer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data/" rel="tag">data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/history/" rel="tag">history</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/knowledge-base/" rel="tag">knowledge base</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-command/" rel="tag">linux command</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/" rel="tag">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/other/" rel="tag">other</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/read/" rel="tag">read</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reading-record/" rel="tag">reading record</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/settings/" rel="tag">settings</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/" rel="tag">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/website/" rel="tag">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/writing/" rel="tag">writing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%91%84%E5%BD%B1/" rel="tag">摄影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%85%E9%9A%9C/" rel="tag">故障</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E5%AD%A6/" rel="tag">文学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E8%AE%B0/" rel="tag">日记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%AE%B0/" rel="tag">杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B0%94%E8%B1%A1/" rel="tag">气象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%81/" rel="tag">码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%91%E6%99%AE%E7%9F%A5%E8%AF%86/" rel="tag">科普知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95/" rel="tag">科研记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">计算机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%B0%E5%BD%95/" rel="tag">记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E6%96%87%E7%8C%AE/" rel="tag">读文献</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%85%E6%80%9D/" rel="tag">雅思</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CESM/" style="font-size: 18px;">CESM</a> <a href="/tags/CESM2/" style="font-size: 14px;">CESM2</a> <a href="/tags/English/" style="font-size: 12px;">English</a> <a href="/tags/Julia/" style="font-size: 10px;">Julia</a> <a href="/tags/ML/" style="font-size: 10px;">ML</a> <a href="/tags/PS/" style="font-size: 10px;">PS</a> <a href="/tags/Reading/" style="font-size: 10px;">Reading</a> <a href="/tags/computer/" style="font-size: 16px;">computer</a> <a href="/tags/data/" style="font-size: 10px;">data</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/esp32/" style="font-size: 10px;">esp32</a> <a href="/tags/git/" style="font-size: 14px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/history/" style="font-size: 10px;">history</a> <a href="/tags/knowledge-base/" style="font-size: 10px;">knowledge base</a> <a href="/tags/linux/" style="font-size: 16px;">linux</a> <a href="/tags/linux-command/" style="font-size: 10px;">linux command</a> <a href="/tags/mac/" style="font-size: 14px;">mac</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/other/" style="font-size: 12px;">other</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/read/" style="font-size: 10px;">read</a> <a href="/tags/reading-record/" style="font-size: 10px;">reading record</a> <a href="/tags/settings/" style="font-size: 10px;">settings</a> <a href="/tags/statistics/" style="font-size: 12px;">statistics</a> <a href="/tags/website/" style="font-size: 10px;">website</a> <a href="/tags/writing/" style="font-size: 10px;">writing</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">学习笔记</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 14px;">摄影</a> <a href="/tags/%E6%95%85%E9%9A%9C/" style="font-size: 10px;">故障</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 10px;">文学</a> <a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 10px;">日记</a> <a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 10px;">杂记</a> <a href="/tags/%E6%B0%94%E8%B1%A1/" style="font-size: 10px;">气象</a> <a href="/tags/%E7%A0%81/" style="font-size: 10px;">码</a> <a href="/tags/%E7%A7%91%E6%99%AE%E7%9F%A5%E8%AF%86/" style="font-size: 10px;">科普知识</a> <a href="/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">科研记录</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" style="font-size: 12px;">计算机</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 12px;">记录</a> <a href="/tags/%E8%AF%BB%E6%96%87%E7%8C%AE/" style="font-size: 10px;">读文献</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 10px;">随笔</a> <a href="/tags/%E9%9B%85%E6%80%9D/" style="font-size: 10px;">雅思</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/06/07/%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BDERA5%E6%95%B0%E6%8D%AE%E5%90%8E%E6%8C%91%E5%87%BA%E5%BC%82%E5%B8%B8%E6%96%87%E4%BB%B6/">批量下载ERA5数据后挑出异常文件</a>
          </li>
        
          <li>
            <a href="/2023/05/25/%E4%BD%BF%E7%94%A8foobar2000%E5%AF%B9DSD%E8%BF%9B%E8%A1%8C%E8%A7%A3%E7%A0%81/">使用foobar2000对DSD进行解码</a>
          </li>
        
          <li>
            <a href="/2023/05/24/%E6%AC%A7%E6%B4%B2%E5%8F%B2/">欧洲史</a>
          </li>
        
          <li>
            <a href="/2023/05/24/%E5%88%A9%E7%94%A8cdo%E5%81%9A%E4%B8%80%E4%BA%9B%E8%AE%A1%E7%AE%97/">利用cdo做一些计算</a>
          </li>
        
          <li>
            <a href="/2023/05/23/README/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/9/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Linux知识" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/20/Linux%E7%9F%A5%E8%AF%86/" class="article-date">
  <time datetime="2022-04-20T02:20:02.000Z" itemprop="datePublished">2022-04-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/20/Linux%E7%9F%A5%E8%AF%86/">计算机知识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="给普通用户赋予root权限："><a href="#给普通用户赋予root权限：" class="headerlink" title="给普通用户赋予root权限："></a>给普通用户赋予root权限：</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/67882734">https://zhuanlan.zhihu.com/p/67882734</a></p>
<p>这里使用的是第三种方法，亲测可行</p>
<h1 id="在win的git-bash下面安装rsync并使用"><a href="#在win的git-bash下面安装rsync并使用" class="headerlink" title="在win的git bash下面安装rsync并使用"></a>在win的git bash下面安装rsync并使用</h1><p><a target="_blank" rel="noopener" href="https://prasaz.medium.com/add-rsync-to-windows-git-bash-f42736bae1b3">Add rsync to Windows Git Bash | by Prasanna Wijesiriwardana | Medium</a></p>
<h1 id="WGET下载网页下所有资源文件"><a href="#WGET下载网页下所有资源文件" class="headerlink" title="WGET下载网页下所有资源文件"></a>WGET下载网页下所有资源文件</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/marklove/p/14817043.html">wget命令下载页面里所有资源文件 - marklove - 博客园 (cnblogs.com)</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -F -B -c -r -np -k -L -p www.iro.umontreal.ca/~panneton/well/</span><br></pre></td></tr></table></figure>

<p>上面这个可以</p>
<h1 id="获取文件夹大小"><a href="#获取文件夹大小" class="headerlink" title="获取文件夹大小"></a>获取文件夹大小</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wukai_std/article/details/54946636">(63条消息) Python获取文件及文件夹大小_Always0nTheWay的博客-CSDN博客_python 计算文件夹大小</a></p>
<h1 id="使用心得："><a href="#使用心得：" class="headerlink" title="使用心得："></a>使用心得：</h1><h2 id="新服务器的ssh设置"><a href="#新服务器的ssh设置" class="headerlink" title="新服务器的ssh设置"></a>新服务器的ssh设置</h2><p>修改</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM:</span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">TO:</span><br><span class="line">PermitRootLogin yes</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart ssh</span><br><span class="line">sudo passwd</span><br></pre></td></tr></table></figure>

<p>注意要设置root的密码</p>
<p><font color=red>这里我只给新用户root权限但是不设置ssh里面允许root登陆的话，是登陆不上去的</font></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/20/Linux%E7%9F%A5%E8%AF%86/" data-id="cli09rpt600185ov37p2e2vd8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/computer/" rel="tag">computer</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-oneapi在移植CESM2中的应用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/15/oneapi%E5%9C%A8%E7%A7%BB%E6%A4%8DCESM2%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" class="article-date">
  <time datetime="2022-04-15T07:02:56.000Z" itemprop="datePublished">2022-04-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/model/">model</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/15/oneapi%E5%9C%A8%E7%A7%BB%E6%A4%8DCESM2%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/">oneapi在移植CESM2中的应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>OneAPI 在 CESM2 移植中的应用</strong></p>
<p>Intel 最近几年发布了oneapi，简单说来就是把编译器、MPI库、数学计算库等等软件都放在一个工具包中，使用起来十分的方便不需要再像之前那样装些乱七八糟的软件了。它官网自己都说了，<strong>say goodbye to proprietary Lock-In</strong></p>
<img src="https://z4a.net/images/2022/04/15/-2022-04-15-151743.png" alt="-2022-04-15-151743.png" style="zoom: 50%;" />

<p>更重要的是——免费！这里点赞Intel</p>
<p><font size=5>本文记录一下我使用oneapi工具包将CESM2移植到服务器上的流程</font></p>
<h1 id="关于oneapi的安装"><a href="#关于oneapi的安装" class="headerlink" title="关于oneapi的安装"></a>关于oneapi的安装</h1><p>首先是oneapi的官网：</p>
<p><a target="_blank" rel="noopener" href="https://www.intel.com/content/www/us/en/developer/tools/oneapi/overview.html#gs.ww0qvh">https://www.intel.com/content/www/us/en/developer/tools/oneapi/overview.html#gs.ww0qvh</a></p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2OQuAp"><img src="https://z4a.net/images/2022/04/15/1c13582f6f20b44ae.md.png" alt="1c13582f6f20b44ae.md.png"></a></p>
<p>点击红色箭头所指处进入工具包列表，红色框中所框出来的两个就是我们需要用到的安装包，分别安装两个工具包的流程都是一样的，这里仅以第二个HPC toolkit为例，注意这里建议先安装框中下面那个：</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2OQEsJ"><img src="https://z4a.net/images/2022/04/15/22cf048aaae7b1186.md.png" alt="22cf048aaae7b1186.md.png"></a></p>
<h2 id="安装HPC-Toolkit"><a href="#安装HPC-Toolkit" class="headerlink" title="安装HPC Toolkit"></a>安装HPC Toolkit</h2><p>点击上图所示的链接后，在跳出来的软件列表里选择HPC Toolkit那一栏下方有个Download，点击。在选项中依次选择图中的几个选项，最后一个选择offline</p>
<p><img src="https://z4a.net/images/2022/04/15/-2022-04-15-152920.png" alt="-2022-04-15-152920.png"></p>
<p>选择完后旁边会跳出来下载链接，点击下载就好了。</p>
<p>下载完成后把该文件上传到服务器，这个文件本身是一个sh文件，所以</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh 文件名.sh</span><br></pre></td></tr></table></figure>

<p>加载一段时间后会跳出来安装界面，可以选择全部安装or自定义安装，省事的话一直点下一步就可以了。安装完成后会自动退出。</p>
<p>以上是HPC Toolkit的安装过程，另一个安装包Base toolkit安装流程是一样的。<font color=#FF000>这里再次建议先安装HPC Toolkit再安装Base Toolkit</font></p>
<p>在这个两个包安装完成后，很多我们需要的软件就已经在我们服务器中了，但是我们由于没有把他们加到环境变量中系统是不知道我们安装的软件在哪里的。这里intel贴心地给我们生成了一个sh文件，source一下就把各种软件加进环境变量了。</p>
<p>该文件位置以及环境配置大致如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source $HOME_PATH/intel/oneapi/setvars.sh</span><br></pre></td></tr></table></figure>

<p>结果如图，意思就是环境都给你配置好了 此时可以输入 “icc -v”查看一下</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2OQMfj"><img src="https://z4a.net/images/2022/04/15/-2022-04-15-153836.png" alt="-2022-04-15-153836.png"></a></p>
<p><font size=5>下面小结一下我们安装了这两个包里分别都包含那些我们需要的软件</font></p>
<p>HPC Toolkit： 编译器（icc icpc ifort） 并行计算库（intelmpi）</p>
<p>Base Toolkit:  MKL数学库（BLAS和LAPACK)</p>
<h1 id="python的安装"><a href="#python的安装" class="headerlink" title="python的安装"></a>python的安装</h1><p>CESM2的编译安装是需要python3版本以上的，服务器默认的往往是python2，所以需要自己进行安装，这里我图省事直接用安装了conda然后创建了一个环境，关于conda和conda创建环境网上资料非常多，也很简单，这里不再赘述。</p>
<p>提个我认为需要注意的点：</p>
<ol>
<li>建议安装miniconda，是conda精简版，占用地方小。miniconda下载网址<a target="_blank" rel="noopener" href="https://docs.conda.io/en/latest/miniconda.html">Miniconda — Conda documentation</a> 选python3.7的linux版本进行下载就好，版本不需要太高。下载完上传到服务器里sh一下就自动安装了。</li>
</ol>
<h1 id="netcdf库的安装"><a href="#netcdf库的安装" class="headerlink" title="netcdf库的安装"></a>netcdf库的安装</h1><p>上述过程完成后，最后一个重要的准备工作就是安装netcdf库了，这里有些人还安装了pnetcdf库，是一个并行的的netcdf库但是我尝试没有成功，不装pnetcdf也是可以的。这里只介绍netcdf库安装。注意在这之前前两步都做完了以及把编译器的环境变量都给配置好。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">icc -v</span><br></pre></td></tr></table></figure>

<p>查看一下编译器是否加入环境路径</p>
<p>参考链接：</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/183752623">关于clm5.0移植的过程记录（初学者） - 知乎 (zhihu.com)</a></p>
<p>安装步骤：</p>
<ol>
<li><p>安装zlib库</p>
<p>下载地址 <a target="_blank" rel="noopener" href="http://www.zlib.net/zlib-1.2.11.tar.gz">http://www.zlib.net/zlib-1.2.11.tar.gz</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.zlib.net/zlib-1.2.11.tar.gz</span><br><span class="line">tar -zxvf ./zlib-1.2.11.tar.gz</span><br><span class="line">cd zlib-1.2.11.tar.gz</span><br><span class="line">export CC=icc</span><br><span class="line">export CXX=icpc</span><br><span class="line">export FC=ifort</span><br><span class="line">export f77=ifort</span><br><span class="line">./configure --prefix=/public1/home/lym/swh/app/intel/netcdf4</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>这里面export作用是把编译过程中的默认选项切换到intel的编译器，.&#x2F;configure –prefix选项的作用是指定你编译安装的路径，这里可根据自己喜好更改。</p>
</li>
<li><p>安装curl</p>
<p>这个软件服务器自带的，所以我没有安装，可以查看下服务器上是都有这个软件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --version</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装hdf5</p>
<p>下载官网：<a target="_blank" rel="noopener" href="https://www.hdfgroup.org/downloads/hdf5/source-code/">https://www.hdfgroup.org/downloads/hdf5/source-code/</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ./hdf5-1.12.0.tar.gz</span><br><span class="line">cd hdf5-1.12.0</span><br><span class="line">export CC=icc</span><br><span class="line">export CXX=icpc</span><br><span class="line">export FC=ifort</span><br><span class="line">export f77=ifort</span><br><span class="line">CFLAGS=&quot;-O3 -fPIC&quot; CPPFLAGS=&quot;-O3 -fPIC&quot; FFLAGS=&quot;-O3 -fPIC&quot; FFLAGS=&quot;-O3 -fPIC&quot; LIBS=&quot;-ldl&quot;</span><br><span class="line">./configure --prefix=/public1/home/lym/swh/app/intel/netcdf4 --with-zlib=/public1/home/lym/swh/app/intel/netcdf4 --enable-largefile --enable-static --enable-shared --enable-fortran --enable-hl</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>这里如果你没有重新登陆的话，四个export其实已经不需要了</p>
</li>
<li><p>安装netcdf库</p>
<p>下载：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-4.6.1.tar.gz</span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ./netcdf-4.6.1.tar.gz</span><br><span class="line">cd netcdf-4.6.1</span><br><span class="line">export CC=icc</span><br><span class="line">export CXX=icpc</span><br><span class="line">export FC=ifort</span><br><span class="line">export f77=ifort</span><br><span class="line">CFLAGS=&quot;-O3 -fPIC -I/public1/home/lym/swh/app/intel/netcdf4/include&quot; CPPFLAGS=&quot;-O3 -fPIC -I/public1/home/lym/swh/app/intel/netcdf4/include&quot; FFLAGS=&quot;-O3 -fPIC&quot; LDFLAGS=-L/public1/home/lym/swh/app/intel/netcdf4/lib ./configure --prefix=/public1/home/lym/swh/app/intel/netcdf4 --enable-static --enable-shared --enable-netcdf4 --enable-largefile --enable-large-file-tests --enable-diskless --enable-mmap --with-zlib=/public1/home/lym/swh/app/intel/netcdf4</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>注意上述操作中出现的路径仅供参考，实际情况是要根据你在前几步安装过程进行调整。安装成功后会蹦出来个欢迎界面，开头是congratulations，表示你成功了。</p>
</li>
<li><p>安装netcdf-c库</p>
<p>下载：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.unidata.ucar.edu/downloads/netcdf/ftp/netcdf-c-4.7.0.tar.gz	</span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ./netcdf-c-4.7.0.tar.gz</span><br><span class="line">cd netcdf-c-4.7.0</span><br><span class="line">export CC=icc</span><br><span class="line">export CXX=icpc</span><br><span class="line">export FC=ifort</span><br><span class="line">export f77=ifort</span><br><span class="line">CPPFLAGS=-I/public1/home/lym/swh/app/intel/netcdf4/include LDFLAGS=-L/public1/home/lym/swh/app/intel/netcdf4/lib ./configure --prefix=/public1/home/lym/swh/app/intel/netcdf4</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装netcdf-fortran库</p>
<p>下载：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.unidata.ucar.edu/downloads/netcdf/ftp/netcdf-fortran-4.4.5.tar.gz</span><br></pre></td></tr></table></figure>

<p>安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf ./netcdf-fortran-4.4.5.tar.gz</span><br><span class="line">cd netcdf-fortran-4.4.5</span><br><span class="line">export LD_LIBRARY_PATH=/public1/home/lym/swh/app/intel/netcdf4/lib:$LD_LIBRARY_PATH</span><br><span class="line">export CC=icc</span><br><span class="line">export CXX=icpc</span><br><span class="line">export FC=ifort</span><br><span class="line">export f77=ifort</span><br><span class="line">CFLAGS=&quot;-O3 -fPIC -I/public1/home/lym/swh/app/intel/netcdf4/include&quot; FFLAGS=&quot;-O3 -fPIC&quot; FCFLAGS=&quot;-O3 -fPIC&quot; LDFLAGS=-L/public1/home/lym/swh/app/intel/netcdf4/lib LIBS=&quot;-lnetcdf -lhdf5_hl -lhdf5 -lz -lm -ldl&quot; ./configure --prefix=/public1/home/lym/swh/app/intel/netcdf4 --enable-static --enable-shared --enable-logging --enable-largefile --enable-large-file-tests --with-zlib=/public1/home/lym/swh/app/intel/netcdf4</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>至此，netcdf库基本算安装完成</strong></p>
<p>将netcdf库加入环境变量，自己做一个sh文件，在其中对netcdf的环境变量进行设置，然后登录上服务器后source下该文件即可</p>
<p>我的设置如图：</p>
<p><img src="https://z4a.net/images/2022/04/15/-2022-04-15-162254.png" alt="-2022-04-15-162254.png"></p>
<p>source完检查一下是否加入到环境变量，以及查看上述软件是否都被正确安装，使用命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc-config --all</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2OQbwE"><img src="https://z4a.net/images/2022/04/15/-2022-04-15-162527.md.png" alt="-2022-04-15-162527.md.png"></a></p>
<h1 id="BLAS与LAPACK的安装"><a href="#BLAS与LAPACK的安装" class="headerlink" title="BLAS与LAPACK的安装"></a>BLAS与LAPACK的安装</h1><p>BLAS与LAPACK是两个数学计算库，CESM运行需要用到它们，前面安装oneapi的的时候实际已经安装上他们俩，在mkl库里面。但是在应用的过程中我发现在编译CESM2的过程中调用LAPACK库的时候会出现bug，最后还是重新安装了。这里只安装LAPACK库，BLAS不用安装，后续直接调用oneapi里面的库即可。</p>
<p>安装过程参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/baiyang3/article/details/52790793">linux下安装blas和lapack_baiyang3的博客-CSDN博客_linux 安装lapack</a></p>
<h2 id="下载lapack后解压"><a href="#下载lapack后解压" class="headerlink" title="下载lapack后解压"></a>下载lapack后解压</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf lapack-3.10.0.tgz</span><br><span class="line">cd lapack-3.10.0/INSTALL/</span><br></pre></td></tr></table></figure>

<p>然后根据平台的特点，将INSTALL目录下对应的make.inc.XXX复制一份到 lapack-3.10.0目录下，并命名为make.inc, 这里我复制的是INSTALL&#x2F;make.inc.ifot，因为我这里用的是intel编译器。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp make.inc.ifort ../make.inc</span><br><span class="line">cd ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>这里要注意版本问题，lapack好像从3.5版本之后不需要先安装blas再拷贝一些库进去了，直接在lapack目录里make就行，所以这里建议使用新版本的lapack，亲测使用3.4.2版本会报错。</p>
<p>make完成之后：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd LAPACKE</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>编译不报错的话，LAPACK库到此就完成了，记住该目录的路径，后面移植的时候要用</p>
<h1 id="CESM2-1-3的移植"><a href="#CESM2-1-3的移植" class="headerlink" title="CESM2.1.3的移植"></a>CESM2.1.3的移植</h1><p>以上是几个比较关键的库，除此之外还需要SVN git等等工具，一般服务器都自带，不自带的话安装也比较简单网上很多教程。这里就不展开了，接下来说CESM2的移植。此处版本为cesm2.1.3</p>
<h1 id="源代码的下载"><a href="#源代码的下载" class="headerlink" title="源代码的下载"></a>源代码的下载</h1><p>官网教程</p>
<p><a target="_blank" rel="noopener" href="https://escomp.github.io/CESM/versions/cesm2.1/html/downloading_cesm.html">Downloading CESM2 (CESM2.1) — CESM CESM2.1 documentation (escomp.github.io)</a></p>
<p>在这一步：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./manage_externals/checkout_externals</span><br></pre></td></tr></table></figure>

<p>执行后会自动开始下载CESM2所需要的各个模块的组件，但是由于一些众所周知的原因，我们不能畅通地连接外网，为解决这个问题可以使用下载完组件后打包安装的压缩包，解压到自己目录即可。</p>
<p>这里提供百度云链接，版本为cesm2.1.3</p>
<p>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1GBghBIaF-8bey-ND7aK5gQ">https://pan.baidu.com/s/1GBghBIaF-8bey-ND7aK5gQ</a><br>提取码：m7m7</p>
<p>解压好后可以</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./manage_externals/checkout_externals -S</span><br></pre></td></tr></table></figure>

<p>检查一下各个组件有无问题，如果没有问题结果应该是这样的：</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2mj3WH"><img src="https://z4a.net/images/2022/05/12/-2022-05-12-105643.md.png" alt="-2022-05-12-105643.md.png"></a></p>
<h1 id="config的设置"><a href="#config的设置" class="headerlink" title="config的设置"></a>config的设置</h1><p>装好CESM2.1.3之后，接下来就要处理移植的配置文件</p>
<p>首先是在home目录下建立一个.cime目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.cime</span><br></pre></td></tr></table></figure>

<p>这个目录下面将要包含三个文件：</p>
<p>config_batch.xml           <strong>该文件包含提交到节点运算方面的一些配置</strong></p>
<p>config_compilers.xml   <strong>该文件包含编译器、mpi库、以及其他一些库的配置</strong></p>
<p>config_machines.xml   <strong>该文件包含一些路径等等的配置</strong></p>
<p><font face="微软雅黑">这三个文件官方是有提供模板的，位置在$HOME&#x2F;cesm2.1.3&#x2F;cime&#x2F;config&#x2F;cesm&#x2F;machines 下面，打开xml的文件话会看到里面已经提供了多套配置，以config_compilers.xml为例，用<strong>gcc</strong> or <strong>intel compiler</strong> or <strong>PGI</strong>的话,不同的编译器官网给你提供了现成的模板，选择你需要的那套，其余的就都可以删了，这里建议先把上述三个文件拷贝到~&#x2F;.cime目录下然后进行修改</font></p>
<p><font color='red'>下面我贴出自己的config文件，并对我认为重要的地方进行标注，仅供参考根据自己平台和编译器的不同要自己做修改</font></p>
<p><font size=12>config_machines</font></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">config_machines</span> <span class="attr">version</span>=<span class="string">&quot;2.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">machine</span> <span class="attr">MACH</span>=<span class="string">&quot;oneapi2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">DESC</span>&gt;</span>sunweihao<span class="tag">&lt;/<span class="name">DESC</span>&gt;</span>                                 </span><br><span class="line">  <span class="tag">&lt;<span class="name">NODENAME_REGEX</span>&gt;</span>login01<span class="tag">&lt;/<span class="name">NODENAME_REGEX</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">OS</span>&gt;</span>LINUX<span class="tag">&lt;/<span class="name">OS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">PROXY</span>&gt;</span>sunweihao<span class="tag">&lt;/<span class="name">PROXY</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">COMPILERS</span>&gt;</span>intel<span class="tag">&lt;/<span class="name">COMPILERS</span>&gt;</span>      # 标出所使用的编译器，这里用的是intel</span><br><span class="line">  <span class="tag">&lt;<span class="name">MPILIBS</span>&gt;</span>intelmpi<span class="tag">&lt;/<span class="name">MPILIBS</span>&gt;</span>       # 标出所使用的mpi，这里用的intelmpi</span><br><span class="line">  <span class="tag">&lt;<span class="name">PROJECT</span>&gt;</span>none<span class="tag">&lt;/<span class="name">PROJECT</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">CIME_OUTPUT_ROOT</span>&gt;</span>/public1/home/wgx/swh/cesm2.1.3/scratch<span class="tag">&lt;/<span class="name">CIME_OUTPUT_ROOT</span>&gt;</span>  # 这个路径是跑case时的运行路径</span><br><span class="line">  <span class="tag">&lt;<span class="name">DIN_LOC_ROOT</span>&gt;</span>/public1/home/wgx/swh/cesm2.1.3/inputdata<span class="tag">&lt;/<span class="name">DIN_LOC_ROOT</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">DIN_LOC_ROOT_CLMFORC</span>&gt;</span>/public1/home/wgx/swh/cesm2.1.3/inputdata/atm/datm7<span class="tag">&lt;/<span class="name">DIN_LOC_ROOT_CLMFORC</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">DOUT_S_ROOT</span>&gt;</span>/public1/home/wgx/swh/cesm2.1.3/archive/$CASE<span class="tag">&lt;/<span class="name">DOUT_S_ROOT</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BASELINE_ROOT</span>&gt;</span>/public1/home/wgx/swh/cesm2.1.3/cesm_baselines<span class="tag">&lt;/<span class="name">BASELINE_ROOT</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">CCSM_CPRNC</span>&gt;</span>/public1/home/wgx/swh/cesm2.1.3/cime/tools/cprnc<span class="tag">&lt;/<span class="name">CCSM_CPRNC</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">GMAKE</span>&gt;</span>make<span class="tag">&lt;/<span class="name">GMAKE</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">GMAKE_J</span>&gt;</span>24<span class="tag">&lt;/<span class="name">GMAKE_J</span>&gt;</span>               # make时所使用的核数</span><br><span class="line">  <span class="tag">&lt;<span class="name">BATCH_SYSTEM</span>&gt;</span>slurm<span class="tag">&lt;/<span class="name">BATCH_SYSTEM</span>&gt;</span>  # 这里要给出你所在服务器上使用的作业管理系统</span><br><span class="line">  <span class="tag">&lt;<span class="name">SUPPORTED_BY</span>&gt;</span>swh<span class="tag">&lt;/<span class="name">SUPPORTED_BY</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MAX_TASKS_PER_NODE</span>&gt;</span>28<span class="tag">&lt;/<span class="name">MAX_TASKS_PER_NODE</span>&gt;</span>    # 这里是每个结点的最大核数，会因为服务器不同而不同，要事先查好</span><br><span class="line">  <span class="tag">&lt;<span class="name">MAX_MPITASKS_PER_NODE</span>&gt;</span>28<span class="tag">&lt;/<span class="name">MAX_MPITASKS_PER_NODE</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">PROJECT_REQUIRED</span>&gt;</span>FALSE<span class="tag">&lt;/<span class="name">PROJECT_REQUIRED</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mpirun</span> <span class="attr">mpilib</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">executable</span>&gt;</span>mpirun<span class="tag">&lt;/<span class="name">executable</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arguments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;ntasks&quot;</span>&gt;</span> -np &#123;&#123; total_tasks &#125;&#125; <span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">arguments</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mpirun</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module_system</span> <span class="attr">type</span>=<span class="string">&quot;none&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">module_system</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">environment_variables</span>&gt;</span>       #前面安装的一些软件库的路径</span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;OMP_STACKSIZE&quot;</span>&gt;</span>256M<span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;PATH&quot;</span>&gt;</span>$ENV&#123;HOME&#125;/bin:$ENV&#123;PATH&#125;<span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;NETCDF_PATH&quot;</span>&gt;</span>/public1/home/wgx/swh/app/oneapi/netcdf4<span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;HDF5_PATH&quot;</span>&gt;</span>/public1/home/wgx/swh/app/oneapi/netcdf4<span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;ZLIB_PATH&quot;</span>&gt;</span>/public1/home/wgx/swh/app/oneapi/netcdf4<span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">env</span> <span class="attr">name</span>=<span class="string">&quot;LAPACK_PATH&quot;</span>&gt;</span>/public1/home/wgx/intel/oneapi/mkl/2021.3.0<span class="tag">&lt;/<span class="name">env</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">environment_variables</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resource_limits</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span> <span class="attr">name</span>=<span class="string">&quot;RLIMIT_STACK&quot;</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resource_limits</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">machine</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config_machines</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><font size=12>config_compliers</font></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config_compilers</span> <span class="attr">version</span>=<span class="string">&quot;2.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">compiler</span> <span class="attr">COMPILER</span>=<span class="string">&quot;intel&quot;</span> <span class="attr">MACH</span>=<span class="string">&quot;oneapi2&quot;</span>&gt;</span> # 这里给出使用intel编译器的时候的配置</span><br><span class="line">  <span class="tag">&lt;<span class="name">CFLAGS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span>  -qno-opt-dynamic-align -fp-model precise -std=gnu99 <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">compile_threaded</span>=<span class="string">&quot;true&quot;</span>&gt;</span> -qopenmp <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">DEBUG</span>=<span class="string">&quot;FALSE&quot;</span>&gt;</span> -O2 -debug minimal <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">DEBUG</span>=<span class="string">&quot;TRUE&quot;</span>&gt;</span> -O0 -g <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">CFLAGS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">CPPDEFS</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- http://software.intel.com/en-us/articles/intel-composer-xe/ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span>&gt;</span> -DFORTRANUNDERSCORE -DCPRINTEL<span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">CPPDEFS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">CXX_LDFLAGS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span> -cxxlib <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">CXX_LDFLAGS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">CXX_LINKER</span>&gt;</span>FORTRAN<span class="tag">&lt;/<span class="name">CXX_LINKER</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FC_AUTO_R8</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span> -r8 <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">FC_AUTO_R8</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FFLAGS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span> -qno-opt-dynamic-align  -convert big_endian -assume byterecl -ftz -traceback -assume realloc_lhs -fp-model source  <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">compile_threaded</span>=<span class="string">&quot;true&quot;</span>&gt;</span> -qopenmp <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">DEBUG</span>=<span class="string">&quot;TRUE&quot;</span>&gt;</span> -O0 -g -check uninit -check bounds -check pointers -fpe0 -check noarg_temp_created <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">DEBUG</span>=<span class="string">&quot;FALSE&quot;</span>&gt;</span> -O2 -debug minimal <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">FFLAGS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FFLAGS_NOOPT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span> -O0 <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">compile_threaded</span>=<span class="string">&quot;true&quot;</span>&gt;</span> -qopenmp <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">FFLAGS_NOOPT</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FIXEDFLAGS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span> -fixed -132 <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">FIXEDFLAGS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FREEFLAGS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base</span>&gt;</span> -free <span class="tag">&lt;/<span class="name">base</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">FREEFLAGS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">LDFLAGS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span> <span class="attr">compile_threaded</span>=<span class="string">&quot;true&quot;</span>&gt;</span> -qopenmp <span class="tag">&lt;/<span class="name">append</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">LDFLAGS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MPICC</span>&gt;</span> mpiicc  <span class="tag">&lt;/<span class="name">MPICC</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MPICXX</span>&gt;</span> mpicpc <span class="tag">&lt;/<span class="name">MPICXX</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MPIFC</span>&gt;</span> mpiifort <span class="tag">&lt;/<span class="name">MPIFC</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SCC</span>&gt;</span> icc <span class="tag">&lt;/<span class="name">SCC</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SCXX</span>&gt;</span> icpc <span class="tag">&lt;/<span class="name">SCXX</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SFC</span>&gt;</span> ifort <span class="tag">&lt;/<span class="name">SFC</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MPI_PATH</span>&gt;</span>/public1/home/wgx/intel/oneapi/mpi/2021.5.1<span class="tag">&lt;/<span class="name">MPI_PATH</span>&gt;</span>  # 此处路径要对应oneapi里面mpi库的路径</span><br><span class="line">  <span class="tag">&lt;<span class="name">SLIBS</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span>&gt;</span> -L/public1/home/wgx/swh/app/oneapi/netcdf4/lib -lnetcdff -lnetcdf <span class="tag">&lt;/<span class="name">append</span>&gt;</span> # 标出netcdf库路径，跟上面软件安装路径一致</span><br><span class="line">    <span class="tag">&lt;<span class="name">append</span>&gt;</span> -L/public1/home/wgx/intel/oneapi/mkl/2021.3.0 -lblas -L/public1/home/wgx/swh/app/oneapi/lapack-3.10.0 -llapack <span class="tag">&lt;/<span class="name">append</span>&gt;</span>            # blas和lapace的路径，blas只需要找到oneapi的里面mkl库路径即可，lapack前面我们有安装，这里是安装之后的路径</span><br><span class="line">  <span class="tag">&lt;/<span class="name">SLIBS</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SUPPORTS_CXX</span>&gt;</span>TRUE<span class="tag">&lt;/<span class="name">SUPPORTS_CXX</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">compiler</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config_compilers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><font size=12>config_batch</font></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config_batch</span> <span class="attr">version</span>=<span class="string">&quot;2.1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">batch_system</span> <span class="attr">type</span>=<span class="string">&quot;slurm&quot;</span> <span class="attr">MACH</span>=<span class="string">&quot;oneapi2&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">batch_submit</span>&gt;</span>sbatch<span class="tag">&lt;/<span class="name">batch_submit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">submit_args</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">flag</span>=<span class="string">&quot;--time&quot;</span> <span class="attr">name</span>=<span class="string">&quot;$JOB_WALLCLOCK_TIME&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">flag</span>=<span class="string">&quot;-p&quot;</span> <span class="attr">name</span>=<span class="string">&quot;$JOB_QUEUE&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">submit_args</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">queues</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">queue</span> <span class="attr">walltimemax</span>=<span class="string">&quot;12:00:00&quot;</span> <span class="attr">nodemin</span>=<span class="string">&quot;1&quot;</span> <span class="attr">nodemax</span>=<span class="string">&quot;2712&quot;</span>&gt;</span>i01203share<span class="tag">&lt;/<span class="name">queue</span>&gt;</span> #i01203share是服务器能提交作业的队列名</span><br><span class="line">  <span class="tag">&lt;/<span class="name">queues</span>&gt;</span>                                        # walltimemax时作业的时间最大限制，注意有些服务器是限制作业时长的</span><br><span class="line"><span class="tag">&lt;/<span class="name">batch_system</span>&gt;</span>                                    # 这个时候我们就需要限制单次最大时长，然后多次提交</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">config_batch</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>以上三个文件设置好之后就可以去测试移植成果了~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/15/oneapi%E5%9C%A8%E7%A7%BB%E6%A4%8DCESM2%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/" data-id="cli09rptp002m5ov34uethuj6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CESM/" rel="tag">CESM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python-learning" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/python-learning/" class="article-date">
  <time datetime="2022-04-05T02:39:02.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/computer/">computer</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/python-learning/">python learning</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python知识码"><a href="#python知识码" class="headerlink" title="python知识码"></a>python知识码</h1><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/509211/understanding-slice-notation">python的slice函数</a></p>
<hr>
<p>关于波浪线 ~</p>
<p>它的作用起到了一个补码的作用</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lanchunhui/article/details/51746477">波浪线</a></p>
<hr>
<h3 id="lambda函数"><a href="#lambda函数" class="headerlink" title="lambda函数"></a>lambda函数</h3><p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/1016959663602400/1017451447842528">匿名函数</a></p>
<hr>
<h3 id="关于一个插值实现的记录"><a href="#关于一个插值实现的记录" class="headerlink" title="关于一个插值实现的记录"></a>关于一个插值实现的记录</h3><p>对于零散的nan值怎么进行插值处理，这里的做法是把所有非nan的数据抽出来组成没有缺测的数组，然后再插入到原来的网格中，妙</p>
<hr>
<p>python保存为PDF文件</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/helloHKTK/p/12483478.html">Python中的绘图(论文中保存成PDF不失真) - helloHKTK - 博客园 (cnblogs.com)</a></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><hr>
<h3 id="关于隐循环"><a href="#关于隐循环" class="headerlink" title="关于隐循环"></a>关于隐循环</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file_prect    =  [x <span class="keyword">for</span> x <span class="keyword">in</span> file1 <span class="keyword">if</span> (<span class="string">&quot;PRECT-&quot;</span> <span class="keyword">in</span> x)]</span><br></pre></td></tr></table></figure>

<p>一个例子，假如我要挑选在某个列表里满足条件的文件</p>
<h2 id="cartopy一个教程"><a href="#cartopy一个教程" class="headerlink" title="cartopy一个教程"></a>cartopy一个教程</h2><p><a target="_blank" rel="noopener" href="https://zhajiman.github.io/post/cartopy_introduction/">https://zhajiman.github.io/post/cartopy_introduction/</a></p>
<h2 id="还有这种赋值方法"><a href="#还有这种赋值方法" class="headerlink" title="还有这种赋值方法"></a>还有这种赋值方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lonmin,lonmax,latmin,latmax = <span class="number">30</span>,<span class="number">120</span>,-<span class="number">10</span>,<span class="number">30</span></span><br></pre></td></tr></table></figure>



<h2 id="python在字符串前面加u"><a href="#python在字符串前面加u" class="headerlink" title="python在字符串前面加u"></a>python在字符串前面加u</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/CherryChanccc/article/details/82428220">python字符串前面加u_Honghong的博客-CSDN博客_python字符串前加u</a></p>
<h2 id="打出上下标的方法"><a href="#打出上下标的方法" class="headerlink" title="打出上下标的方法"></a>打出上下标的方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x_data, x_data**<span class="number">3</span>, label = <span class="string">&#x27;$x^3$&#x27;</span>)</span><br><span class="line">n=<span class="string">&quot;x\u00b2&quot;</span></span><br></pre></td></tr></table></figure>



<h2 id="python-格式化输出"><a href="#python-格式化输出" class="headerlink" title="python 格式化输出"></a>python 格式化输出</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43213268/article/details/88932999">python中几种格式化输出 的用法_下雨天再见的博客-CSDN博客</a></p>
<hr>
<h1 id="python中的科学计算"><a href="#python中的科学计算" class="headerlink" title="python中的科学计算"></a>python中的科学计算</h1><h3 id="关于使用xarray来截取时间的操作"><a href="#关于使用xarray来截取时间的操作" class="headerlink" title="关于使用xarray来截取时间的操作"></a>关于使用xarray来截取时间的操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">file  =  xr.open_dataset(path+<span class="string">&quot;HadISST_sst.nc&quot;</span>)</span><br><span class="line">start_time = <span class="string">&#x27;1980-01-01&#x27;</span></span><br><span class="line">end_time   = <span class="string">&#x27;2019-12-31&#x27;</span></span><br><span class="line">time_slice = <span class="built_in">slice</span>(start_time, end_time)</span><br><span class="line">sst   =  file[<span class="string">&quot;sst&quot;</span>].sel(time=time_slice)</span><br></pre></td></tr></table></figure>

<p>这里start和end_time中和dataset里面的时间并不对应，但是却可以把分割出我想要的时间段</p>
<p>dataset里面的时间长这样：</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20210831170356576.png" alt="image-20210831170356576.png"></p>
<p>总之这样是可以的，很神奇，嗯</p>
<hr>
<p>使用xarray来对dimension进行查看</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20210906164823478.png" alt="image-20210906164823478.png"></p>
<p>可以使用f2.nj来看，也是直接跟名字就好，但是基本上这类不过是自然数的累加而已</p>
<h2 id="numpy-interp"><a href="#numpy-interp" class="headerlink" title="numpy.interp"></a>numpy.interp</h2><p><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.interp.html#numpy-interp">参考网站</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/6518811/interpolate-nan-values-in-a-numpy-array">Interpolate NaN values in a numpy array</a></p>
<h2 id="numpy-interp-使用中的注意事项"><a href="#numpy-interp-使用中的注意事项" class="headerlink" title="numpy.interp 使用中的注意事项"></a>numpy.interp 使用中的注意事项</h2><p>如果是插值到p坐标系上的话，由于p是递减的，而这个函数要求坐标轴的值是递增的，因此需要倒过来插值完再倒回去</p>
<h2 id="numpy中的引用问题"><a href="#numpy中的引用问题" class="headerlink" title="numpy中的引用问题"></a>numpy中的引用问题</h2><p>有时候多维数组，但我只想固定某一维度，其余的不想输了，要不要把所有的：,都加上</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a.shape</span><br><span class="line">&gt; (<span class="number">12</span>, <span class="number">37</span>, <span class="number">192</span>, <span class="number">288</span>)</span><br><span class="line">a[<span class="number">11</span>].shape</span><br><span class="line">&gt; (<span class="number">37</span>, <span class="number">192</span>, <span class="number">288</span>)</span><br><span class="line">a[:,<span class="number">11</span>].shape</span><br><span class="line">&gt; (<span class="number">12</span>, <span class="number">192</span>, <span class="number">288</span>)</span><br><span class="line">a[<span class="number">10</span>,:].shape</span><br><span class="line">&gt; (<span class="number">37</span>, <span class="number">192</span>, <span class="number">288</span>)</span><br></pre></td></tr></table></figure>

<p>以上为一些例子</p>
<h2 id="跳点取值"><a href="#跳点取值" class="headerlink" title="跳点取值"></a>跳点取值</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">u.lon.data[::<span class="number">20</span>]</span><br></pre></td></tr></table></figure>

<p>结果是每隔20个取一个</p>
<h2 id="取消科学记数法"><a href="#取消科学记数法" class="headerlink" title="取消科学记数法"></a>取消科学记数法</h2><p>np.set_printoptions(suppress&#x3D;True)</p>
<h2 id="矩阵内只对符合条件的数据进行运算"><a href="#矩阵内只对符合条件的数据进行运算" class="headerlink" title="矩阵内只对符合条件的数据进行运算"></a>矩阵内只对符合条件的数据进行运算</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">&gt;&gt;arr = np.random.rand(<span class="number">5</span>,<span class="number">5</span>) <span class="comment"># 5x5的随机数组</span></span><br><span class="line">&gt;&gt;arr</span><br><span class="line">array([[ <span class="number">0.36401504</span>,  <span class="number">0.87729325</span>,  <span class="number">0.53453396</span>,  <span class="number">0.5031851</span> ,  <span class="number">0.90744627</span>],</span><br><span class="line">       [ <span class="number">0.44607108</span>,  <span class="number">0.22673265</span>,  <span class="number">0.77539262</span>,  <span class="number">0.84064101</span>,  <span class="number">0.41774629</span>],</span><br><span class="line">       [ <span class="number">0.91686641</span>,  <span class="number">0.71480639</span>,  <span class="number">0.09617148</span>,  <span class="number">0.41535823</span>,  <span class="number">0.4175782</span> ],</span><br><span class="line">       [ <span class="number">0.25753864</span>,  <span class="number">0.73196495</span>,  <span class="number">0.43557823</span>,  <span class="number">0.97497112</span>,  <span class="number">0.54451645</span>],</span><br><span class="line">       [ <span class="number">0.58167148</span>,  <span class="number">0.50382906</span>,  <span class="number">0.88490307</span>,  <span class="number">0.77238085</span>,  <span class="number">0.17427672</span>]])</span><br><span class="line">&gt;&gt;mask = arr&gt;<span class="number">0.5</span> <span class="comment"># 选取数组中元素大于0.5的元素的bool数组</span></span><br><span class="line">&gt;&gt;mask</span><br><span class="line">array([[<span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [<span class="literal">False</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">False</span>],</span><br><span class="line">       [<span class="literal">False</span>,  <span class="literal">True</span>, <span class="literal">False</span>,  <span class="literal">True</span>,  <span class="literal">True</span>],</span><br><span class="line">       [ <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>,  <span class="literal">True</span>, <span class="literal">False</span>]], dtype=<span class="built_in">bool</span>)</span><br><span class="line">&gt;&gt;arr[mask] = <span class="number">0</span> <span class="comment"># 将数组中大于0.5的值设为0</span></span><br><span class="line">&gt;&gt;arr</span><br><span class="line">array([[ <span class="number">0.36401504</span>,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ],</span><br><span class="line">       [ <span class="number">0.44607108</span>,  <span class="number">0.22673265</span>,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.41774629</span>],</span><br><span class="line">       [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.09617148</span>,  <span class="number">0.41535823</span>,  <span class="number">0.4175782</span> ],</span><br><span class="line">       [ <span class="number">0.25753864</span>,  <span class="number">0.</span>        ,  <span class="number">0.43557823</span>,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ],</span><br><span class="line">       [ <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.</span>        ,  <span class="number">0.17427672</span>]])</span><br></pre></td></tr></table></figure>



<h2 id="模式后处理的插值函数"><a href="#模式后处理的插值函数" class="headerlink" title="模式后处理的插值函数"></a>模式后处理的插值函数</h2><p>注意虽然没有缺测，但是位势高度会出现负值，这点需要特别注意</p>
<h2 id="python滤波平滑教程"><a href="#python滤波平滑教程" class="headerlink" title="python滤波平滑教程"></a>python滤波平滑教程</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42782150/article/details/107176500">https://blog.csdn.net/weixin_42782150/article/details/107176500</a></p>
<p>滑动平均：</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13728392/moving-average-or-running-mean">https://stackoverflow.com/questions/13728392/moving-average-or-running-mean</a></p>
<h2 id="python中对包含nan值的函数"><a href="#python中对包含nan值的函数" class="headerlink" title="python中对包含nan值的函数"></a>python中对包含nan值的函数</h2><p><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.nanmean.html">https://numpy.org/doc/stable/reference/generated/numpy.nanmean.html</a></p>
<h2 id="计数numpy中符合条件元素的个数"><a href="#计数numpy中符合条件元素的个数" class="headerlink" title="计数numpy中符合条件元素的个数"></a>计数numpy中符合条件元素的个数</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_18351157/article/details/107448247">https://blog.csdn.net/qq_18351157/article/details/107448247</a></p>
<p>思想是先生成一个bool的数组再用np.count_nonzero()</p>
<h2 id="isel的用法"><a href="#isel的用法" class="headerlink" title="isel的用法"></a>isel的用法</h2><p>xarray中isel的用法是针对位置来进行选择的，这里给出一个例子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">april  =  [x*<span class="number">12</span>+<span class="number">3</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">120</span>)]</span><br><span class="line">f  =  xr.open_dataset(<span class="string">&quot;/home/sun/data/HadISST_sst.nc&quot;</span>).isel(time=april)</span><br></pre></td></tr></table></figure>

<p>如是便可以把每年的四月挑出来了</p>
<h2 id="并行计算学习"><a href="#并行计算学习" class="headerlink" title="并行计算学习"></a>并行计算学习</h2><p>资料：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40481076/article/details/101594705">(48条消息) python多线程详解（超详细）_笨小孩哈哈的博客-CSDN博客_python 多线程</a></p>
<p><a target="_blank" rel="noopener" href="https://realpython.com/intro-to-python-threading/">https://realpython.com/intro-to-python-threading/</a></p>
<h1 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h1><h2 id="plot绘制2d图样式"><a href="#plot绘制2d图样式" class="headerlink" title="plot绘制2d图样式"></a>plot绘制2d图样式</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot">matplotlib.pyplot.plot — Matplotlib 3.4.3 documentation</a></p>
<p>一个是关于markers，一个是关于line style</p>
<h2 id="设置线段样式"><a href="#设置线段样式" class="headerlink" title="设置线段样式"></a>设置线段样式</h2><p>设置线段样式的三种方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, linewidth=<span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">line, = plt.plot(x, y, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">line.set_antialiased(<span class="literal">False</span>) <span class="comment"># turn off antialiasing</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lines = plt.plot(x1, y1, x2, y2)</span><br><span class="line"><span class="comment"># use keyword args</span></span><br><span class="line">plt.setp(lines, color=<span class="string">&#x27;r&#x27;</span>, linewidth=<span class="number">2.0</span>)</span><br><span class="line"><span class="comment"># or MATLAB style string value pairs</span></span><br><span class="line">plt.setp(lines, <span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>

<p>官网网址关于点线虚线什么的</p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/lines_bars_and_markers/linestyles.html">https://matplotlib.org/stable/gallery/lines_bars_and_markers/linestyles.html</a></p>
<h2 id="生成多个figure和subpolt"><a href="#生成多个figure和subpolt" class="headerlink" title="生成多个figure和subpolt"></a>生成多个figure和subpolt</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.figure(<span class="number">1</span>)                <span class="comment"># the first figure</span></span><br><span class="line">plt.subplot(<span class="number">211</span>)             <span class="comment"># the first subplot in the first figure</span></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">plt.subplot(<span class="number">212</span>)             <span class="comment"># the second subplot in the first figure</span></span><br><span class="line">plt.plot([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.figure(<span class="number">2</span>)                <span class="comment"># a second figure</span></span><br><span class="line">plt.plot([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])          <span class="comment"># creates a subplot() by default</span></span><br><span class="line"></span><br><span class="line">plt.figure(<span class="number">1</span>)                <span class="comment"># figure 1 current; subplot(212) still current</span></span><br><span class="line">plt.subplot(<span class="number">211</span>)             <span class="comment"># make subplot(211) in figure1 current</span></span><br><span class="line">plt.title(<span class="string">&#x27;Easy as 1, 2, 3&#x27;</span>) <span class="comment"># subplot 211 title</span></span><br></pre></td></tr></table></figure>

<p>这里注意从figure2调到figure1需要执行命令，此时指向figure1中的subpolt(212),因此还得再指向plt.subplot(211)</p>
<p><span style='color:red;background:white;font-size:16;font-family:楷体;'>小结：在画图之前你需要指定在哪个figure，有axes还需指定在哪个subplot</span></p>
<hr>
<h2 id="任意设置子图在指定位置"><a href="#任意设置子图在指定位置" class="headerlink" title="任意设置子图在指定位置"></a>任意设置子图在指定位置</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/subplots_axes_and_figures/axes_demo.html">Axes Demo — Matplotlib 3.4.3 documentation</a></p>
<hr>
<h2 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.hist.html#matplotlib.pyplot.hist">matplotlib.pyplot.hist — Matplotlib 3.4.3 documentation</a></p>
<h2 id="在python里面打数学公式"><a href="#在python里面打数学公式" class="headerlink" title="在python里面打数学公式"></a>在python里面打数学公式</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/text/mathtext.html">Writing mathematical expressions — Matplotlib 3.4.3 documentation</a></p>
<h2 id="调整子图的教程"><a href="#调整子图的教程" class="headerlink" title="调整子图的教程"></a>调整子图的教程</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/intermediate/gridspec.html">https://matplotlib.org/stable/tutorials/intermediate/gridspec.html</a></p>
<h2 id="Constrained-Layout-的用法"><a href="#Constrained-Layout-的用法" class="headerlink" title="Constrained Layout 的用法"></a>Constrained Layout 的用法</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/MTandHJ/article/details/90272935">https://blog.csdn.net/MTandHJ/article/details/90272935</a></p>
<h2 id="contour等值线合集"><a href="#contour等值线合集" class="headerlink" title="contour等值线合集"></a>contour等值线合集</h2><h3 id="官方contour教程"><a href="#官方contour教程" class="headerlink" title="官方contour教程"></a>官方contour教程</h3><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/images_contours_and_fields/contour_demo.html">https://matplotlib.org/stable/gallery/images_contours_and_fields/contour_demo.html</a></p>
<h3 id="contour设置"><a href="#contour设置" class="headerlink" title="contour设置"></a>contour设置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">im   =  ax.contour(f1.lon,f1.level,avg_theta,np.linspace(-<span class="number">2</span>,<span class="number">4</span>,<span class="number">15</span>),linewidths=<span class="number">0.9</span>,colors=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">rcParams[<span class="string">&quot;contour.negative_linestyle&quot;</span>] = <span class="string">&#x27;solid&#x27;</span> <span class="comment"># 设置负数的线段样式</span></span><br></pre></td></tr></table></figure>

<p>注意设置contour的负数样式并不能直接在contour函数里面搞，需要像第二行那样搞</p>
<h2 id="Tick设置"><a href="#Tick设置" class="headerlink" title="Tick设置"></a>Tick设置</h2><h3 id="调整坐标轴标签和刻度之间的距离"><a href="#调整坐标轴标签和刻度之间的距离" class="headerlink" title="调整坐标轴标签和刻度之间的距离"></a>调整坐标轴标签和刻度之间的距离</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.tick_params(pad=<span class="number">0.2</span>)</span><br></pre></td></tr></table></figure>



<h3 id="使用预定义的刻度设置"><a href="#使用预定义的刻度设置" class="headerlink" title="使用预定义的刻度设置"></a>使用预定义的刻度设置</h3><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/ticks_and_spines/tick-formatters.html">https://matplotlib.org/stable/gallery/ticks_and_spines/tick-formatters.html</a></p>
<h3 id="经纬度的ticklabel形式"><a href="#经纬度的ticklabel形式" class="headerlink" title="经纬度的ticklabel形式"></a>经纬度的ticklabel形式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置Formatter.</span></span><br><span class="line"><span class="keyword">if</span> xformatter <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    xformatter = LongitudeFormatter()</span><br><span class="line"><span class="keyword">if</span> yformatter <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    yformatter = LatitudeFormatter()</span><br><span class="line">ax.xaxis.set_major_formatter(xformatter)</span><br><span class="line">ax.yaxis.set_major_formatter(yformatter)</span><br></pre></td></tr></table></figure>

<p>这样的话会自动转换成经纬度形式的labels，不需要我再自己搞tick_labels了</p>
<h2 id="设置绘图的范围"><a href="#设置绘图的范围" class="headerlink" title="设置绘图的范围"></a>设置绘图的范围</h2><p>需求：比如我只想在原图的基础上只画某个范围内的图像，只需要对x轴进行设置就好。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plt.xlim(xmin=<span class="number">60</span>,xmax=<span class="number">130</span>)</span><br><span class="line">plt.ylim(ymin=-<span class="number">0.5</span>,ymax=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ax的方法</span></span><br><span class="line">ax.set_xlim(xmin=<span class="number">60</span>,xmax=<span class="number">200</span>)</span><br><span class="line">ax.set_ylim(ymin=-<span class="number">0.5</span>,ymax=<span class="number">1.5</span>)</span><br></pre></td></tr></table></figure>

<p>在这个范围之外的就不会再有了</p>
<h2 id="设置x轴y轴标题"><a href="#设置x轴y轴标题" class="headerlink" title="设置x轴y轴标题"></a>设置x轴y轴标题</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ax1.set_xlabel(<span class="string">&#x27;time&#x27;</span>)</span><br><span class="line">ax1.set_ylabel(<span class="string">&#x27;s1 and s2&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="关于刻度"><a href="#关于刻度" class="headerlink" title="关于刻度"></a>关于刻度</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;这条命令定义了两个major刻度之间分成多少份&#x27;&#x27;&#x27;</span></span><br><span class="line">ax.xaxis.set_minor_locator(AutoMinorLocator(<span class="number">10</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="设置coutour等值线的label有一个单独的函数"><a href="#设置coutour等值线的label有一个单独的函数" class="headerlink" title="设置coutour等值线的label有一个单独的函数"></a>设置coutour等值线的label有一个单独的函数</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.clabel.html">https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.clabel.html</a></p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/contour_api.html?highlight=inline#matplotlib.contour.ContourLabeler.calc_label_rot_and_inline">https://matplotlib.org/stable/api/contour_api.html?highlight=inline#matplotlib.contour.ContourLabeler.calc_label_rot_and_inline</a></p>
<h2 id="双y轴"><a href="#双y轴" class="headerlink" title="双y轴"></a>双y轴</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/atanisi/p/8530693.html">https://www.cnblogs.com/atanisi/p/8530693.html</a></p>
<h2 id="倒转y轴"><a href="#倒转y轴" class="headerlink" title="倒转y轴"></a>倒转y轴</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2051744/reverse-y-axis-in-pyplot">https://stackoverflow.com/questions/2051744/reverse-y-axis-in-pyplot</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.gca().invert_yaxis()</span><br></pre></td></tr></table></figure>



<h2 id="怎么给NAN值赋颜色"><a href="#怎么给NAN值赋颜色" class="headerlink" title="怎么给NAN值赋颜色"></a>怎么给NAN值赋颜色</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.gca().set_facecolor(&quot;black&quot;)</span><br></pre></td></tr></table></figure>



<h2 id="histgram-教程"><a href="#histgram-教程" class="headerlink" title="histgram 教程"></a>histgram 教程</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/statistics/hist.html">https://matplotlib.org/stable/gallery/statistics/hist.html</a></p>
<h2 id="绘制bar图"><a href="#绘制bar图" class="headerlink" title="绘制bar图"></a>绘制bar图</h2><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/47dfbe43dae1">https://www.jianshu.com/p/47dfbe43dae1</a> 讲调整柱子颜色的</p>
<h2 id="matplotlib-颜色列表"><a href="#matplotlib-颜色列表" class="headerlink" title="matplotlib 颜色列表"></a>matplotlib 颜色列表</h2><p><a target="_blank" rel="noopener" href="https://finthon.com/matplotlib-color-list/">https://finthon.com/matplotlib-color-list/</a></p>
<h2 id="colormap参考列表"><a href="#colormap参考列表" class="headerlink" title="colormap参考列表"></a>colormap参考列表</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/color/colormap_reference.html">https://matplotlib.org/stable/gallery/color/colormap_reference.html</a></p>
<h3 id="一个第三方colormap"><a href="#一个第三方colormap" class="headerlink" title="一个第三方colormap"></a>一个第三方colormap</h3><p><a target="_blank" rel="noopener" href="https://github.com/1313e/CMasher">https://github.com/1313e/CMasher</a></p>
<h2 id="调整视图的长宽比"><a href="#调整视图的长宽比" class="headerlink" title="调整视图的长宽比"></a>调整视图的长宽比</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axs.<span class="built_in">set</span>(aspect=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://jdhao.github.io/2017/06/03/change-aspect-ratio-in-mpl/">https://jdhao.github.io/2017/06/03/change-aspect-ratio-in-mpl/</a></p>
<h2 id="像素图"><a href="#像素图" class="headerlink" title="像素图"></a>像素图</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/images_contours_and_fields/contour_image.html#sphx-glr-gallery-images-contours-and-fields-contour-image-py">https://matplotlib.org/stable/gallery/images_contours_and_fields/contour_image.html#sphx-glr-gallery-images-contours-and-fields-contour-image-py</a></p>
<h2 id="colormap的设置教程"><a href="#colormap的设置教程" class="headerlink" title="colormap的设置教程"></a>colormap的设置教程</h2><ol>
<li><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/colors/colormap-manipulation.html">Creating Colormaps in Matplotlib — Matplotlib 3.5.1 documentation</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">viridis = cm.get_cmap(<span class="string">&#x27;viridis&#x27;</span>, <span class="number">256</span>)</span><br><span class="line">newcolors = viridis(np.linspace(<span class="number">0</span>, <span class="number">1</span>, <span class="number">256</span>))</span><br><span class="line">pink = np.array([<span class="number">248</span>/<span class="number">256</span>, <span class="number">24</span>/<span class="number">256</span>, <span class="number">148</span>/<span class="number">256</span>, <span class="number">1</span>])</span><br><span class="line">newcolors[:<span class="number">25</span>, :] = pink</span><br><span class="line">newcmp = ListedColormap(newcolors)  <span class="comment">#注意这最后一步是把一堆rgb array生成一个数组</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/colors/colorbar_only.html">Customized Colorbars Tutorial — Matplotlib 3.5.1 documentation</a></p>
<p>这里面主要是看extend两边的颜色设置</p>
</li>
</ol>
<h2 id="关于边框（xy轴）的设置（粗细、颜色）"><a href="#关于边框（xy轴）的设置（粗细、颜色）" class="headerlink" title="关于边框（xy轴）的设置（粗细、颜色）"></a>关于边框（xy轴）的设置（粗细、颜色）</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/4761623/how-to-change-the-color-of-the-axis-ticks-and-labels-for-a-plot-in-matplotlib">https://stackoverflow.com/questions/4761623/how-to-change-the-color-of-the-axis-ticks-and-labels-for-a-plot-in-matplotlib</a></p>
<h2 id="CMAP教程"><a href="#CMAP教程" class="headerlink" title="CMAP教程"></a>CMAP教程</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">https://matplotlib.org/stable/tutorials/colors/colormaps.html</a></p>
<h3 id="cmap名字后面加r等于反过来"><a href="#cmap名字后面加r等于反过来" class="headerlink" title="cmap名字后面加r等于反过来"></a>cmap名字后面加r等于反过来</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmap = <span class="string">&#x27;Blues&#x27;</span></span><br><span class="line">cmap = <span class="string">&#x27;Blues_r&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="第三方cmap库"><a href="#第三方cmap库" class="headerlink" title="第三方cmap库"></a>第三方cmap库</h3><p><a target="_blank" rel="noopener" href="https://jiffyclub.github.io/palettable/">Palettable (jiffyclub.github.io)</a></p>
<h2 id="流线中的箭头样式设置"><a href="#流线中的箭头样式设置" class="headerlink" title="流线中的箭头样式设置"></a>流线中的箭头样式设置</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.FancyArrowPatch.html#matplotlib.patches.FancyArrowPatch">https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.FancyArrowPatch.html#matplotlib.patches.FancyArrowPatch</a></p>
<p>注意，对于’&lt;-‘这种箭头，方向是反着的</p>
<h2 id="绘制streamplot的例子"><a href="#绘制streamplot的例子" class="headerlink" title="绘制streamplot的例子"></a>绘制streamplot的例子</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/images_contours_and_fields/plot_streamplot.html">https://matplotlib.org/stable/gallery/images_contours_and_fields/plot_streamplot.html</a></p>
<h2 id="添加文本"><a href="#添加文本" class="headerlink" title="添加文本"></a>添加文本</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_21478261/article/details/108290310">(9条消息) Python可视化31|matplotlib-图添加文本(text)及注释(annotate)_pythonic生物人的博客-CSDN博客</a></p>
<h2 id="Unidata中的各种例子"><a href="#Unidata中的各种例子" class="headerlink" title="Unidata中的各种例子"></a>Unidata中的各种例子</h2><p><a target="_blank" rel="noopener" href="https://unidata.github.io/python-training/gallery/gallery-home/">https://unidata.github.io/python-training/gallery/gallery-home/</a></p>
<h2 id="文本框的样式实例"><a href="#文本框的样式实例" class="headerlink" title="文本框的样式实例"></a>文本框的样式实例</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.1.1/gallery/pyplots/whats_new_98_4_fancy.html#sphx-glr-gallery-pyplots-whats-new-98-4-fancy-py">https://matplotlib.org/3.1.1/gallery/pyplots/whats_new_98_4_fancy.html#sphx-glr-gallery-pyplots-whats-new-98-4-fancy-py</a></p>
<h2 id="matplotlib里面有一个很多教程的集合网站"><a href="#matplotlib里面有一个很多教程的集合网站" class="headerlink" title="matplotlib里面有一个很多教程的集合网站"></a>matplotlib里面有一个很多教程的集合网站</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/">Tutorials — Matplotlib 3.5.0 documentation</a></p>
<p>点进去在左边框</p>
<h2 id="第三方colorbar库"><a href="#第三方colorbar库" class="headerlink" title="第三方colorbar库"></a>第三方colorbar库</h2><p><a target="_blank" rel="noopener" href="https://jiffyclub.github.io/palettable/">Palettable (jiffyclub.github.io)</a></p>
<h2 id="给等值线添加图例"><a href="#给等值线添加图例" class="headerlink" title="给等值线添加图例"></a>给等值线添加图例</h2><p><a target="_blank" rel="noopener" href="https://github.com/matplotlib/matplotlib/issues/11134">https://github.com/matplotlib/matplotlib/issues/11134</a></p>
<h2 id="关于刻度label的大小设置"><a href="#关于刻度label的大小设置" class="headerlink" title="关于刻度label的大小设置"></a>关于刻度label的大小设置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.tick_params(labelsize=labelsize)</span><br></pre></td></tr></table></figure>

<p>参考网站</p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html">https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.tick_params.html</a></p>
<p>labelsize一个是可以设置具体值，还有就是设置字符串</p>
<p>字符串选项xx-small, x-small, small, medium, large, x-large, xx-large, larger, smaller</p>
<h2 id="给刻度线加上label"><a href="#给刻度线加上label" class="headerlink" title="给刻度线加上label"></a>给刻度线加上label</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.clabel(im2, np.linspace(<span class="number">2</span>,<span class="number">12</span>,<span class="number">6</span>), inline=<span class="literal">True</span>, fontsize=<span class="number">12</span>)</span><br></pre></td></tr></table></figure>



<h2 id="tick-params-对坐标轴刻度的设置"><a href="#tick-params-对坐标轴刻度的设置" class="headerlink" title="tick_params 对坐标轴刻度的设置"></a>tick_params 对坐标轴刻度的设置</h2><p>官方文档 <a target="_blank" rel="noopener" href="https://matplotlib.org/3.5.0/api/_as_gen/matplotlib.axes.Axes.tick_params.html">https://matplotlib.org/3.5.0/api/_as_gen/matplotlib.axes.Axes.tick_params.html</a></p>
<p>这里以labelsize设置，如果只想设置x或者y轴的话</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax1.tick_params(axis=&#x27;y&#x27;, labelcolor=color)</span><br></pre></td></tr></table></figure>

<p>在里面指定一下就好了</p>
<h2 id="subplots与add-subplot之间的subplot-kw"><a href="#subplots与add-subplot之间的subplot-kw" class="headerlink" title="subplots与add_subplot之间的subplot_kw"></a>subplots与add_subplot之间的subplot_kw</h2><p>在使用cartopy画图的过程中，添加地图映射用的是这个语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax = fig1.add_subplot(projection=proj)</span><br></pre></td></tr></table></figure>

<p>我很好奇那如果使用plt.subplots可以给添加地图映射么？</p>
<p>在官网给出的例子里是这样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, subplot_kw=<span class="built_in">dict</span>(projection=<span class="string">&quot;polar&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>有了 subplot_kw 这个参数，关于这个参数的解释</p>
<blockquote>
<p><strong>subplot_kw</strong>dict, optional</p>
<p>Dict with keywords passed to the <a target="_blank" rel="noopener" href="https://matplotlib.org/3.5.0/api/figure_api.html#matplotlib.figure.Figure.add_subplot"><code>add_subplot</code></a> call used to create each subplot.</p>
</blockquote>
<h2 id="关于colorbar的设置"><a href="#关于colorbar的设置" class="headerlink" title="关于colorbar的设置"></a>关于colorbar的设置</h2><p>起因是我想把colorbar下面的数字改大一点，参考资料：</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/23172282/how-to-change-font-properties-of-a-matplotlib-colorbar-label">https://stackoverflow.com/questions/23172282/how-to-change-font-properties-of-a-matplotlib-colorbar-label</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.pylab <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> numpy <span class="keyword">import</span> arange</span><br><span class="line"></span><br><span class="line">pcolor(arange(<span class="number">20</span>).reshape(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">cb = colorbar(label=<span class="string">&#x27;a label&#x27;</span>)</span><br><span class="line">ax = cb.ax</span><br><span class="line">text = ax.yaxis.label</span><br><span class="line">font = matplotlib.font_manager.FontProperties(family=<span class="string">&#x27;times new roman&#x27;</span>, style=<span class="string">&#x27;italic&#x27;</span>, size=<span class="number">16</span>)</span><br><span class="line">text.set_font_properties(font)</span><br><span class="line">show()</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2kXYfa"><img src="https://z4a.net/images/2022/04/27/-2022-04-27-211751.md.png" alt="-2022-04-27-211751.md.png"></a></p>
<p>从这里我们可以知道：</p>
<ol>
<li>cb &#x3D; colorbar(label&#x3D;’a label’) 这句话调用之后返回的是一个句柄，也就是后面的ax</li>
<li>让我惊奇的是后面的text也是ax能够返回的对象，还有用这种方法来设置fontproperties，以及最后的set_font_properties</li>
</ol>
<p><strong>学习了学习了</strong></p>
<p>关于对colorbar labelsize的设置：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = fig.colorbar(im,shrink=<span class="number">0.6</span>, pad=<span class="number">0.05</span>)</span><br><span class="line">a.ax.tick_params(labelsize=<span class="number">8</span>)</span><br></pre></td></tr></table></figure>

<p>跟上面一样，也是在返回的句柄上进行操作，这里注意tick_params这个函数</p>
<p>文档：<a target="_blank" rel="noopener" href="https://matplotlib.org/3.5.0/api/_as_gen/matplotlib.axes.Axes.tick_params.html">https://matplotlib.org/3.5.0/api/_as_gen/matplotlib.axes.Axes.tick_params.html</a></p>
<h2 id="legend"><a href="#legend" class="headerlink" title="legend"></a>legend</h2><h3 id="官方教程"><a href="#官方教程" class="headerlink" title="官方教程"></a>官方教程</h3><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.1.1/tutorials/intermediate/legend_guide.html">https://matplotlib.org/3.1.1/tutorials/intermediate/legend_guide.html</a></p>
<h3 id="线图的legend控制label的颜色跟线的颜色一致"><a href="#线图的legend控制label的颜色跟线的颜色一致" class="headerlink" title="线图的legend控制label的颜色跟线的颜色一致"></a>线图的legend控制label的颜色跟线的颜色一致</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">labelcolor=<span class="string">&#x27;linecolor&#x27;</span></span><br><span class="line"></span><br><span class="line">ax.legend(loc=<span class="string">&#x27;upper left&#x27;</span>,prop=&#123;<span class="string">&#x27;size&#x27;</span>: <span class="number">25</span>&#125;,labelcolor=<span class="string">&#x27;linecolor&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h2 id="关于画图过程中字典形式的传入参数"><a href="#关于画图过程中字典形式的传入参数" class="headerlink" title="关于画图过程中字典形式的传入参数"></a>关于画图过程中字典形式的传入参数</h2><p>举例、积累：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ax.quiverkey(q, X=quiver_x, Y=quiver_y, U=speed,</span><br><span class="line">                    label=<span class="string">f&#x27;<span class="subst">&#123;speed&#125;</span> m/s&#x27;</span>, labelpos=<span class="string">&#x27;S&#x27;</span>, labelsep=<span class="number">0.1</span>,fontproperties=&#123;<span class="string">&#x27;size&#x27;</span>:<span class="number">18</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="设置-自我总结"><a href="#设置-自我总结" class="headerlink" title="设置-自我总结"></a>设置-自我总结</h2><ol>
<li><p>关于相互重叠啊，跑出去了啊等等问题</p>
<p>加plt.tight_layout()让它自己调整</p>
</li>
<li><p>range()也是不包含尾端的</p>
</li>
<li><p>在绘制等值线图的时候，关闭extend &#x3D; both，超过的值不会画，会造成有白斑出现</p>
</li>
</ol>
<h3 id="打出°的上标"><a href="#打出°的上标" class="headerlink" title="打出°的上标"></a>打出°的上标</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">u&#x27;&#x27;</span> + <span class="built_in">str</span>(xxxx) + <span class="string">&quot;\N&#123;DEGREE SIGN&#125;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="上标下标的教程"><a href="#上标下标的教程" class="headerlink" title="上标下标的教程"></a>上标下标的教程</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_38314865/article/details/89392911?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.nonecase">python为字体添加上下标_Mr.horse的博客-CSDN博客_python怎么打上角标</a></p>
<h3 id="pad参数调整子图之间的距离"><a href="#pad参数调整子图之间的距离" class="headerlink" title="pad参数调整子图之间的距离"></a>pad参数调整子图之间的距离</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ig1, axes = plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize = (<span class="number">16</span>,<span class="number">7</span>))</span><br><span class="line">fig1.tight_layout(pad = <span class="number">1</span>) <span class="comment">#pad参数设置子图之间的间隔 </span></span><br></pre></td></tr></table></figure>



<h3 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h3><p>label不一定要是文本，数字也可以</p>
<h3 id="contour中的线段设置问题"><a href="#contour中的线段设置问题" class="headerlink" title="contour中的线段设置问题"></a>contour中的线段设置问题</h3><p>设置了cmap后再设置negative_linestyle无法呈现负值对应虚线的效果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">im   =  ax.contour(f1.lon,f1.level,avg_theta,np.linspace(-<span class="number">2</span>,<span class="number">4</span>,<span class="number">15</span>),linewidth=<span class="number">0.9</span>,cmap=<span class="string">&#x27;Blues&#x27;</span>,negative_linestyle=<span class="string">&#x27;dashed&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="调整矢量图的箭头稀疏程度"><a href="#调整矢量图的箭头稀疏程度" class="headerlink" title="调整矢量图的箭头稀疏程度"></a>调整矢量图的箭头稀疏程度</h3><p>目前没找到现成的函数，我发现可以跳点画</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">q  =  ax.quiver(f2.lon[::<span class="number">4</span>], f2.level[::<span class="number">2</span>], uwind[::<span class="number">2</span>,::<span class="number">4</span>], omega[::<span class="number">2</span>,::<span class="number">4</span>], </span><br><span class="line">                angles=<span class="string">&#x27;uv&#x27;</span>,<span class="comment"># regrid_shape这个参数越小，是两门就越稀疏</span></span><br><span class="line">                scale_units=<span class="string">&#x27;xy&#x27;</span>, scale=<span class="number">1.5</span>,        <span class="comment"># scale是参考矢量，所以取得越大画出来的箭头就越短</span></span><br><span class="line">                units=<span class="string">&#x27;xy&#x27;</span>, width=<span class="number">2</span>,</span><br><span class="line">                color=<span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure>


<h3 id="报错：-tkinter-TclError-unknown-color-name-“white”"><a href="#报错：-tkinter-TclError-unknown-color-name-“white”" class="headerlink" title="报错：_tkinter.TclError: unknown color name “white”"></a>报错：_tkinter.TclError: unknown color name “white”</h3><p>解决办法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib</span><br><span class="line">matplotlib.use(&#x27;Agg&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="使用streamplot画垂直流线的几个问题"><a href="#使用streamplot画垂直流线的几个问题" class="headerlink" title="使用streamplot画垂直流线的几个问题"></a>使用streamplot画垂直流线的几个问题</h3><ol>
<li>必须坐标系是递增的</li>
<li>必须坐标轴上是等间距的</li>
</ol>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="matplotlib-axes-Axes-pcolormesh"><a href="#matplotlib-axes-Axes-pcolormesh" class="headerlink" title="matplotlib.axes.Axes.pcolormesh"></a>matplotlib.axes.Axes.pcolormesh</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.pcolormesh.html">https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.pcolormesh.html</a></p>
<h2 id="matplotlib-pyplot-colorbar"><a href="#matplotlib-pyplot-colorbar" class="headerlink" title="matplotlib.pyplot.colorbar"></a>matplotlib.pyplot.colorbar</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.colorbar.html#matplotlib.pyplot.colorbar">https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.colorbar.html#matplotlib.pyplot.colorbar</a></p>
<h2 id="numpy-average"><a href="#numpy-average" class="headerlink" title="numpy.average"></a>numpy.average</h2><p><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.average.html">numpy.average — NumPy v1.21 Manual</a></p>
<h2 id="matplotlib-patches-Circle"><a href="#matplotlib-patches-Circle" class="headerlink" title="matplotlib.patches.Circle"></a>matplotlib.patches.Circle</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Circle.html">https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Circle.html</a></p>
<h2 id="isinstance函数"><a href="#isinstance函数" class="headerlink" title="isinstance函数"></a>isinstance函数</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wanglei_storage/article/details/52849081">https://blog.csdn.net/wanglei_storage/article/details/52849081</a></p>
<h2 id="matplotlib中的流线函数"><a href="#matplotlib中的流线函数" class="headerlink" title="matplotlib中的流线函数"></a>matplotlib中的流线函数</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.streamplot.html#matplotlib.axes.Axes.streamplot">https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.streamplot.html#matplotlib.axes.Axes.streamplot</a></p>
<h2 id="strip函数"><a href="#strip函数" class="headerlink" title="strip函数"></a>strip函数</h2><p>用来去掉字符串头尾的特殊字符，比如换行符</p>
<h2 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h2><p>注意在main函数中我发现由于main函数里面的值是非全局变量，再调用外部函数的话，会因为无全局变量而不错，因此编写的外部函数要有传入参数</p>
<h2 id="在pycharm中设置运行断点"><a href="#在pycharm中设置运行断点" class="headerlink" title="在pycharm中设置运行断点"></a>在pycharm中设置运行断点</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># %%</span></span><br></pre></td></tr></table></figure>



<h2 id="函数中的参数问题"><a href="#函数中的参数问题" class="headerlink" title="函数中的参数问题"></a>函数中的参数问题</h2><p>没有指定函数值的参数要放在前面，指定了函数值的要放在后面，不能乱</p>
<h3 id="xarray读取era数据存在的问题"><a href="#xarray读取era数据存在的问题" class="headerlink" title="xarray读取era数据存在的问题"></a>xarray读取era数据存在的问题</h3><p>似乎无法处理short类型数据，无法获取factor和offset这些量</p>
<h1 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h1><h2 id="cartopy设置与添加水平线"><a href="#cartopy设置与添加水平线" class="headerlink" title="cartopy设置与添加水平线"></a>cartopy设置与添加水平线</h2><p>添加水平线用到的函数hlines()给的是xmin和xmax</p>
<p>但是在实际操作中并不能对上，需要进行调整，原因目前还没搞清</p>
<h2 id="jupyterlab中的设置密码问题"><a href="#jupyterlab中的设置密码问题" class="headerlink" title="jupyterlab中的设置密码问题"></a>jupyterlab中的设置密码问题</h2><p>网上给的教程有问题，真正的教程在jupyterlab的config文件里面可以找到</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> jupyter_server.auth <span class="keyword">import</span> passwd; passwd()</span><br></pre></td></tr></table></figure>



<h2 id="cartopy加载地图信息显示下载失败"><a href="#cartopy加载地图信息显示下载失败" class="headerlink" title="cartopy加载地图信息显示下载失败"></a>cartopy加载地图信息显示下载失败</h2><p>[(7条消息) Cartopy加载地图信息报错 TimeoutError: <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_50569998/article/details/108814321">WinError 10060]_会计师-CSDN博客</a></p>
<p>地图信息储存的服务器有问题，下载github里面的资料再放进去</p>
<h2 id="cartopy地图只画出来一半"><a href="#cartopy地图只画出来一半" class="headerlink" title="cartopy地图只画出来一半"></a>cartopy地图只画出来一半</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">f   =  plt.figure(figsize=(<span class="number">10</span>,<span class="number">5</span>))</span><br><span class="line">ax  =  f.add_subplot(</span><br><span class="line">    <span class="number">111</span>,</span><br><span class="line">    projection=ccrs.PlateCarree()</span><br><span class="line">)</span><br><span class="line">ax.streamplot(</span><br><span class="line">    u.lon,u.lat,</span><br><span class="line">    u1,v1,</span><br><span class="line">    transform=ccrs.PlateCarree()</span><br><span class="line">)</span><br><span class="line">ax.coastlines()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://z4a.net/images/2022/04/05/image-20210921145438951.png" alt="image-20210921145438951.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">f   =  plt.figure(figsize=(<span class="number">10</span>,<span class="number">5</span>))</span><br><span class="line">ax  =  f.add_subplot(</span><br><span class="line">    <span class="number">111</span>,</span><br><span class="line">    projection=ccrs.PlateCarree(central_longitude=<span class="number">0</span>)</span><br><span class="line">)</span><br><span class="line">ax.streamplot(</span><br><span class="line">    u.lon,u.lat,</span><br><span class="line">    u1,v1,</span><br><span class="line">    transform=ccrs.PlateCarree()</span><br><span class="line">)</span><br><span class="line">ax.coastlines()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>加了一个central的设置后就好了，原因目前不明</p>
<h2 id="cartopy-中的set-extent"><a href="#cartopy-中的set-extent" class="headerlink" title="cartopy 中的set_extent"></a>cartopy 中的set_extent</h2><p>在设置刻度的时候可能会覆盖之前设置的ax.set_extent，所以这个语句要放在刻度设置的后面，覆盖回去</p>
<h2 id="画图报错-tkinter-TclError-unknown-color-name-“white”"><a href="#画图报错-tkinter-TclError-unknown-color-name-“white”" class="headerlink" title="画图报错 _tkinter.TclError: unknown color name “white”"></a>画图报错 _tkinter.TclError: unknown color name “white”</h2><p>这是由于在xshell中打开了X11转发，把它关上就可以了</p>
<h1 id="cartopy"><a href="#cartopy" class="headerlink" title="cartopy"></a>cartopy</h1><h2 id="设置边界线的粗细"><a href="#设置边界线的粗细" class="headerlink" title="设置边界线的粗细"></a>设置边界线的粗细</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.add_feature(cf.COASTLINE, lw=2) #lw参数</span><br></pre></td></tr></table></figure>





<h1 id="matplotlib画图总结"><a href="#matplotlib画图总结" class="headerlink" title="matplotlib画图总结"></a>matplotlib画图总结</h1><h2 id="2021-x2F-11-x2F-15-时间序列"><a href="#2021-x2F-11-x2F-15-时间序列" class="headerlink" title="2021&#x2F;11&#x2F;15 时间序列"></a>2021&#x2F;11&#x2F;15 时间序列</h2><p><img src="https://z4a.net/images/2022/04/05/image-20211115092534567.png" alt="image-20211115092534567.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">fig,axs  =  plt.subplots(tight_layout=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># axs.set_yticks(np.arange(90, 160,10))</span></span><br><span class="line"></span><br><span class="line">axs.bar(year,day-<span class="number">120</span>,width=<span class="number">1</span>,color=color_list,edgecolor=<span class="string">&#x27;black&#x27;</span>) <span class="comment"># 使用自定义的柱的颜色 定义边缘的颜色</span></span><br><span class="line"><span class="comment"># 刻度设置</span></span><br><span class="line">axs.set_xlim(<span class="number">1979</span>,<span class="number">2020</span>)</span><br><span class="line">axs.xaxis.set_major_locator(MultipleLocator(<span class="number">5</span>))  <span class="comment"># 设置大刻度和小刻度</span></span><br><span class="line">axs.xaxis.set_minor_locator(MultipleLocator(<span class="number">1</span>))  <span class="comment"># 注意只设置小刻度是出不来的，得先设置大刻度</span></span><br><span class="line"></span><br><span class="line">axs.set_yticks(np.arange(-<span class="number">20</span>,<span class="number">25</span>,<span class="number">5</span>))</span><br><span class="line">axs.set_yticklabels(y_label)</span><br><span class="line"></span><br><span class="line">axs.plot([<span class="number">1979</span>,<span class="number">2020</span>],[<span class="number">0</span>,<span class="number">0</span>],color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">axs.plot([<span class="number">1979</span>,<span class="number">2020</span>],[np.ceil(np.mean(day)-np.std(day))-<span class="number">120</span>,np.ceil(np.mean(day)-np.std(day))-<span class="number">120</span>],color=<span class="string">&#x27;k&#x27;</span>,linestyle=<span class="string">&#x27;dashed&#x27;</span>)</span><br><span class="line">axs.plot([<span class="number">1979</span>,<span class="number">2020</span>],[np.floor(np.mean(day)+np.std(day))-<span class="number">120</span>,np.floor(np.mean(day)+np.std(day))-<span class="number">120</span>],color=<span class="string">&#x27;k&#x27;</span>,linestyle=<span class="string">&#x27;dashed&#x27;</span>)</span><br><span class="line"></span><br><span class="line">axs.set_aspect(<span class="number">0.5</span>)  <span class="comment"># 调整图像的长宽比</span></span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">&#x27;/home/sun/paint/lunwen/bob_time_seris.pdf&#x27;</span>,dpi=<span class="number">350</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="矢量图绘制"><a href="#矢量图绘制" class="headerlink" title="矢量图绘制"></a>矢量图绘制</h2><p><img src="https://z4a.net/images/2022/04/05/image-20211115211956868.png" alt="image-20211115211956868.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">lonmin,lonmax,latmin,latmax  =  <span class="number">30</span>,<span class="number">120</span>,-<span class="number">10</span>,<span class="number">30</span></span><br><span class="line">extent     =  [lonmin,lonmax,latmin,latmax]</span><br><span class="line"></span><br><span class="line">proj = ccrs.PlateCarree()</span><br><span class="line">fig  = plt.figure()</span><br><span class="line">ax   = fig.add_subplot(<span class="number">111</span>, projection=proj)</span><br><span class="line"></span><br><span class="line">set_map_ticks(ax, dx=<span class="number">10</span>, dy=<span class="number">10</span>, nx=<span class="number">1</span>, ny=<span class="number">1</span>, labelsize=<span class="string">&#x27;small&#x27;</span>)</span><br><span class="line">ax.set_extent(extent, crs=proj)</span><br><span class="line">ax.coastlines(resolution=<span class="string">&#x27;10m&#x27;</span>,lw=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ax.plot([<span class="number">30</span>,<span class="number">120</span>],[<span class="number">0</span>,<span class="number">0</span>],linestyle=<span class="string">&#x27;dashed&#x27;</span>,color=<span class="string">&#x27;grey&#x27;</span>)</span><br><span class="line"></span><br><span class="line">im  =  ax.contourf(f3.lon,f3.lat,late_prect,levels=np.linspace(<span class="number">2</span>,<span class="number">18</span>,<span class="number">9</span>),cmap=<span class="string">&#x27;Blues&#x27;</span>,alpha=<span class="number">1</span>,extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line"></span><br><span class="line">q  =  ax.quiver(lon, lat, </span><br><span class="line">                  late_u, late_v, </span><br><span class="line">          regrid_shape=<span class="number">15</span>, angles=<span class="string">&#x27;uv&#x27;</span>,   <span class="comment"># regrid_shape这个参数越小，是两门就越稀疏</span></span><br><span class="line">        scale_units=<span class="string">&#x27;xy&#x27;</span>, scale=<span class="number">1</span>,        <span class="comment"># scale是参考矢量，所以取得越大画出来的箭头就越短</span></span><br><span class="line">        units=<span class="string">&#x27;xy&#x27;</span>, width=<span class="number">0.25</span>,</span><br><span class="line">        transform=proj,</span><br><span class="line">                  color=<span class="string">&#x27;k&#x27;</span>,linewidth=<span class="number">1.2</span>,headlength = <span class="number">5</span>, headaxislength = <span class="number">4</span>, headwidth = <span class="number">5</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">rect = mpl.patches.Rectangle(</span><br><span class="line">        (<span class="number">0.88</span>, <span class="number">0.8</span>), <span class="number">0.12</span>, <span class="number">0.2</span>, transform=ax.transAxes,    <span class="comment"># 这个能辟出来一块区域，第一个参数是最左下角点的坐标，后面是矩形的长和宽</span></span><br><span class="line">        fc=<span class="string">&#x27;white&#x27;</span>, ec=<span class="string">&#x27;k&#x27;</span>, lw=<span class="number">0.5</span>, zorder=<span class="number">1.1</span></span><br><span class="line">    )</span><br><span class="line">ax.add_patch(rect)</span><br><span class="line"></span><br><span class="line">qk = ax.quiverkey(</span><br><span class="line">        q, X=<span class="number">0.94</span>, Y=<span class="number">0.93</span>, U=<span class="number">5</span>,</span><br><span class="line">        label=<span class="string">f&#x27;<span class="subst">&#123;<span class="number">5</span>&#125;</span> m/s&#x27;</span>, labelpos=<span class="string">&#x27;S&#x27;</span>, labelsep=<span class="number">0.08</span>,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>



<h2 id="多张子图共用一个colorbar"><a href="#多张子图共用一个colorbar" class="headerlink" title="多张子图共用一个colorbar"></a>多张子图共用一个colorbar</h2><p><img src="https://z4a.net/images/2022/04/05/image-20211124142236875.png" alt="image-20211124142236875.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">dates  =  [-<span class="number">12</span>,-<span class="number">9</span>,-<span class="number">6</span>,-<span class="number">3</span>,<span class="number">0</span>,<span class="number">3</span>] <span class="comment">#总共6张图</span></span><br><span class="line">date   =  [<span class="number">18</span>,<span class="number">21</span>,<span class="number">24</span>,<span class="number">27</span>,<span class="number">30</span>,<span class="number">33</span>]</span><br><span class="line">props = <span class="built_in">dict</span>(boxstyle=<span class="string">&#x27;square&#x27;</span>, edgecolor=<span class="string">&#x27;white&#x27;</span>, facecolor=<span class="string">&#x27;white&#x27;</span>, alpha=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">proj    =  ccrs.PlateCarree()</span><br><span class="line">fig1    =  plt.figure(figsize=(<span class="number">14</span>,<span class="number">12</span>))</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>,<span class="number">2</span>):</span><br><span class="line">    ax = fig1.add_subplot(<span class="number">3</span>,<span class="number">2</span>,j,projection=proj)  <span class="comment">#这里添加子图的方式是（行，列，index）默认是从左往右，所以想从上往下要处理一下</span></span><br><span class="line">    ax.coastlines(resolution=<span class="string">&#x27;110m&#x27;</span>,lw=<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># 设置经纬度刻度.</span></span><br><span class="line">    set_map_ticks(ax, dx=<span class="number">10</span>, dy=<span class="number">10</span>, nx=<span class="number">1</span>, ny=<span class="number">1</span>, labelsize=<span class="string">&#x27;small&#x27;</span>)</span><br><span class="line">    ax.set_extent(extent, crs=proj)</span><br><span class="line">    </span><br><span class="line">    ax.plot([<span class="number">40</span>,<span class="number">120</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;k--&#x27;</span>)</span><br><span class="line">    im  =  ax.contourf(f2.lon,f2.lat,f2.T2M.data[date[<span class="built_in">int</span>((j-<span class="number">1</span>)/<span class="number">2</span>)],:],levels=np.linspace(<span class="number">280</span>,<span class="number">310</span>,<span class="number">16</span>),cmap=<span class="string">&#x27;coolwarm&#x27;</span>,alpha=<span class="number">1</span>,extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> dates[<span class="built_in">int</span>((j-<span class="number">1</span>)/<span class="number">2</span>)] &lt;= <span class="number">0</span>:</span><br><span class="line">        ax.text(<span class="number">0.825</span>,<span class="number">0.825</span>,<span class="string">&quot;D&quot;</span>+<span class="built_in">str</span>(dates[<span class="built_in">int</span>((j-<span class="number">1</span>)/<span class="number">2</span>)]),transform=ax.transAxes,bbox=props,fontsize=<span class="number">15</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ax.text(<span class="number">0.825</span>,<span class="number">0.825</span>,<span class="string">&quot;D+&quot;</span>+<span class="built_in">str</span>(dates[<span class="built_in">int</span>((j-<span class="number">1</span>)/<span class="number">2</span>)]),transform=ax.transAxes,bbox=props,fontsize=<span class="number">15</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">7</span>,<span class="number">2</span>):</span><br><span class="line">    ax = fig1.add_subplot(<span class="number">3</span>,<span class="number">2</span>,j,projection=proj)</span><br><span class="line">    ax.coastlines(resolution=<span class="string">&#x27;110m&#x27;</span>,lw=<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># 设置经纬度刻度.</span></span><br><span class="line">    set_map_ticks(ax, dx=<span class="number">10</span>, dy=<span class="number">10</span>, nx=<span class="number">1</span>, ny=<span class="number">1</span>, labelsize=<span class="string">&#x27;small&#x27;</span>)</span><br><span class="line">    ax.set_extent(extent, crs=proj)</span><br><span class="line">    </span><br><span class="line">    ax.plot([<span class="number">40</span>,<span class="number">120</span>],[<span class="number">0</span>,<span class="number">0</span>],<span class="string">&#x27;k--&#x27;</span>)</span><br><span class="line">    im  =  ax.contourf(f2.lon,f2.lat,f2.T2M.data[date[<span class="built_in">int</span>(j/<span class="number">2</span>+<span class="number">2</span>)],:],levels=np.linspace(<span class="number">280</span>,<span class="number">310</span>,<span class="number">16</span>),cmap=<span class="string">&#x27;coolwarm&#x27;</span>,alpha=<span class="number">1</span>,extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> dates[<span class="built_in">int</span>(j/<span class="number">2</span>+<span class="number">2</span>)] &lt;= <span class="number">0</span>:</span><br><span class="line">        ax.text(<span class="number">0.825</span>,<span class="number">0.825</span>,<span class="string">&quot;D&quot;</span>+<span class="built_in">str</span>(dates[<span class="built_in">int</span>(j/<span class="number">2</span>+<span class="number">2</span>)]),transform=ax.transAxes,bbox=props,fontsize=<span class="number">15</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        ax.text(<span class="number">0.825</span>,<span class="number">0.825</span>,<span class="string">&quot;D+&quot;</span>+<span class="built_in">str</span>(dates[<span class="built_in">int</span>(j/<span class="number">2</span>+<span class="number">2</span>)]),transform=ax.transAxes,bbox=props,fontsize=<span class="number">15</span>)</span><br><span class="line">            </span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">fig1.subplots_adjust(top=<span class="number">0.8</span>) <span class="comment">#整体往上紧凑来给下面的colorbar增加空间</span></span><br><span class="line"></span><br><span class="line">cbar_ax = fig1.add_axes([<span class="number">0.2</span>, <span class="number">0.05</span>, <span class="number">0.6</span>, <span class="number">0.03</span>])  <span class="comment">#依次是左端 下端 宽度 高度</span></span><br><span class="line">fig1.colorbar(im, cax=cbar_ax, shrink=<span class="number">0.5</span>, pad=<span class="number">0.2</span>, orientation=<span class="string">&#x27;horizontal&#x27;</span>) <span class="comment">#这样画就可以了</span></span><br></pre></td></tr></table></figure>

<h2 id="2021-x2F-12-x2F-28-垂直流场、等值线、等值填色"><a href="#2021-x2F-12-x2F-28-垂直流场、等值线、等值填色" class="headerlink" title="2021&#x2F;12&#x2F;28 垂直流场、等值线、等值填色"></a>2021&#x2F;12&#x2F;28 垂直流场、等值线、等值填色</h2><p><img src="https://z4a.net/images/2022/04/05/image-20211228152302834.png" alt="image-20211228152302834.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建画布</span></span><br><span class="line">fig  =  plt.figure()</span><br><span class="line">ax   =  fig.add_subplot()</span><br><span class="line">ax.invert_yaxis()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制等值线</span></span><br><span class="line">im1   =  ax.contour(f1.lon,f1.level,avg_theta,np.linspace(-<span class="number">2</span>,<span class="number">4</span>,<span class="number">13</span>),linewidth=<span class="number">0.9</span>,colors=<span class="string">&#x27;grey&#x27;</span>,negative_linestyle=<span class="string">&#x27;dashed&#x27;</span>)</span><br><span class="line">im2   =  ax.contourf(f4.lon,f4.level,div,<span class="number">10</span>,cmap=<span class="string">&#x27;seismic&#x27;</span>,extend=<span class="string">&#x27;both&#x27;</span>)</span><br><span class="line">q  =  ax.quiver(f2.lon[::<span class="number">4</span>], f2.level[::<span class="number">2</span>], uwind[::<span class="number">2</span>,::<span class="number">4</span>], omega[::<span class="number">2</span>,::<span class="number">4</span>], </span><br><span class="line">                angles=<span class="string">&#x27;uv&#x27;</span>,<span class="comment"># regrid_shape这个参数越小，是两门就越稀疏</span></span><br><span class="line">                scale_units=<span class="string">&#x27;xy&#x27;</span>, scale=<span class="number">1.5</span>,        <span class="comment"># scale是参考矢量，所以取得越大画出来的箭头就越短</span></span><br><span class="line">                units=<span class="string">&#x27;xy&#x27;</span>, width=<span class="number">2</span>,</span><br><span class="line">                color=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">fig.colorbar(im2,label=<span class="string">&#x27;divergence units: $&#123;10^6&#125;$ $&#123;s^-1&#125;$&#x27;</span>) <span class="comment"># 注意这里怎么加上标</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加地形</span></span><br><span class="line">ax2  =  ax.twinx()</span><br><span class="line">ax2.set_ylim((<span class="number">0</span>,<span class="number">4.5</span>))</span><br><span class="line"><span class="comment">#ax2.set_yticks(np.arange(0,21,1))</span></span><br><span class="line">ax2.plot(f5.lon.data,topo/<span class="number">1000</span>,color=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">ax2.fill_between(f5.lon.data,<span class="number">0</span>,topo/<span class="number">1000</span>,where=topo&gt;<span class="number">0</span>,color=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"></span><br><span class="line">ax2.set_yticklabels([])  <span class="comment"># 这里把刻度设置成无</span></span><br><span class="line">ax2.set_yticks([])</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="关于自制colormap与配合uigradient"><a href="#关于自制colormap与配合uigradient" class="headerlink" title="关于自制colormap与配合uigradient"></a>关于自制colormap与配合uigradient</h2><p>uigradient网址</p>
<p><a target="_blank" rel="noopener" href="https://uigradients.com/#WeddingDayBlues">uiGradients - Beautiful colored gradients</a></p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220309161441953.png" alt="image-20220309161441953.png"></p>
<p>直接复制了粘贴进puthon里即可，python是认这玩意儿的</p>
<p>自制colormap例子</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> matplotlib.colors <span class="keyword">import</span> ListedColormap,LinearSegmentedColormap</span><br><span class="line">clist=[<span class="string">&#x27;#40E0D0&#x27;</span>,<span class="string">&#x27;#FF8C00&#x27;</span>,<span class="string">&#x27;#FF0080&#x27;</span>]</span><br><span class="line"></span><br><span class="line">newcmp = LinearSegmentedColormap.from_list(<span class="string">&#x27;chaos&#x27;</span>,clist)</span><br></pre></td></tr></table></figure>

<h2 id="使用python绘制垂直的流线"><a href="#使用python绘制垂直的流线" class="headerlink" title="使用python绘制垂直的流线"></a>使用python绘制垂直的流线</h2><p>使用python中streamPlot函数绘制流线会带来2个问题</p>
<ol>
<li>由于p坐标是递减的，而函数要求坐标递增</li>
<li>函数要求坐标轴是等间距的</li>
</ol>
<p>因此，垂直流线的绘制很成问题。对此，这里记录使用python绘制成功流线的设置<br>绘制出来的结果如图：<a target="_blank" rel="noopener" href="https://z4a.net/image/2P2yY5"><img src="https://z4a.net/images/2022/07/25/-2022-07-25-214335.md.png" alt="-2022-07-25-214335.md.png"></a><br>函数片段如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">paint_meridional_circulation</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;This script paint meridional circulation and diabatic heating&#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="comment"># -------------- import module ---------------------------------</span></span><br><span class="line">    <span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">    <span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line">    <span class="keyword">import</span> xarray <span class="keyword">as</span> xr</span><br><span class="line">    <span class="keyword">import</span> plotly.figure_factory <span class="keyword">as</span> ff</span><br><span class="line">    sys.path.append(<span class="string">&quot;/home/sun/mycode_git/paint/&quot;</span>)</span><br><span class="line">    <span class="keyword">from</span> paint_lunwen_version3_0_fig2a_tem_gradient_20220426 <span class="keyword">import</span> add_text</span><br><span class="line">    <span class="comment">#import matplotlib</span></span><br><span class="line">    <span class="comment">#matplotlib.use(&#x27;Agg&#x27;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">## -------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># -------------- reference -------------------------------------</span></span><br><span class="line">    f0        =  xr.open_dataset(path + <span class="string">&quot;composite3.nc&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># -------------- variables -------------------------------------</span></span><br><span class="line">    var_list  =  cal_zonal_average(lon_slice=<span class="built_in">slice</span>(<span class="number">90</span>,<span class="number">100</span>),time_slice=[<span class="number">0</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">25</span>,<span class="number">27</span>,<span class="number">29</span>,<span class="number">30</span>,<span class="number">32</span>,<span class="number">34</span>])</span><br><span class="line"></span><br><span class="line">    v         =  var_list[<span class="number">0</span>]</span><br><span class="line">    w         =  var_list[<span class="number">1</span>] * -<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">## --------------  unify v and w  ------------------------------</span></span><br><span class="line">    multiple  =  np.nanmean(<span class="built_in">abs</span>(v))/np.nanmean(<span class="built_in">abs</span>(w))</span><br><span class="line">    w         =  w * <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">## --------------   vertical interpolate  ----------------------</span></span><br><span class="line">    <span class="comment">## fuck python stream plot, it need reverse and interpolate vertical axis</span></span><br><span class="line">    old_level =  f0.level.data</span><br><span class="line">    new_level =  np.linspace(<span class="number">1000</span>,<span class="number">100</span>,<span class="number">37</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(new_level)</span><br><span class="line">    <span class="built_in">print</span>(old_level)</span><br><span class="line"></span><br><span class="line">    new_v     =  np.zeros((v.shape[<span class="number">0</span>],<span class="number">37</span>,v.shape[<span class="number">2</span>]))</span><br><span class="line">    new_w     =  new_v.copy()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> tt <span class="keyword">in</span> <span class="built_in">range</span>(v.shape[<span class="number">0</span>]):</span><br><span class="line">        <span class="keyword">for</span> yy <span class="keyword">in</span> <span class="built_in">range</span>(v.shape[<span class="number">2</span>]):</span><br><span class="line">            </span><br><span class="line">            new_v[tt,:,yy]     =  np.interp(new_level[::-<span class="number">1</span>],old_level[::-<span class="number">1</span>],v[tt,::-<span class="number">1</span>,yy]) </span><br><span class="line">            new_w[tt,:,yy]     =  np.interp(new_level[::-<span class="number">1</span>],old_level[::-<span class="number">1</span>],w[tt,::-<span class="number">1</span>,yy]) </span><br><span class="line">            <span class="comment">#print(new_w[tt,:,yy])</span></span><br><span class="line">            </span><br><span class="line">    <span class="comment"># ------------      date    ----------------------------------</span></span><br><span class="line">    dates  =  [-<span class="number">30</span>,-<span class="number">20</span>,-<span class="number">10</span>,-<span class="number">5</span>,-<span class="number">3</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ------------     paint    ----------------------------------</span></span><br><span class="line">    <span class="comment">## set figure</span></span><br><span class="line">    fig1 = plt.figure(figsize=(<span class="number">32</span>, <span class="number">26</span>))</span><br><span class="line">    spec1 = fig1.add_gridspec(nrows=<span class="number">3</span>, ncols=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">            ax  =  fig1.add_subplot(spec1[row, col])</span><br><span class="line"></span><br><span class="line">            <span class="comment"># set axis ticks and label</span></span><br><span class="line">            ax.set_xticks(np.linspace(-<span class="number">10</span>, <span class="number">40</span>, <span class="number">11</span>, dtype=<span class="built_in">int</span>))</span><br><span class="line">            ax.set_yticks(np.linspace(<span class="number">1000</span>, <span class="number">100</span>, <span class="number">10</span>))</span><br><span class="line">            ax.set_xticklabels(generate_xlabel(np.linspace(-<span class="number">10</span>, <span class="number">40</span>, <span class="number">11</span>, dtype=<span class="built_in">int</span>)))</span><br><span class="line">            ax.set_yticklabels(np.linspace(<span class="number">100</span>,<span class="number">1000</span>,<span class="number">10</span>,dtype=<span class="built_in">int</span>))</span><br><span class="line">            ax.tick_params(axis=<span class="string">&#x27;both&#x27;</span>, labelsize=<span class="number">22.5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># set axis limit</span></span><br><span class="line">            ax.set_xlim((-<span class="number">10</span>,<span class="number">30</span>))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># plot stream line</span></span><br><span class="line">            ax.streamplot(f0.lat.data, new_level[::-<span class="number">1</span>], new_v[j,::-<span class="number">1</span>], new_w[j,::-<span class="number">1</span>], color=<span class="string">&#x27;k&#x27;</span>,linewidth=<span class="number">2.5</span>,density=<span class="number">2</span>,arrowsize=<span class="number">2.75</span>, arrowstyle=<span class="string">&#x27;-&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment"># add date</span></span><br><span class="line">            add_text(ax=ax, string=<span class="string">&quot;D&quot;</span> + <span class="built_in">str</span>(dates[j]), location=(<span class="number">0.05</span>, <span class="number">0.91</span>), fontsize=<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    plt.savefig(<span class="string">&quot;/home/sun/paint/monthly_meri_vertical_tem_90to100E/circulation_vertical.pdf&quot;</span>, dpi=<span class="number">350</span>)</span><br><span class="line"></span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>
<p>注意的几个点：</p>
<ol>
<li>w一开始omega，这里乘以了负数，因此w正值为上升运动</li>
<li>插值到等间距的坐标系，且np.interp也是要求坐标轴为正的。因此这里关于z轴倒了过来，如此操作得到的结果：<br>新数据 z轴是 100 to 1000 的值</li>
<li>绘图： y轴 100 to 1000 数据为new_v[j,::-1] 因此是1000 to 100的数据匹配100 to 1000的坐标轴，所以得到的图像是正确的。再利用ticklabel把原有的坐标覆盖掉。</li>
<li>Fuck python</li>
</ol>
<h1 id="numpy计算总结"><a href="#numpy计算总结" class="headerlink" title="numpy计算总结"></a>numpy计算总结</h1><h3 id="函数返回值问题"><a href="#函数返回值问题" class="headerlink" title="函数返回值问题"></a>函数返回值问题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_flist</span>(<span class="params">path,var</span>):</span><br><span class="line">    list1  =  [x <span class="keyword">for</span> x <span class="keyword">in</span> os.listdir(path) <span class="keyword">if</span> (var+<span class="string">&quot;-&quot;</span> <span class="keyword">in</span> x)]</span><br><span class="line">    <span class="keyword">return</span> list1.sort()</span><br><span class="line"></span><br><span class="line"><span class="built_in">id</span>  =  get_flist(path_id,<span class="string">&quot;V&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>注意，返回值是.sort()的话最后结果什么也没有，必须要sort完再返回</p>
<h2 id="xarray中的slice问题"><a href="#xarray中的slice问题" class="headerlink" title="xarray中的slice问题"></a>xarray中的slice问题</h2><p>注意使用slice挑选的时候是需要考虑顺序的，不是说可以反过来在这个范围内即可</p>
<h2 id="利用隐循环计算pentad平均"><a href="#利用隐循环计算pentad平均" class="headerlink" title="利用隐循环计算pentad平均"></a>利用隐循环计算pentad平均</h2><h2 id="交换象限"><a href="#交换象限" class="headerlink" title="交换象限"></a>交换象限</h2><p><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.swapaxes.html">https://numpy.org/doc/stable/reference/generated/numpy.swapaxes.html</a></p>
<h1 id="xarray"><a href="#xarray" class="headerlink" title="xarray"></a>xarray</h1><h2 id="关于获取dataarray-dataset一些属性的知识"><a href="#关于获取dataarray-dataset一些属性的知识" class="headerlink" title="关于获取dataarray dataset一些属性的知识"></a>关于获取dataarray dataset一些属性的知识</h2><p><a target="_blank" rel="noopener" href="https://docs.xarray.dev/en/stable/user-guide/data-structures.html">Data Structures (xarray.dev)</a></p>
<h1 id="python资源网址记录"><a href="#python资源网址记录" class="headerlink" title="python资源网址记录"></a>python资源网址记录</h1><h2 id="Iris-一个处理地球科学数据的软件包"><a href="#Iris-一个处理地球科学数据的软件包" class="headerlink" title="Iris 一个处理地球科学数据的软件包"></a>Iris 一个处理地球科学数据的软件包</h2><p><a target="_blank" rel="noopener" href="https://scitools-iris.readthedocs.io/en/latest/generated/gallery/index.html#sphx-glr-generated-gallery">https://scitools-iris.readthedocs.io/en/latest/generated/gallery/index.html#sphx-glr-generated-gallery</a></p>
<h2 id="matplotlib官网的gallery，记载着很多种例子加代码"><a href="#matplotlib官网的gallery，记载着很多种例子加代码" class="headerlink" title="matplotlib官网的gallery，记载着很多种例子加代码"></a>matplotlib官网的gallery，记载着很多种例子加代码</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/gallery/images_contours_and_fields/contour_label_demo.html">https://matplotlib.org/stable/gallery/images_contours_and_fields/contour_label_demo.html</a></p>
<h2 id="一个教程，说的是关于python中main函数的"><a href="#一个教程，说的是关于python中main函数的" class="headerlink" title="一个教程，说的是关于python中main函数的"></a>一个教程，说的是关于python中main函数的</h2><p><a target="_blank" rel="noopener" href="https://realpython.com/python-main-function/">https://realpython.com/python-main-function/</a></p>
<h2 id="real-python-一个python学习网站"><a href="#real-python-一个python学习网站" class="headerlink" title="real python 一个python学习网站"></a>real python 一个python学习网站</h2><p><a target="_blank" rel="noopener" href="https://realpython.com/">Python Tutorials – Real Python</a></p>
<h2 id="从知乎上看到的几个学习网站"><a href="#从知乎上看到的几个学习网站" class="headerlink" title="从知乎上看到的几个学习网站"></a>从知乎上看到的几个学习网站</h2><p><a target="_blank" rel="noopener" href="https://docs.python-guide.org/">The Hitchhiker’s Guide to Python! — The Hitchhiker’s Guide to Python (python-guide.org)</a></p>
<p><a target="_blank" rel="noopener" href="https://pymotw.com/3/">Python 3 Module of the Week — PyMOTW 3</a></p>
<p><a target="_blank" rel="noopener" href="https://pymbook.readthedocs.io/en/latest/">Welcome to Python for you and me — Python for you and me 0.5.beta1 documentation (pymbook.readthedocs.io)</a></p>
<p><a target="_blank" rel="noopener" href="https://py.checkio.org/">py.CheckiO - Python coding challenges and exercises with solutions for beginners and advanced</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/python-learning/" data-id="cli09rptq002p5ov3741fcgym" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CESM-learning" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/CESM-learning/" class="article-date">
  <time datetime="2022-04-05T02:36:28.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/model/">model</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/CESM-learning/">CESM learning</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="cesm学习"><a href="#cesm学习" class="headerlink" title="cesm学习"></a>cesm学习</h1><h2 id="官网出版论文"><a href="#官网出版论文" class="headerlink" title="官网出版论文"></a>官网出版论文</h2><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/publications/">https://www.cesm.ucar.edu/publications/</a></p>
<h2 id="cam6-3教程"><a href="#cam6-3教程" class="headerlink" title="cam6.3教程"></a>cam6.3教程</h2><p><a target="_blank" rel="noopener" href="https://ncar.github.io/CAM/doc/build/html/users_guide/index.html">https://ncar.github.io/CAM/doc/build/html/users_guide/index.html</a></p>
<h2 id="cam6教程"><a href="#cam6教程" class="headerlink" title="cam6教程"></a>cam6教程</h2><p><a target="_blank" rel="noopener" href="https://ncar.github.io/CAM/doc/build/html/CAM6.0_users_guide/introduction.html">1. Introduction — camdoc documentation (ncar.github.io)</a></p>
<h2 id="cesm-compsets"><a href="#cesm-compsets" class="headerlink" title="cesm compsets"></a>cesm compsets</h2><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm2/config/compsets.html">https://www.cesm.ucar.edu/models/cesm2/config/compsets.html</a></p>
<h2 id="关于单独大气模式的教程"><a href="#关于单独大气模式的教程" class="headerlink" title="关于单独大气模式的教程"></a>关于单独大气模式的教程</h2><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/simpler-models/held-suarez.html">https://www.cesm.ucar.edu/models/simpler-models/held-suarez.html</a></p>
<h2 id="CESM-namelist"><a href="#CESM-namelist" class="headerlink" title="CESM namelist"></a>CESM namelist</h2><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm2/settings/current/index.html">CESM2 Component Configuration Settings (ucar.edu)</a></p>
<h2 id="关于CLM设置的资料"><a href="#关于CLM设置的资料" class="headerlink" title="关于CLM设置的资料"></a>关于CLM设置的资料</h2><p><a target="_blank" rel="noopener" href="https://escomp.github.io/ctsm-docs/versions/release-clm5.0/html/users_guide/setting-up-and-running-a-case/customizing-the-clm-configuration.html">https://escomp.github.io/ctsm-docs/versions/release-clm5.0/html/users_guide/setting-up-and-running-a-case/customizing-the-clm-configuration.html</a></p>
<h2 id="CESM-论坛"><a href="#CESM-论坛" class="headerlink" title="CESM 论坛"></a>CESM 论坛</h2><p><a target="_blank" rel="noopener" href="https://bb.cgd.ucar.edu/cesm/">https://bb.cgd.ucar.edu/cesm/</a></p>
<h2 id="关于设置domain的小教程"><a href="#关于设置domain的小教程" class="headerlink" title="关于设置domain的小教程"></a>关于设置domain的小教程</h2><p><a target="_blank" rel="noopener" href="https://esmci.github.io/cime/versions/master/html/users_guide/grids.html">https://esmci.github.io/cime/versions/master/html/users_guide/grids.html</a></p>
<h2 id="关于分辨率的介绍"><a href="#关于分辨率的介绍" class="headerlink" title="关于分辨率的介绍"></a>关于分辨率的介绍</h2><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm2/config/grids.html">https://www.cesm.ucar.edu/models/cesm2/config/grids.html</a></p>
<h2 id="F2000学习"><a href="#F2000学习" class="headerlink" title="F2000学习"></a>F2000学习</h2><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ol>
<li>海温总共是有12个月的</li>
<li>通过交流与阅读张萍文献：海温实验大致流程时，先用CTRL跑n年实验，然后用每一年得出的初始场配更改后的海温跑branch实验</li>
</ol>
<h3 id="网上资料"><a href="#网上资料" class="headerlink" title="网上资料"></a>网上资料</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/cyzzym000/article/details/107702950">CESM简单应用：将HadiSST作为海温强迫场进行CESM控制实验 -compset F FC5 FCN_cyzzym000的博客-CSDN博客</a></p>
<h1 id="CESM-Tutorial-youtube"><a href="#CESM-Tutorial-youtube" class="headerlink" title="CESM Tutorial youtube"></a>CESM Tutorial youtube</h1><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p><a target="_blank" rel="noopener" href="https://z4a.net/image/2mG7bA"><img src="https://z4a.net/images/2022/05/16/-2022-05-16-100838.png" alt="-2022-05-16-100838.png"></a></p>
<p><strong>她说这两个地方可以更改namelist，build还能再改我是没想到的</strong></p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2mGTsJ"><img src="https://z4a.net/images/2022/05/16/-2022-05-16-101905.png" alt="-2022-05-16-101905.png"></a></p>
<p>三个地方，不过只建议在第一个框进行修改</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2mGgaO"><img src="https://z4a.net/images/2022/05/16/-2022-05-16-102316.png" alt="-2022-05-16-102316.png"></a></p>
<h1 id="CESM输出变量"><a href="#CESM输出变量" class="headerlink" title="CESM输出变量"></a>CESM输出变量</h1><p><a href="D:\浏览器下载\chrome\paper\LENS2_output_200129.csv">输出变量</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/CESM-learning/" data-id="cli09rpss00095ov3hvph7cdm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CESM/" rel="tag">CESM</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-知识积累" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/%E7%9F%A5%E8%AF%86%E7%A7%AF%E7%B4%AF/" class="article-date">
  <time datetime="2022-04-05T02:34:46.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/%E7%9F%A5%E8%AF%86%E7%A7%AF%E7%B4%AF/">知识积累</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="关于气候模型以及天气模型的差异"><a href="#关于气候模型以及天气模型的差异" class="headerlink" title="关于气候模型以及天气模型的差异"></a>关于气候模型以及天气模型的差异</h3><p><a target="_blank" rel="noopener" href="https://climas.arizona.edu/blog/climate-models-versus-weather-models-different-approaches-different-needs">Arizona</a></p>
<p><a target="_blank" rel="noopener" href="https://news.climate.columbia.edu/2018/05/18/climate-models-accuracy/">news.climate.columbia.edu</a></p>
<p>热力学单位换算的pdf</p>
<p><a href="D:\浏览器下载\chrome\paper\thermodynamics_conversion_factors.pdf">thermodynamics_conversion_factors.pdf</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/%E7%9F%A5%E8%AF%86%E7%A7%AF%E7%B4%AF/" data-id="cli09rpuh00515ov37ok65c0x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/knowledge-base/" rel="tag">knowledge base</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-read-paper-record" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/read-paper-record/" class="article-date">
  <time datetime="2022-04-05T02:32:32.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/read-paper-record/">read paper record</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="读文献记录"><a href="#读文献记录" class="headerlink" title="读文献记录"></a>读文献记录</h1><h2 id="Relationship-between-cross-equatorial-flows-over-the-Bay-of-Bengal-and-Australia-in-boreal-summer-Role-of-tropical-diabatic-heating"><a href="#Relationship-between-cross-equatorial-flows-over-the-Bay-of-Bengal-and-Australia-in-boreal-summer-Role-of-tropical-diabatic-heating" class="headerlink" title="Relationship between cross-equatorial flows over the Bay of Bengal and Australia in boreal summer: Role of tropical diabatic heating"></a>Relationship between cross-equatorial flows over the Bay of Bengal and Australia in boreal summer: Role of tropical diabatic heating</h2><p><a href="D:\浏览器下载\chrome\paper\1-s2.0-S167428342100074X-main.pdf">Relationship between cross-equatorial flows over the Bay of Bengal and Australia in boreal summer: Role of tropical diabatic heating</a></p>
<ol>
<li>谈到了五支索马里越赤道气流</li>
<li>影响越赤道气流的几个因素：beta效应、海陆热力差异、边界层斜压不稳定、非绝热加热</li>
<li>BOB与New Guinea的越赤道气流反相相关关系，这里注意怎么得到的：EOF方法、回归</li>
</ol>
<h2 id="Xing-N-et-al-2016-“Effect-of-the-early-and-late-onset-of-summer-monsoon-over-the-Bay-of-Bengal-on-Asian-precipitation-in-May-”-47-5-1961-1970"><a href="#Xing-N-et-al-2016-“Effect-of-the-early-and-late-onset-of-summer-monsoon-over-the-Bay-of-Bengal-on-Asian-precipitation-in-May-”-47-5-1961-1970" class="headerlink" title="Xing, N., et al. (2016). “Effect of the early and late onset of summer monsoon over the Bay of Bengal on Asian precipitation in May.”  47(5): 1961-1970."></a>Xing, N., et al. (2016). “Effect of the early and late onset of summer monsoon over the Bay of Bengal on Asian precipitation in May.”  47(5): 1961-1970.</h2><blockquote>
<p>Zonal wind index (Jiang 2011) is used to characterize the interannual variation of the BoBSM onset in this study. Based on the 925 hPa zonal wind, the BoBSM onset date is defined as the first day after April 1 on which the average 925 hPa zonal wind over 80°–95°E, 2.5°–10°N (U) is more than 3.0 m s−1 in the following 7 days (including the onset day). The SCSSM onset date is defined by the first pentad that satisfies the following two criteria (Xie and Dai 2001): (a) the areal average zonal wind at 850 hPa over 105°–120°E and 5°–15°N (USCS) is more than 0 m s−1 in the onset pentad; (b) positive USCS must last for at least 2 pentads (including the onset pentad). Dates of summer monsoon onset over Kerala (MOK) are derived from Indian<br>Meteorological Department (IMD).</p>
</blockquote>
<p>李建平组他们对季风爆发的定义</p>
<h2 id="Association-between-regional-summer-monsoon-onset-in-South-Asia-and-Tibetan-Plateau-thermal-forcing"><a href="#Association-between-regional-summer-monsoon-onset-in-South-Asia-and-Tibetan-Plateau-thermal-forcing" class="headerlink" title="Association between regional summer monsoon onset in South Asia and Tibetan Plateau thermal forcing"></a>Association between regional summer monsoon onset in South Asia and Tibetan Plateau thermal forcing</h2><p><a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s00382-022-06174-8">Association_between_regional_summer_monsoon_onset</a></p>
<ol>
<li>这篇文章认为青藏高原的热对流可以影响季风爆发，但我觉得是不对，是季风爆发把水汽输送上去才能影响青藏高原上对流</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/read-paper-record/" data-id="cli09rptt00305ov384zy5l8j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/reading-record/" rel="tag">reading record</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-learn-PS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/learn-PS/" class="article-date">
  <time datetime="2022-04-05T02:30:59.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/learn-PS/">learn PS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="PS学习"><a href="#PS学习" class="headerlink" title="PS学习"></a>PS学习</h1><p>ctrl + o打开文件</p>
<p>按住alt滚轮调整大小</p>
<p>按住alt键点眼睛会只显示这一个图层</p>
<p>“显示变换控件”——勾选会出来个框框可以调节大小；</p>
<p>按住shift是任意比例，默认等比例 要按住ctrl再点才能出来框框 快捷键ctrl+T快速调出来</p>
<p>CTRL+D 取消选区</p>
<p>CTRL+J   复制图层</p>
<h2 id="文件存储格式"><a href="#文件存储格式" class="headerlink" title="文件存储格式"></a>文件存储格式</h2><ol>
<li>psd保留ps操作</li>
<li>jpeg平平无奇</li>
<li>png可以保留透明</li>
</ol>
<h1 id="网上教程"><a href="#网上教程" class="headerlink" title="网上教程"></a>网上教程</h1><p>[PS图层混合的不同效果](<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1644547997594479361&wfr=spider&for=pc">PS的图层混合模式 27种不同效果 一次性解决让你不再迷糊（上） (baidu.com)</a>)</p>
<h2 id="第五节课-选区"><a href="#第五节课-选区" class="headerlink" title="第五节课-选区"></a>第五节课-选区</h2><p><img src="C:\Users\nuist\AppData\Roaming\Typora\typora-user-images\image-20211216142750361.png" alt="image-20211216142750361"></p>
<p>加减选区</p>
<p>快捷键：按住shift  按住alt  按住shift和alt</p>
<p>羽化：边缘有一个过渡和虚化</p>
<p>选区后alt+del键可填充前景色  ctrl+del是填后景色</p>
<p>ctrl+t 对图像进行变换</p>
<h2 id="第6节课-套索"><a href="#第6节课-套索" class="headerlink" title="第6节课  套索"></a>第6节课  套索</h2><p>按住空格键会出现小抓手，可以移动图片 </p>
<h2 id="P7-快速选择和魔棒"><a href="#P7-快速选择和魔棒" class="headerlink" title="P7 快速选择和魔棒"></a>P7 快速选择和魔棒</h2><p>按住alt和鼠标右键，拖动后圆会变大变小</p>
<p>ctrl+shift+j是拆分图层</p>
<p>“选择并遮住”里面的调整边缘画笔可以用来抠头发睫毛</p>
<p>选择并遮住属于二次调节，进行微调的</p>
<p>魔棒通过“色彩”来进行区域选择</p>
<h2 id="p8-裁切"><a href="#p8-裁切" class="headerlink" title="p8 裁切"></a>p8 裁切</h2><p>f12 可以恢复原图</p>
<p>不仅可以裁剪，往外拉还可以拓展</p>
<p>裁切工具里面的“拉直”是个好东西</p>
<p>“切片”配合“标尺”来用，标尺在视图菜单打开</p>
<p>关于切片工具：制作网页的时候很有用，用切片可以把图片切成很多小图片，然后再分别保存起来</p>
<p>ctrl+h是打开&#x2F;关闭参考线</p>
<p>ctrl+r是打开或者关闭标尺，这个标尺的横纵坐标是基于像素的</p>
<h2 id="p9图框工具（剪贴蒙版）"><a href="#p9图框工具（剪贴蒙版）" class="headerlink" title="p9图框工具（剪贴蒙版）"></a>p9图框工具（剪贴蒙版）</h2><p><img src="https://z4a.net/images/2022/04/05/image-20211229181208036.png" alt="image-20211229181208036.png"></p>
<p>创建了这个剪贴蒙版之后，就只在第二个图层画出来的范围内有了</p>
<p>置入嵌入对象后会有个十字线，双击就没了</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20211229182027592.png" alt="image-20211229182027592.png"></p>
<p>用处之一：创建艺术文字</p>
<p>图框工具</p>
<p>选了一个框之后就是划定了图片的展示区域，双击的话可以移动图框，再双击就是不动框只动图</p>
<h2 id="吸管工具"><a href="#吸管工具" class="headerlink" title="吸管工具"></a>吸管工具</h2><p>吸管工具的取样环下面半个是上次吸取的，上面半个是现在吸取的</p>
<p>颜色取样器可以显示RGB的数值，点完过后会留下一个坐标，按住alt可以删除</p>
<p>调出参考线 CTRL+R 或者在视图里面找</p>
<h2 id="污点去除工具（10）"><a href="#污点去除工具（10）" class="headerlink" title="污点去除工具（10）"></a>污点去除工具（10）</h2><p>放大缩小圆的快捷键：按住alt，鼠标右键然后拖动</p>
<p>”硬度“习惯上设置为0</p>
<h3 id="修复画笔工具："><a href="#修复画笔工具：" class="headerlink" title="修复画笔工具："></a>修复画笔工具：</h3><p>按住alt点一下地方是取样，随后在涂抹的时候会显示出取样点（十字架现实）周边的图案</p>
<h3 id="修补工具"><a href="#修补工具" class="headerlink" title="修补工具"></a>修补工具</h3><p>框住一小块区域然后拖走，等效为目标区域进行了一个替换</p>
<p>这些工具有的是新建一个空白图层，有的是对初始图层进行复制，这个在视频末有说</p>
<h2 id="画笔工具-（12）"><a href="#画笔工具-（12）" class="headerlink" title="画笔工具 （12）"></a>画笔工具 （12）</h2><p>按住alt后会变成吸管工具</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220404092346778.png" alt="image-20220404092346778.png"></p>
<p>点击这里可以设置画笔的多种属性</p>
<p><strong>硬度</strong></p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220404092753628.png" alt="image-20220404092753628.png"></p>
<p>相当于做了一个羽化</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220404093132298.png" alt="image-20220404093132298.png"></p>
<p>这里可以画在图层1上然后选中改透明度，也能够实现在这个图上画画修改透明度的效果</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220404094003070.png" alt="image-20220404094003070.png"></p>
<p>这个是对称设置，画根线然后在一侧画，另一侧也会显示出对称的图案</p>
<p>CTRL+T框选住整个图形，然后可以进行缩放</p>
<h2 id="第12节-铅笔工具"><a href="#第12节-铅笔工具" class="headerlink" title="第12节 铅笔工具"></a>第12节 铅笔工具</h2><p>铅笔工具没有硬度概念</p>
<p>颜色替换器：12分开始  可以把前景色里面的颜色给替换进画的地方，这里</p>
<p><img src="https://z4a.net/images/2022/05/11/-2022-05-11-213242.png" alt="-2022-05-11-213242.png"></p>
<p>第三个有个用途就是它只会在背景色的上面进行颜色替换，这样就可以指定被替换的颜色了</p>
<p>模式选为“颜色”的话，光影是保留了下来的</p>
<h1 id="PS快捷键"><a href="#PS快捷键" class="headerlink" title="PS快捷键"></a>PS快捷键</h1><p>f12 恢复原图</p>
<h1 id="AI学习"><a href="#AI学习" class="headerlink" title="AI学习"></a>AI学习</h1><p>教程网站：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ox411f7tA?p=6&spm_id_from=pageDriver">AI教程AI2019教程(illustrator2019版 零基础入门50集)从入门到入土，听说是江湖中传闻的熊猫版AI_哔哩哔哩_bilibili</a></p>
<h2 id="操作界面基本介绍"><a href="#操作界面基本介绍" class="headerlink" title="操作界面基本介绍"></a>操作界面基本介绍</h2><p>一顿拖面板后恢复</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9sXU"><img src="https://z4a.net/images/2022/04/05/image-20220215165059152.png" alt="image-20220215165059152.png"></a></p>
<p>工具栏分为四组：</p>
<p>选择 画笔 变形和上色 其他类</p>
<p>CTRL+1 返回百分之百视图显示</p>
<h2 id="首选项"><a href="#首选项" class="headerlink" title="首选项"></a>首选项</h2><p>自动保存及设置</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220215171827555.png" alt="image-20220215171827555.png"></p>
<h2 id="p8"><a href="#p8" class="headerlink" title="p8"></a>p8</h2><p>编辑-&gt;键盘快捷键  查看各种快捷键</p>
<p>植入图片ctrl shift p 点完图鼠标左键拖动可以设置大小</p>
<p>点击图片按住alt键拖动之后可以直接复制</p>
<h2 id="p9-画板"><a href="#p9-画板" class="headerlink" title="p9 画板"></a>p9 画板</h2><p>多个画板的选择，shift + o</p>
<p>ctrl+0 画板最大化显示</p>
<p>多个画板的可以单独导出某几个画板</p>
<h2 id="p11"><a href="#p11" class="headerlink" title="p11"></a>p11</h2><p>ctrl +y 变成黑白稿</p>
<p>自定义的界面： 一通设置之后点“新建工作区”</p>
<h2 id="p12"><a href="#p12" class="headerlink" title="p12"></a>p12</h2><p>绘制图形，拉出来图形（多角型）的时候上下键可以控制角的数量，按住ctrl可以使得角变长</p>
<h2 id="p13"><a href="#p13" class="headerlink" title="p13"></a>p13</h2><p>shift + x 替换填充和描边的颜色</p>
<p>点击d之后变成默认的白色填充黑色描边</p>
<p>吸管一点，填充色和描边色都给吸过去了</p>
<h2 id="p14"><a href="#p14" class="headerlink" title="p14"></a>p14</h2><p>ctrl +d 对图形再次变换，重复上一步的操作（放大缩小旋转）</p>
<h2 id="p15"><a href="#p15" class="headerlink" title="p15"></a>p15</h2><p>单个图形的变换获得神奇的效果</p>
<ol>
<li>按住波浪线拖拽</li>
<li>效果—》变换-》设置副本数量</li>
</ol>
<h2 id="p16"><a href="#p16" class="headerlink" title="p16"></a>p16</h2><p>布尔运算</p>
<p>求交集并集等等，按住alt键是产生复合形状，还有商量的余地，调整完了按扩展就是完完全全定下来了</p>
<h2 id="p18"><a href="#p18" class="headerlink" title="p18"></a>p18</h2><p>有画云彩，在后半段</p>
<h2 id="p19"><a href="#p19" class="headerlink" title="p19"></a>p19</h2><p><img src="https://z4a.net/images/2022/04/05/image-20220222110917404.png" alt="image-20220222110917404.png"></p>
<p>随便画几根线建立复合路径</p>
<h2 id="p20"><a href="#p20" class="headerlink" title="p20"></a>p20</h2><p>“锁定”：锁定之后就点选不了了，可以在“图层”中解锁</p>
<p>ctrl+shift+a 取消选择</p>
<p>套索工具，画不规则线条来进行框选</p>
<p>shift是加选</p>
<p>选择技法： 选择-》相同-》通过共同的属性来选择    魔棒工具用途类似</p>
<p>ctrl g组成编组   ctrl shift g 取消编组</p>
<h2 id="p25"><a href="#p25" class="headerlink" title="p25"></a>p25</h2><p>参考线怎么搞出来，先ctrl r调出来标尺然后鼠标从标尺往下拉，线就出来了</p>
<p>试图-》参考线》清楚参考线  一键删除</p>
<h2 id="p27"><a href="#p27" class="headerlink" title="p27"></a>p27</h2><p>沿某一中心点旋转： 点选“旋转”工具，按住alt然后点击</p>
<h2 id="p29"><a href="#p29" class="headerlink" title="p29"></a>p29</h2><p>按住shift键然后按这个可以进入rgb的描边色彩模式</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220222223024660.png" alt="image-20220222223024660.png"></p>
<h2 id="p30"><a href="#p30" class="headerlink" title="p30"></a>p30</h2><p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9J8i"><img src="https://z4a.net/images/2022/04/05/image-20220223084742843.png" alt="image-20220223084742843.png"></a></p>
<p>新建色板存储↑</p>
<p>新建色板中有“全局色”选项，这个意义是一旦使用了全局色，更改全局色的设置那么使用全局色的都会颜色随着同步更改</p>
<p>把图中所有的颜色种类加进色板：ctrl a全选然后色板》新建颜色组</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220223085440514.png" alt="image-20220223085440514.png"></p>
<p>存储色板文件</p>
<h2 id="p31"><a href="#p31" class="headerlink" title="p31"></a>p31</h2><p>渐变色添加新的小滑块</p>
<p><img src="https://z4a.net/images/2022/04/05/image-20220223091311929.png" alt="image-20220223091311929.png"></p>
<p>悬停在颜色栏即可</p>
<h2 id="p32"><a href="#p32" class="headerlink" title="p32"></a>p32</h2><p><img src="https://z4a.net/images/2022/04/05/image-20220223093538008.png" alt="image-20220223093538008.png"></p>
<p>外观》增加新填色&#x2F;描边-》可以套娃</p>
<h2 id="p34"><a href="#p34" class="headerlink" title="p34"></a>p34</h2><p>文字工具</p>
<p>点选文字-》创建轮廓  相当于把文字变成了图形可以进行各种操作</p>
<h2 id="p35"><a href="#p35" class="headerlink" title="p35"></a>p35</h2><p>铅笔工具，按住alt后可以平滑</p>
<h2 id="p36"><a href="#p36" class="headerlink" title="p36"></a>p36</h2><p>对象-》简化锚点</p>
<h2 id="p37"><a href="#p37" class="headerlink" title="p37"></a>p37</h2><p>点选画笔之后，按住左中括号是画笔缩小，右中括号是画笔增大[  ]</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/learn-PS/" data-id="cli09rpth00265ov38hsh4cvl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PS/" rel="tag">PS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-网址记录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/%E7%BD%91%E5%9D%80%E8%AE%B0%E5%BD%95/" class="article-date">
  <time datetime="2022-04-05T02:22:35.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/%E7%BD%91%E5%9D%80%E8%AE%B0%E5%BD%95/">网址记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="网址"><a href="#网址" class="headerlink" title="网址"></a>网址</h1><h2 id="Isca-github主页"><a href="#Isca-github主页" class="headerlink" title="Isca github主页"></a>Isca github主页</h2><p><a target="_blank" rel="noopener" href="https://github.com/ExeClim/Isca">https://github.com/ExeClim/Isca</a></p>
<h2 id="Isca论坛"><a href="#Isca论坛" class="headerlink" title="Isca论坛"></a>Isca论坛</h2><p><a target="_blank" rel="noopener" href="https://github.com/ExeClim/Isca/issues">https://github.com/ExeClim/Isca/issues</a></p>
<h2 id="一个交流地球科学的网站"><a href="#一个交流地球科学的网站" class="headerlink" title="一个交流地球科学的网站"></a>一个交流地球科学的网站</h2><p><a target="_blank" rel="noopener" href="https://earthscience.stackexchange.com/questions/13673/how-to-run-earth-system-land-surface-and-climate-models/13704#13704">https://earthscience.stackexchange.com/questions/13673/how-to-run-earth-system-land-surface-and-climate-models/13704#13704</a></p>
<h2 id="搜索磁力的中介页面"><a href="#搜索磁力的中介页面" class="headerlink" title="搜索磁力的中介页面"></a>搜索磁力的中介页面</h2><p><a target="_blank" rel="noopener" href="https://pornbt.net/">https://pornbt.net/</a></p>
<h2 id="libgen的主页"><a href="#libgen的主页" class="headerlink" title="libgen的主页"></a>libgen的主页</h2><p><a target="_blank" rel="noopener" href="https://libgen.onl/">https://libgen.onl/</a></p>
<h2 id="wrf官方帮助安装文档"><a href="#wrf官方帮助安装文档" class="headerlink" title="wrf官方帮助安装文档"></a>wrf官方帮助安装文档</h2><p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/compilation_tutorial.php?spm=a2c6h.12873639.0.0.3a096c09JaF6G9">Compiling WRF (ucar.edu)</a></p>
<p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/users/supports/best_practices_lectures_workshop.html">https://www2.mmm.ucar.edu/wrf/users/supports/best_practices_lectures_workshop.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/Basics/index.php">ARW Model Basics (ucar.edu)</a> WRF官方案例教程</p>
<h2 id="python学习网站"><a href="#python学习网站" class="headerlink" title="python学习网站"></a>python学习网站</h2><p><a target="_blank" rel="noopener" href="https://finthon.com/">https://finthon.com/</a></p>
<h2 id="matplotlib教程合集"><a href="#matplotlib教程合集" class="headerlink" title="matplotlib教程合集"></a>matplotlib教程合集</h2><p><a target="_blank" rel="noopener" href="https://matplotlib.org/stable/tutorials/">Tutorials — Matplotlib 3.5.0 documentation</a></p>
<h2 id="中世纪图书pdf"><a href="#中世纪图书pdf" class="headerlink" title="中世纪图书pdf"></a>中世纪图书pdf</h2><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/504191428">能不能推荐几部详细描写中世纪末期欧洲平民百姓人文的著作? - 知乎 (zhihu.com)</a></p>
<h2 id="盗版书网站"><a href="#盗版书网站" class="headerlink" title="盗版书网站"></a>盗版书网站</h2><p><a target="_blank" rel="noopener" href="https://za1lib.org/">https://za1lib.org/</a></p>
<h2 id="可视化工具3D"><a href="#可视化工具3D" class="headerlink" title="可视化工具3D"></a>可视化工具3D</h2><p><a target="_blank" rel="noopener" href="https://confluence.ecmwf.int/display/METV/3D+visualisation+with+VAPOR">https://confluence.ecmwf.int/display/METV/3D+visualisation+with+VAPOR</a></p>
<h2 id="专业配色网站"><a href="#专业配色网站" class="headerlink" title="专业配色网站"></a>专业配色网站</h2><p><a target="_blank" rel="noopener" href="https://mycolor.space/?hex=%23C6A3FF&sub=1">https://mycolor.space/?hex=%23C6A3FF&amp;sub=1</a></p>
<h2 id="md文件中的front-matter"><a href="#md文件中的front-matter" class="headerlink" title="md文件中的front-matter"></a>md文件中的front-matter</h2><p><a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/front-matter">Front-matter | Hexo</a></p>
<h1 id="数据网站"><a href="#数据网站" class="headerlink" title="数据网站"></a>数据网站</h1><p><a target="_blank" rel="noopener" href="https://esgf-node.llnl.gov/projects/cmip6/">cmip6 - Home | ESGF-CoG (llnl.gov)</a></p>
<p>下载CMIP6的网站</p>
<p><a target="_blank" rel="noopener" href="https://cera-www.dkrz.de/WDCC/ui/cerasearch/cmip6?input=CMIP6.CMIP.NCAR.CESM2.historical">CMIP6 Citation ‘NCAR CESM2 model output prepared for CMIP6 CMIP historical’ (dkrz.de)</a></p>
<p>其中CESM2的数据</p>
<h1 id="美国气候的科普网站，无意中发现的"><a href="#美国气候的科普网站，无意中发现的" class="headerlink" title="美国气候的科普网站，无意中发现的"></a>美国气候的科普网站，无意中发现的</h1><p><a target="_blank" rel="noopener" href="https://www.climate.gov/news-features/blogs">Blogs | NOAA Climate.gov</a></p>
<h1 id="美国中尺度网站"><a href="#美国中尺度网站" class="headerlink" title="美国中尺度网站"></a>美国中尺度网站</h1><p><a target="_blank" rel="noopener" href="https://www.mmm.ucar.edu/">MMM: Mesoscale &amp; Microscale Meteorology Laboratory (ucar.edu)</a></p>
<h1 id="MPAS教程"><a href="#MPAS教程" class="headerlink" title="MPAS教程"></a>MPAS教程</h1><p><a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/projects/mpas/tutorial/Boulder2019/index.html">MPAS Tutorial — Practice Session Guide (ucar.edu)</a></p>
<h1 id="JC的投稿人入口"><a href="#JC的投稿人入口" class="headerlink" title="JC的投稿人入口"></a>JC的投稿人入口</h1><p><a target="_blank" rel="noopener" href="https://www.editorialmanager.com/jcli/default1.aspx">https://www.editorialmanager.com/jcli/default1.aspx</a></p>
<h1 id="关于插值的-scipy"><a href="#关于插值的-scipy" class="headerlink" title="关于插值的 scipy"></a>关于插值的 scipy</h1><p><a target="_blank" rel="noopener" href="https://scipy.github.io/devdocs/tutorial/interpolate.html">https://scipy.github.io/devdocs/tutorial/interpolate.html</a></p>
<h1 id="关于typora打公式的"><a href="#关于typora打公式的" class="headerlink" title="关于typora打公式的"></a>关于typora打公式的</h1><p><a target="_blank" rel="noopener" href="https://support.typora.io/Math/">https://support.typora.io/Math/</a></p>
<p><a target="_blank" rel="noopener" href="https://laravel.wiki/typora-math-formula-quick-check.html">https://laravel.wiki/typora-math-formula-quick-check.html</a>  各种数学公式的示例</p>
<h1 id="搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下"><a href="#搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下" class="headerlink" title="搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下"></a>搜wrf搜出来个uems，我也不知道这玩意儿是啥，以后可以了解一下</h1><p><a target="_blank" rel="noopener" href="https://wrfems.info/index.php">https://wrfems.info/index.php</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/%E7%BD%91%E5%9D%80%E8%AE%B0%E5%BD%95/" data-id="cli09rpul005e5ov3955q0y3k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/website/" rel="tag">website</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-论文写作积累" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%A7%AF%E7%B4%AF/" class="article-date">
  <time datetime="2022-04-05T02:18:30.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%A7%AF%E7%B4%AF/">论文写作积累</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="写作积累"><a href="#写作积累" class="headerlink" title="写作积累"></a>写作积累</h1><h2 id="表示”显著“的："><a href="#表示”显著“的：" class="headerlink" title="表示”显著“的："></a>表示”显著“的：</h2><p>noticeable distinct significant</p>
<h2 id="过度句式"><a href="#过度句式" class="headerlink" title="过度句式"></a>过度句式</h2><p> Subject to the thermal wind balance…</p>
<h2 id="承接句"><a href="#承接句" class="headerlink" title="承接句"></a>承接句</h2><p>On the other side</p>
<h3 id="表示“开始”的"><a href="#表示“开始”的" class="headerlink" title="表示“开始”的"></a>表示“开始”的</h3><p>commence</p>
<h1 id="文献摘抄"><a href="#文献摘抄" class="headerlink" title="文献摘抄"></a>文献摘抄</h1><blockquote>
<p> From June to July, the <strong>middle and lower reaches</strong> of the Yangtze River experienced consecutive heavy rainfall</p>
</blockquote>
<p>“中下游经历降水”</p>
<blockquote>
<p>horse-shoe shaped positive anomalies</p>
</blockquote>
<p>形容pattern的</p>
<h1 id="撰写论文过程记录"><a href="#撰写论文过程记录" class="headerlink" title="撰写论文过程记录"></a>撰写论文过程记录</h1><h2 id="多少度到多少度，只需要在后面加上°，且中间有空格"><a href="#多少度到多少度，只需要在后面加上°，且中间有空格" class="headerlink" title="多少度到多少度，只需要在后面加上°，且中间有空格"></a>多少度到多少度，只需要在后面加上°，且中间有空格</h2><p>eg 10–15° N</p>
<h2 id="Hovmoller"><a href="#Hovmoller" class="headerlink" title="Hovmöller"></a>Hovmöller</h2><p>Hovmöller</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%E7%A7%AF%E7%B4%AF/" data-id="cli09rpum005j5ov3g48jc7qm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/writing/" rel="tag">writing</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CESM试验记录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/05/CESM%E8%AF%95%E9%AA%8C%E8%AE%B0%E5%BD%95/" class="article-date">
  <time datetime="2022-04-05T00:52:08.000Z" itemprop="datePublished">2022-04-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/model/">model</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/05/CESM%E8%AF%95%E9%AA%8C%E8%AE%B0%E5%BD%95/">CESM2试验记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="CESM2试验记录"><a href="#CESM2试验记录" class="headerlink" title="CESM2试验记录"></a>CESM2试验记录</h1><h3 id="2021-x2F-9-x2F-1"><a href="#2021-x2F-9-x2F-1" class="headerlink" title="2021&#x2F;9&#x2F;1"></a>2021&#x2F;9&#x2F;1</h3><p>将中南半岛地形设置为1m</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case topo_indo_1m_intel --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd topo_indo_1m_intel</span><br><span class="line">./xmlchange NTASKS=-24 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../control/user_nl_cam .</span><br><span class="line">cp ../control/sbatch1.sh .</span><br></pre></td></tr></table></figure>



<h1 id="控制实验"><a href="#控制实验" class="headerlink" title="控制实验"></a>控制实验</h1><p><strong>wgx</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case control_220416 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd control_220416</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br></pre></td></tr></table></figure>



<h2 id="去除高原大地形"><a href="#去除高原大地形" class="headerlink" title="去除高原大地形"></a>去除高原大地形</h2><h3 id="2021-x2F-9-x2F-6"><a href="#2021-x2F-9-x2F-6" class="headerlink" title="2021&#x2F;9&#x2F;6"></a>2021&#x2F;9&#x2F;6</h3><ol>
<li>在第一次实验中，将青藏高原和伊朗高原都去除，地形设置为200m</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9VET"><img src="https://z4a.net/images/2022/04/05/image-20210906105857784.png" alt="image-20210906105857784.png"></a></p>
<h4 id="试验记录"><a href="#试验记录" class="headerlink" title="试验记录"></a>试验记录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case topo_indo_no_plateau --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd topo_indo_no_plateau</span><br><span class="line">./xmlchange NTASKS=-24 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../topo_all_1m_intel2/user_nl_cam .</span><br><span class="line">cp ../topo_all_1m_intel2/sbatch1.sh .</span><br></pre></td></tr></table></figure>





<h1 id="更改海陆分布实验（一）印度大陆"><a href="#更改海陆分布实验（一）印度大陆" class="headerlink" title="更改海陆分布实验（一）印度大陆"></a>更改海陆分布实验（一）印度大陆</h1><h2 id="试验记录-1"><a href="#试验记录-1" class="headerlink" title="试验记录"></a>试验记录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case india_to_ocean2 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=1</span><br><span class="line">./xmlchange RESUBMIT=3</span><br><span class="line">./case.setup</span><br><span class="line">cp ../topo_all_1m_intel2/user_nl_cam .</span><br><span class="line">cp ../topo_all_1m_intel2/sbatch1.sh .</span><br><span class="line">!除此之外docn，cice均作了相应修改</span><br></pre></td></tr></table></figure>

<p>结果：无法正常运行，调查原因显示陆地与海洋的fraction不匹配</p>
<p><span style='color:red;background:white;font-size:50;font-family:楷体;'>这里寻找其他的办法</span></p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/paleo/faq/#intro">reource for cesm1.2 paleosimulations</a></p>
<h2 id="制作mapping文件"><a href="#制作mapping文件" class="headerlink" title="制作mapping文件"></a>制作mapping文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/file_for_cesm_change_domain/gx1v6_090205_swh.nc -nocn gx1PT --nogridcheck</span><br></pre></td></tr></table></figure>

<p>报错</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh  --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/file_for_cesm_change_domain/gx1v6_090205_swh.nc -nocn gx1PT --nogridcheck</span><br></pre></td></tr></table></figure>

<p>报错</p>
<p>这里试试使用官方的格点文件排查一下可能的错误</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9jiv"><img src="https://z4a.net/images/2022/04/05/image-20220327200136190.png" alt="image-20220327200136190.png"></a></p>
<p>还是不行</p>
<p>调查&#x2F;public1&#x2F;home&#x2F;wgx&#x2F;swh&#x2F;cesm2.1.3&#x2F;cime&#x2F;tools&#x2F;mapping&#x2F;gen_mapping_files下的PET0.RegridWeightGen.Log文件</p>
<p><a target="_blank" rel="noopener" href="https://z4a.net/image/2H9yzn"><img src="https://z4a.net/images/2022/04/05/image-20220328094233889.png" alt="image-20220328094233889.png"></a></p>
<p><font color='red'>显示似乎是NETCDF模块的问题</font></p>
<p>尝试重新安装ESMF，这里参考知乎上的教程</p>
<p>第二次安装时候的设置</p>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/qLGp7R"><img src="https://s1.ax1x.com/2022/04/05/qLGp7R.png" alt="qLGp7R.png"></a></p>
<p>以上设置在make地阶段就坏了，这里只是把编译器换成intel的试了试</p>
<p><font color='red'>使用intel的编译器安装倒是成功了，但还是显示上述问题，看来依然需要在编译的时候出了问题</font></p>
<p>那就，重装吧</p>
<p>第一次尝试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export ESMF_NETCDF=&quot;split&quot;</span><br><span class="line">export ESMF_NETCDF_INCLUDE=/public1/home/wgx/swh/app/oneapi/netcdf4/include</span><br><span class="line">export ESMF_NETCDF_LIBPATH=/public1/home/wgx/swh/app/oneapi/netcdf4/lib</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> ESMF_NETCDF_LIBS=<span class="string">&quot;-lnetcdf -lnetcdff&quot;</span></span></span><br></pre></td></tr></table></figure>



<p><font color='red'>domain文件制作成功，接下来放进模式中试试</font></p>
<p><strong>制作domain文件流程记录</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/file_for_cesm_change_domain/gx1v7_151008_swh.nc -nocn gx1PT --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1PT_TO_fv09_125_aave.220329.nc -o gx1PT -l fv09_125</span><br></pre></td></tr></table></figure>



<p><strong>第一次尝试</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_1 --res f09_g16 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_1</span><br><span class="line">./xmlchange NTASKS=-20 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test1/user_nl_cam .</span><br><span class="line">cp ../f2000_test1/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_2 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_2</span><br><span class="line">./xmlchange NTASKS=-20 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test1/user_nl_cam .</span><br><span class="line">cp ../f2000_test1/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_3 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_3</span><br><span class="line">./xmlchange NTASKS=-20 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<p><strong>这里我对clm的namelist进行了修改，但是随后在编译的过程中出现了报错</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">err=ERROR : CLM build-namelist::CLMBuildNamelist::setup_logic_lnd_frac() : Can NOT set both -lnd_frac option (set via LND_DOMAIN_PATH/LND_DOMAIN_FILE env variables) AND fatmlndfrac on namelist</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里使用xmlchange对lnd吃进去的domain文件进行了修改，但是cpl的mapping文件却无法修改成功，只在user_nl_cpl里修改会报错</p>
<p>这里编译成功了，但是运行的过程中报错了，明天试试修改ATM_DOMAIN_FILE</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_4 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_4</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_5 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_5</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_blin.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_patc.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br></pre></td></tr></table></figure>

<p><font color='red'>结果是报错：</font></p>
<p> ERROR: surfdata&#x2F;fatmgrid lon&#x2F;lat mismatch error  5.684341886080801E-014</p>
<p>这里我换个组件试试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_6 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_6</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_blin.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_patc.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>这里我尝试修改源代码，增大lat&#x2F;lon的判定范围试试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_7 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_7</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_blin.220329.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1PT_patc.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_TO_fv09_125_aave.220329.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>还是他妈的报错，这里准备重新自己制作一个不修改海陆分布的试试，看看问题出在哪</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/file_for_cesm_change_domain/fv0.9x1.25_141008.nc -natm fv09_125_1 -focn ~/swh/file_for_cesm_change_domain/gx1v7_151008.nc -nocn gx1PT_1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_8 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_8</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_blin.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_patc.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br></pre></td></tr></table></figure>

<p>尝试控制实验</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_8 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_8</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_1_gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1PT_1.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_blin.220331.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_1_TO_gx1PT_1_patc.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1PT_1_TO_fv09_125_1_aave.220331.nc&#x27;</span><br></pre></td></tr></table></figure>

<p><font color='red'>结果成功了</font></p>
<h3 id="2022-4-1再次尝试"><a href="#2022-4-1再次尝试" class="headerlink" title="2022-4-1再次尝试"></a>2022-4-1再次尝试</h3><p><strong>制作domain文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/gx1v7_151008.nc -nocn gx1pt --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_TO_fv09_125_aave.220401.nc -o gx1pt -l fv09_125 -p 2</span><br><span class="line">cp domain.lnd.fv09_125_gx1pt.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cp domain.ocn.gx1pt.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>尝试</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_10 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_10</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>去除印度大陆</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/gx1v7_151008_swh.nc -nocn gx1pt_swh --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_swh_TO_fv09_125_aave.220401.nc -o gx1pt_swh -l fv09_125 -p 2</span><br><span class="line">cp domain.lnd.fv09_125_gx1pt_swh.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cp domain.ocn.gx1pt_swh.220401.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp map_gx1pt_swh_TO_fv09_125_* ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp map_fv09_125_TO_gx1pt_swh_* ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_domain_11 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_domain_11</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=4</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_test10/user_nl_cam .</span><br><span class="line">cp ../f2000_test10/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">cp ../change_domain_6/user_nl_docn .</span><br><span class="line">cp ../change_domain_6/user_nl_cice .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>正式实验</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india4 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india4</span><br><span class="line">./xmlchange NTASKS=-16 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=10</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p><strong>正式实验2</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india5 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india5</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=1</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=1</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>这种反复提交的会报错，我也不知道为什么，只能设置一个一次跑完的了</p>
<p><strong>正式实验3</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india8 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india8</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题"><a href="#测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题" class="headerlink" title="测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题"></a>测试服务器的resubmit问题：使用过程中第二次提交的时候总会有问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_india7 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_india7</span><br><span class="line">./xmlchange NTASKS=-4 </span><br><span class="line">./xmlchange STOP_OPTION=ndays</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=10</span><br><span class="line">./xmlchange REST_OPTION=ndays</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>这里我怀疑是mpi的问题，</p>
<h4 id="测试mpi-这里是openmpi服务器自带的"><a href="#测试mpi-这里是openmpi服务器自带的" class="headerlink" title="测试mpi 这里是openmpi服务器自带的"></a>测试mpi 这里是openmpi服务器自带的</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_resubmit1 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd test_resubmit1</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=ndays</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=10</span><br><span class="line">./xmlchange REST_OPTION=ndays</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<p>会不会是reset文件没跟上呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_resubmit2 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd test_resubmit2</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=ndays</span><br><span class="line">./xmlchange STOP_N=10</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=ndays</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>



<h4 id="测试新装的oneapi"><a href="#测试新装的oneapi" class="headerlink" title="测试新装的oneapi"></a>测试新装的oneapi</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_oneapi1 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd test_oneapi1</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india3/user_nl_cam .</span><br><span class="line">cp ../replace_india3/user_nl_docn .</span><br><span class="line">cp ../replace_india3/user_nl_cice .</span><br><span class="line">cp ../replace_india3/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="更改海陆分布实验（二）中南半岛"><a href="#更改海陆分布实验（二）中南半岛" class="headerlink" title="更改海陆分布实验（二）中南半岛"></a>更改海陆分布实验（二）中南半岛</h1><h2 id="制作domain文件"><a href="#制作domain文件" class="headerlink" title="制作domain文件"></a>制作domain文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/gx1v7_151008_noinch.nc -nocn gx1pt_noinch --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc -o gx1pt_noinch -l fv09_125 -p 2</span><br><span class="line">cp *.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_inch --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd replace_inch</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_blin.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_patc.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="更改海陆分布实验（三）-海洋性大陆"><a href="#更改海陆分布实验（三）-海洋性大陆" class="headerlink" title="更改海陆分布实验（三） 海洋性大陆"></a>更改海陆分布实验（三） 海洋性大陆</h1><p><strong>制作domain文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_220410_nomarinland.nc -nocn gx1pt_nomarinland --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc -o gx1v7_nomarinland -l fv09_125 -p 2</span><br><span class="line">cp *.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_marinland --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd replace_marinland</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nomarinland.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_nomarinland_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_nomarinland_blin.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_nomarinland_patc.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="更改海陆分布实验（四）-索马里地区"><a href="#更改海陆分布实验（四）-索马里地区" class="headerlink" title="更改海陆分布实验（四） 索马里地区"></a>更改海陆分布实验（四） 索马里地区</h1><p><strong>制作domain文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_220410_somali.nc -nocn gx1v7_somali --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1pt_nomarinland_TO_fv09_125_aave.220410.nc -o gx1v7_nomarinland -l fv09_125 -p 2</span><br></pre></td></tr></table></figure>

<p>该实验在lym上跑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_somali --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_somali</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv_09125_gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv_09125_gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_somali.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_somali_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_somali_blin.220410.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_somali_patc.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_somali_TO_fv09_125_aave.220410.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_somali_TO_fv09_125_aave.220410.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="更改海陆分布实验-（五）-去除印度大陆及中南半岛"><a href="#更改海陆分布实验-（五）-去除印度大陆及中南半岛" class="headerlink" title="更改海陆分布实验 （五） 去除印度大陆及中南半岛"></a>更改海陆分布实验 （五） 去除印度大陆及中南半岛</h1><p><strong>制作domain文件</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_151008_noinch_noindian.nc -nocn gx1v7_noinch_noindian --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc -o gx1v7_noinch_noindian -l fv09_125 -p 2</span><br><span class="line">cp *.nc /public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/</span><br><span class="line">cd ../gen_mapping_files/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/gx1v7/</span><br><span class="line">cp *nc ~/swh/cesm2.1.3/inputdata/cpl/gridmaps/fv0.9x1.25/</span><br></pre></td></tr></table></figure>

<p>该实验在lym上跑</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_inch_indian --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi2</span><br><span class="line">cd replace_inch_indian</span><br><span class="line">./xmlchange NTASKS=-20</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_blin.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_patc.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="更改海陆分布实验-（六）-去除印度大陆及海洋性大陆"><a href="#更改海陆分布实验-（六）-去除印度大陆及海洋性大陆" class="headerlink" title="更改海陆分布实验 （六） 去除印度大陆及海洋性大陆"></a>更改海陆分布实验 （六） 去除印度大陆及海洋性大陆</h1><p><strong>生成domain文件</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./gen_cesm_maps.sh --serial -fatm ~/swh/data/domain/fv0.9x1.25_141008.nc -natm fv09_125 -focn ~/swh/data/domain/gx1v7_151008_nosealand_noindian.nc -nocn gx1v7_nosealand_noindian --nogridcheck</span><br><span class="line">./gen_domain -m ../gen_mapping_files/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc -o gx1v7_noinch_noindian -l fv09_125 -p 2</span><br></pre></td></tr></table></figure>

<p>该实验在lym上跑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case replace_sealand_indian --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd replace_sealand_indian</span><br><span class="line">./xmlchange NTASKS=-20</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_somali/user_nl_cam .</span><br><span class="line">cp ../replace_somali/user_nl_docn .</span><br><span class="line">cp ../replace_somali/user_nl_cice .</span><br><span class="line">cp ../replace_somali/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_nosealand_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_nosealand_noindian_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_nosealand_noindian_blin.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_nosealand_noindian_patc.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_nosealand_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_nosealand_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="海温实验"><a href="#海温实验" class="headerlink" title="海温实验"></a>海温实验</h1><h3 id="f2000-test1"><a href="#f2000-test1" class="headerlink" title="f2000_test1"></a>f2000_test1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case topo_indo_no_plateau --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd topo_indo_no_plateau</span><br><span class="line">./xmlchange NTASKS=-24 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=24</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=5</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br></pre></td></tr></table></figure>



<h3 id="测试能不能跑起来"><a href="#测试能不能跑起来" class="headerlink" title="测试能不能跑起来"></a>测试能不能跑起来</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test6 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test6</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test1/user_nl_cam .</span><br><span class="line">cp ../f2000_test1/sbatch1.sh .</span><br></pre></td></tr></table></figure>



<h3 id="测试能不能跑起来-更换更新的openmpi测试"><a href="#测试能不能跑起来-更换更新的openmpi测试" class="headerlink" title="测试能不能跑起来(更换更新的openmpi测试)"></a>测试能不能跑起来(更换更新的openmpi测试)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test8 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test8</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="测试mpi3"><a href="#测试mpi3" class="headerlink" title="测试mpi3"></a>测试mpi3</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test9 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test9</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br><span class="line"></span><br><span class="line">不可行</span><br></pre></td></tr></table></figure>

<h3 id="测试服务器自带的module"><a href="#测试服务器自带的module" class="headerlink" title="测试服务器自带的module"></a>测试服务器自带的module</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test10 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test10</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<h3 id="程序报错-试试fhist能不能跑"><a href="#程序报错-试试fhist能不能跑" class="headerlink" title="程序报错 试试fhist能不能跑"></a>程序报错 试试fhist能不能跑</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case fhist_test1 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd fhist_test1</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<p>FHIST是可以跑的，看来问题还是出在f2000的实验设置上，下一步检查inputdata是否有问题</p>
<h1 id="F2000-一-控制实验"><a href="#F2000-一-控制实验" class="headerlink" title="F2000 (一) 控制实验"></a>F2000 (一) 控制实验</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_control_220513 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_control_220513</span><br><span class="line">./xmlchange NTASKS=-12 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup</span><br><span class="line">cp ../replace_somali/user_nl_cam .</span><br><span class="line">cp ../replace_somali/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<h1 id="F2000（二）无印度大陆实验-lym服务器"><a href="#F2000（二）无印度大陆实验-lym服务器" class="headerlink" title="F2000（二）无印度大陆实验 lym服务器"></a>F2000（二）无印度大陆实验 lym服务器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case change_indian_220515 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd change_indian_220515</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_sealand_indian/user_nl_cam .</span><br><span class="line">cp ../replace_sealand_indian/user_nl_docn .</span><br><span class="line">cp ../replace_sealand_indian/user_nl_cice .</span><br><span class="line">cp ../replace_sealand_indian/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_swh.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_blin.220401.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_swh_patc.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_swh_TO_fv09_125_aave.220401.nc&#x27;</span><br></pre></td></tr></table></figure>



<h1 id="F2000-三-无中南半岛实验-wgx服务器"><a href="#F2000-三-无中南半岛实验-wgx服务器" class="headerlink" title="F2000 (三) 无中南半岛实验 wgx服务器"></a>F2000 (三) 无中南半岛实验 wgx服务器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_replace_inch_220519 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_replace_inch_220519</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../replace_india8/user_nl_cam .</span><br><span class="line">cp ../replace_india8/user_nl_docn .</span><br><span class="line">cp ../replace_india8/user_nl_cice .</span><br><span class="line">cp ../replace_india8/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/wgx/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1pt_noinch.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_blin.220406.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1pt_noinch_patc.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1pt_noinch_TO_fv09_125_aave.220406.nc&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="F2000-四-无中南半岛及印度大陆实验-lym服务器"><a href="#F2000-四-无中南半岛及印度大陆实验-lym服务器" class="headerlink" title="F2000(四)无中南半岛及印度大陆实验 lym服务器"></a>F2000(四)无中南半岛及印度大陆实验 lym服务器</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_replace_inch_indian2 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_replace_inch_indian2</span><br><span class="line">./xmlchange NTASKS=-16</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line">cp ../f2000_replace_inch_indian/user_nl_cam .</span><br><span class="line">cp ../f2000_replace_inch_indian/user_nl_docn .</span><br><span class="line">cp ../f2000_replace_inch_indian/user_nl_cice .</span><br><span class="line">cp ../f2000_replace_inch_indian/sbatch1.sh .</span><br><span class="line">./xmlchange ATM_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange LND_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.lnd.fv09_125_gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ICE_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN_DOMAIN_FILE=&#x27;/public1/home/lym/swh/cesm2.1.3/inputdata/share/domains/domain.ocn.gx1v7_noinch_noindian.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_FMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_SMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_blin.220420.nc&#x27;</span><br><span class="line">./xmlchange ATM2OCN_VMAPNAME=&#x27;cpl/gridmaps/fv0.9x1.25/map_fv09_125_TO_gx1v7_noinch_noindian_patc.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_FMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br><span class="line">./xmlchange OCN2ATM_SMAPNAME=&#x27;cpl/gridmaps/gx1v7/map_gx1v7_noinch_noindian_TO_fv09_125_aave.220420.nc&#x27;</span><br></pre></td></tr></table></figure>





<h1 id="F2000-test-on-lym"><a href="#F2000-test-on-lym" class="headerlink" title="F2000 (test on lym)"></a>F2000 (test on lym)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case f2000_test_220514 --res f09_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd f2000_test_220514</span><br><span class="line">./xmlchange NTASKS=-12 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup</span><br></pre></td></tr></table></figure>





<h1 id="高分辨率实验"><a href="#高分辨率实验" class="headerlink" title="高分辨率实验"></a>高分辨率实验</h1><p><strong>lym</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case fhist_highres4 --res f05_g17 --compset F2000climo --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd fhist_highres4</span><br><span class="line">./xmlchange NTASKS=-20</span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br><span class="line">./case.setup </span><br><span class="line"></span><br></pre></td></tr></table></figure>







<h1 id="耦合实验"><a href="#耦合实验" class="headerlink" title="耦合实验"></a>耦合实验</h1><h2 id="test-B1850"><a href="#test-B1850" class="headerlink" title="test B1850"></a>test B1850</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case test_b1850 --res f09_g17 --compset B1850 --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd test_b1850</span><br><span class="line">./xmlchange NTASKS=-12 </span><br><span class="line">./xmlchange STOP_OPTION=nyears</span><br><span class="line">./xmlchange STOP_N=2</span><br><span class="line">./xmlchange RESUBMIT=10</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nyears</span><br></pre></td></tr></table></figure>







<h1 id="CESM使用过程中的bug"><a href="#CESM使用过程中的bug" class="headerlink" title="CESM使用过程中的bug"></a>CESM使用过程中的bug</h1><p><strong>在continue run的过程中，无法成功提交，我猜想是mpi的问题</strong></p>
<p>后续在中南半岛实验中试一下，使用相同的mpi再continue run</p>
<h1 id="服务器使用过程中的记录"><a href="#服务器使用过程中的记录" class="headerlink" title="服务器使用过程中的记录"></a>服务器使用过程中的记录</h1><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><ol>
<li><p>注意！！如果使用oneapi环境的话，首先是sun(alias，配置第一步环境)，然后oneapi(alias, 设置编译器)</p>
<p>然后要source swh文件夹下的oneapi.sh 配置第二步环境才可以</p>
</li>
</ol>
<h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h2><p>module服务器自带的mpi才好用，自己编译的mpi就算使用中模式编译成功了，也跑不起来</p>
<h1 id="关于F2000运行中的输入问题"><a href="#关于F2000运行中的输入问题" class="headerlink" title="关于F2000运行中的输入问题"></a>关于F2000运行中的输入问题</h1><p>在我运行f2000的过程中报错，提示是输入文件的问题，文件名为</p>
<p>tracer_cnst_file &#x3D; &#x2F;public1&#x2F;home&#x2F;lym&#x2F;swh&#x2F;cesm2.1.3&#x2F;inputdata&#x2F;atm&#x2F;cam&#x2F;ozone&#x2F;tracer_cnst_CAM6chem_2000climo_3D_monthly_c171004.nc</p>
<p>诡异的是ncdump还能出来结果，但是文件大小只有51m，后来在另一个服务器wgx上面比对发现那里面的是三百多兆，把文件拿过来用就能正常运行了</p>
<h2 id="配置刘老师服务器"><a href="#配置刘老师服务器" class="headerlink" title="配置刘老师服务器"></a>配置刘老师服务器</h2><p>跑模式测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">./create_newcase --case lym_test3 --res f09_g17 --compset FHIST --run-unsupported --compiler intel --mach oneapi</span><br><span class="line">cd lym_test3</span><br><span class="line">./xmlchange NTASKS=-8 </span><br><span class="line">./xmlchange STOP_OPTION=nmonths</span><br><span class="line">./xmlchange STOP_N=5</span><br><span class="line">./xmlchange RESUBMIT=2</span><br><span class="line">./xmlchange REST_N=2</span><br><span class="line">./xmlchange REST_OPTION=nmonths</span><br><span class="line">./case.setup</span><br><span class="line">cp ../f2000_test6/user_nl_cam .</span><br><span class="line">cp ../f2000_test6/sbatch1.sh .</span><br></pre></td></tr></table></figure>

<p>这里总结一下登录刘老师服务器后的设置</p>
<p>登陆之后 ‘sun’,然后读取source文件就可以了</p>
<h1 id="CESM2实验日志"><a href="#CESM2实验日志" class="headerlink" title="CESM2实验日志"></a>CESM2实验日志</h1><h2 id="F2000系列实验"><a href="#F2000系列实验" class="headerlink" title="F2000系列实验"></a>F2000系列实验</h2><p><font color='red'>之前跑的FHIST实验我认为可能引入了无关变量，这里跑一组F2000的实验</font></p>
<h3 id="控制实验-1"><a href="#控制实验-1" class="headerlink" title="控制实验"></a>控制实验</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">平台 wgx </span><br><span class="line">时间 2022-5-13 </span><br><span class="line">案例名 f2000_control_220513</span><br><span class="line">已同步至本地</span><br><span class="line"></span><br><span class="line">问题记录：由于内存空间不够发现已断开，已提交重新跑(20)</span><br></pre></td></tr></table></figure>

<h3 id="无印度大陆实验"><a href="#无印度大陆实验" class="headerlink" title="无印度大陆实验"></a>无印度大陆实验</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">平台 lym</span><br><span class="line">时间 2022-5-15 </span><br><span class="line">案例名 change_indian_220515</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="无中南半岛实验"><a href="#无中南半岛实验" class="headerlink" title="无中南半岛实验"></a>无中南半岛实验</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">平台 wgx</span><br><span class="line">时间 2022-5-19</span><br><span class="line">案例名 f2000_replace_inch</span><br></pre></td></tr></table></figure>

<h2 id="无中南半岛及印度大陆实验"><a href="#无中南半岛及印度大陆实验" class="headerlink" title="无中南半岛及印度大陆实验"></a>无中南半岛及印度大陆实验</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">平台 lym</span><br><span class="line">时间 2022-5-20</span><br><span class="line">案例名 f2000_replace_inch_indian2</span><br></pre></td></tr></table></figure>





<h1 id="网上资源"><a href="#网上资源" class="headerlink" title="网上资源"></a>网上资源</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38607066/article/details/109445839?spm=1001.2014.3001.5502">(58条消息) CESM2 实验笔记_一株草的世界的博客-CSDN博客</a></p>
<h2 id="Controlling-starting-stopping-and-restarting-a-run"><a href="#Controlling-starting-stopping-and-restarting-a-run" class="headerlink" title="Controlling starting, stopping and restarting a run"></a>Controlling starting, stopping and restarting a run</h2><p>The case initialization type is set in <code>env_run.xml</code>. A CESM run can be initialized in one of three ways; startup, branch, or hybrid.</p>
<ul>
<li><p>startup</p>
<p>In a startup run (the default), all components are initialized using baseline states. These baseline states are set independently by each component and can include the use of restart files, initial files, external observed data files, or internal initialization (i.e., a “cold start”). In a startup run, the coupler sends the start date to the components at initialization. In addition, the coupler does not need an input data file. In a startup initialization, the ocean model does not start until the second ocean coupling (normally the second day).</p>
</li>
<li><p>branch</p>
<p>In a branch run, all components are initialized using a consistent set of restart files from a previous run (determined by the $<code>RUN_REFCASE</code> and $<code>RUN_REFDATE</code> variables in <code>env_run.xml</code>). The case name is generally changed for a branch run, although it does onot have to be. In a branch run, setting $<code>RUN_STARTDATE</code> is ignored because the model components obtain the start date from their restart datasets. Therefore, the start date cannot be changed for a branch run. This is the same mechanism that is used for performing a restart run (where $<code>CONTINUE_RUN</code> is set to TRUE in the <code>env_run.xml</code> file).Branch runs are typically used when sensitivity or parameter studies are required, or when settings for history file output streams need to be modified while still maintaining bit-for-bit reproducibility. Under this scenario, the new case is able to produce an exact bit-for-bit restart in the same manner as a continuation run <em>if</em> no source code or component namelist inputs are modified. All models use restart files to perform this type of run. $<code>RUN_REFCASE</code> and $<code>RUN_REFDATE</code> are required for branch runs.To set up a branch run, locate the restart tar file or restart directory for $<code>RUN_REFCASE</code> and $<code>RUN_REFDATE</code> from a previous run, then place those files in the $<code>RUNDIR</code> directory. See <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x2012.html">setting up a branch run</a> for an example.</p>
</li>
<li><p>hybrid</p>
<p>A hybrid run indicates that CESM is initialized more like a startup, but uses initialization datasets <em>from a previous case</em>. This is somewhat analogous to a branch run with relaxed restart constraints. A hybrid run allows users to bring together combinations of initial&#x2F;restart files from a previous case (specified by $<code>RUN_REFCASE</code>) at a given model output date (specified by $<code>RUN_REFDATE</code>). Unlike a branch run, the starting date of a hybrid run (specified by $<code>RUN_STARTDATE</code>) can be modified relative to the reference case. In a hybrid run, the model does not continue in a bit-for-bit fashion with respect to the reference case. The resulting climate, however, should be continuous provided that no model source code or namelists are changed in the hybrid run. In a hybrid initialization, the ocean model does not start until the second ocean coupling (normally the second day), and the coupler does a “cold start” without a restart file.</p>
</li>
</ul>
<p>The variable <code>$RUN_TYPE</code> determines the initialization type. This setting is only important for the initial run of a production run when the <code>$CONTINUE_RUN</code> variable is set to FALSE. After the initial run, the <code>$CONTINUE_RUN</code> variable is set to TRUE, and the model restarts exactly using input files in a case, date, and bit-for-bit continuous fashion. The variable <code>$RUN_TYPE</code> is the start date (in yyyy-mm-dd format) either a startup or hybrid run. If the run is targeted to be a hybrid or branch run, you must also specify values for <code>$RUN_REFCASE</code> and <code>$RUN_REFDATE</code>. All run startup variables are discussed in <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/env_run.html#run_start">run start control variables</a>.</p>
<p>Before a job is submitted to the batch system, you need to first check that the batch submission lines in <code>$CASE.run</code> are appropriate. These lines should be checked and modified accordingly for appropriate account numbers, time limits, and stdout&#x2F;stderr file names. You should then modify <code>env_run.xml</code> to determine the key run-time settings. See <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/env_run.html#run_stop">controlling run termination</a>, <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/modelnl/env_run.html#run_rest">controlling run restarts</a>, and <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x1594.html#running_ccsm_restarts">performing model restarts </a>for more details. A brief note on restarting runs. When you first begin a branch, hybrid or startup run, CONTINUE_RUN must be set to FALSE. When you successfully run and get a restart file, you will need to change CONTINUE_RUN to TRUE for the remainder of your run. See <a target="_blank" rel="noopener" href="https://www.cesm.ucar.edu/models/cesm1.1/cesm/doc/usersguide/x1594.html#running_ccsm_restarts">performing model restarts </a>for more details.</p>
<p>By default,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STOP_OPTION = ndays STOP_N = 5 STOP_DATE = -999 </span><br></pre></td></tr></table></figure>



<p>The default setting is only appropriate for initial testing. Before a longer run is started, update the stop times based on the case throughput and batch queue limits. For example, if the model runs 5 model years&#x2F;day, set <code>RESUBMIT</code>&#x3D;30, <code>STOP_OPTION</code>&#x3D; nyears, and <code>STOP_N</code>&#x3D; 5. The model will then run in five year increments, and stop after 30 submissions.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/05/CESM%E8%AF%95%E9%AA%8C%E8%AE%B0%E5%BD%95/" data-id="cli09rpt4000z5ov3ggg40ke9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CESM/" rel="tag">CESM</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/8/">&amp;laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/10/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/computer/">computer</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/model/">model</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%85%E9%9A%9C/">故障</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CESM/" rel="tag">CESM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CESM2/" rel="tag">CESM2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/English/" rel="tag">English</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Julia/" rel="tag">Julia</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ML/" rel="tag">ML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PS/" rel="tag">PS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Reading/" rel="tag">Reading</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computer/" rel="tag">computer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/data/" rel="tag">data</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/knowledge-base/" rel="tag">knowledge base</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux-command/" rel="tag">linux command</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/" rel="tag">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macOS/" rel="tag">macOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/other/" rel="tag">other</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/read/" rel="tag">read</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reading-record/" rel="tag">reading record</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/settings/" rel="tag">settings</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/statistics/" rel="tag">statistics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/website/" rel="tag">website</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/writing/" rel="tag">writing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%91%84%E5%BD%B1/" rel="tag">摄影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%85%E9%9A%9C/" rel="tag">故障</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E5%AD%A6/" rel="tag">文学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E8%AE%B0/" rel="tag">日记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%AE%B0/" rel="tag">杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%81/" rel="tag">码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%91%E6%99%AE%E7%9F%A5%E8%AF%86/" rel="tag">科普知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95/" rel="tag">科研记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" rel="tag">计算机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%B0%E5%BD%95/" rel="tag">记录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E6%96%87%E7%8C%AE/" rel="tag">读文献</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%85%E6%80%9D/" rel="tag">雅思</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CESM/" style="font-size: 18px;">CESM</a> <a href="/tags/CESM2/" style="font-size: 14px;">CESM2</a> <a href="/tags/English/" style="font-size: 12px;">English</a> <a href="/tags/Julia/" style="font-size: 10px;">Julia</a> <a href="/tags/ML/" style="font-size: 10px;">ML</a> <a href="/tags/PS/" style="font-size: 10px;">PS</a> <a href="/tags/Reading/" style="font-size: 10px;">Reading</a> <a href="/tags/computer/" style="font-size: 16px;">computer</a> <a href="/tags/data/" style="font-size: 10px;">data</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/esp32/" style="font-size: 10px;">esp32</a> <a href="/tags/git/" style="font-size: 14px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/knowledge-base/" style="font-size: 10px;">knowledge base</a> <a href="/tags/linux/" style="font-size: 16px;">linux</a> <a href="/tags/linux-command/" style="font-size: 10px;">linux command</a> <a href="/tags/mac/" style="font-size: 14px;">mac</a> <a href="/tags/macOS/" style="font-size: 10px;">macOS</a> <a href="/tags/other/" style="font-size: 10px;">other</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/read/" style="font-size: 10px;">read</a> <a href="/tags/reading-record/" style="font-size: 10px;">reading record</a> <a href="/tags/settings/" style="font-size: 10px;">settings</a> <a href="/tags/statistics/" style="font-size: 12px;">statistics</a> <a href="/tags/website/" style="font-size: 10px;">website</a> <a href="/tags/writing/" style="font-size: 10px;">writing</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">学习笔记</a> <a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 14px;">摄影</a> <a href="/tags/%E6%95%85%E9%9A%9C/" style="font-size: 10px;">故障</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 10px;">文学</a> <a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 10px;">日记</a> <a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 10px;">杂记</a> <a href="/tags/%E7%A0%81/" style="font-size: 10px;">码</a> <a href="/tags/%E7%A7%91%E6%99%AE%E7%9F%A5%E8%AF%86/" style="font-size: 10px;">科普知识</a> <a href="/tags/%E7%A7%91%E7%A0%94%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">科研记录</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA/" style="font-size: 12px;">计算机</a> <a href="/tags/%E8%AE%B0%E5%BD%95/" style="font-size: 12px;">记录</a> <a href="/tags/%E8%AF%BB%E6%96%87%E7%8C%AE/" style="font-size: 10px;">读文献</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 10px;">随笔</a> <a href="/tags/%E9%9B%85%E6%80%9D/" style="font-size: 10px;">雅思</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/23/README/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/23/C%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/05/23/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2023/05/06/VPS%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/">VPS折腾记录</a>
          </li>
        
          <li>
            <a href="/2023/05/06/vps%E8%AE%B0%E5%BD%95/">vps记录</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>